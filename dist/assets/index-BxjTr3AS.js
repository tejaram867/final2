var M_=Object.defineProperty;var fx=n=>{throw TypeError(n)};var N_=(n,e,t)=>e in n?M_(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ue=(n,e,t)=>N_(n,typeof e!="symbol"?e+"":e,t),xm=(n,e,t)=>e.has(n)||fx("Cannot "+t);var c=(n,e,t)=>(xm(n,e,"read from private field"),t?t.call(n):e.get(n)),A=(n,e,t)=>e.has(n)?fx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),x=(n,e,t,i)=>(xm(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t),w=(n,e,t)=>(xm(n,e,"access private method"),t);var Qt=(n,e,t,i)=>({set _(r){x(n,e,r,t)},get _(){return c(n,e,i)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var $p=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var e1={exports:{}},Hf={},t1={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh=Symbol.for("react.element"),D_=Symbol.for("react.portal"),F_=Symbol.for("react.fragment"),O_=Symbol.for("react.strict_mode"),j_=Symbol.for("react.profiler"),z_=Symbol.for("react.provider"),B_=Symbol.for("react.context"),H_=Symbol.for("react.forward_ref"),$_=Symbol.for("react.suspense"),U_=Symbol.for("react.memo"),V_=Symbol.for("react.lazy"),mx=Symbol.iterator;function W_(n){return n===null||typeof n!="object"?null:(n=mx&&n[mx]||n["@@iterator"],typeof n=="function"?n:null)}var n1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i1=Object.assign,r1={};function _c(n,e,t){this.props=n,this.context=e,this.refs=r1,this.updater=t||n1}_c.prototype.isReactComponent={};_c.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};_c.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function s1(){}s1.prototype=_c.prototype;function jv(n,e,t){this.props=n,this.context=e,this.refs=r1,this.updater=t||n1}var zv=jv.prototype=new s1;zv.constructor=jv;i1(zv,_c.prototype);zv.isPureReactComponent=!0;var gx=Array.isArray,a1=Object.prototype.hasOwnProperty,Bv={current:null},o1={key:!0,ref:!0,__self:!0,__source:!0};function l1(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)a1.call(e,i)&&!o1.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:hh,type:n,key:s,ref:a,props:r,_owner:Bv.current}}function q_(n,e){return{$$typeof:hh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function Hv(n){return typeof n=="object"&&n!==null&&n.$$typeof===hh}function G_(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var yx=/\/+/g;function wm(n,e){return typeof n=="object"&&n!==null&&n.key!=null?G_(""+n.key):e.toString(36)}function Zh(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case hh:case D_:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+wm(a,0):i,gx(r)?(t="",n!=null&&(t=n.replace(yx,"$&/")+"/"),Zh(r,e,t,"",function(u){return u})):r!=null&&(Hv(r)&&(r=q_(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(yx,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",gx(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+wm(s,o);a+=Zh(s,e,t,l,r)}else if(l=W_(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+wm(s,o++),a+=Zh(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Sh(n,e,t){if(n==null)return n;var i=[],r=0;return Zh(n,i,"","",function(s){return e.call(t,s,r++)}),i}function X_(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var on={current:null},Jh={transition:null},Y_={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:Jh,ReactCurrentOwner:Bv};function c1(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Sh,forEach:function(n,e,t){Sh(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Sh(n,function(){e++}),e},toArray:function(n){return Sh(n,function(e){return e})||[]},only:function(n){if(!Hv(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};be.Component=_c;be.Fragment=F_;be.Profiler=j_;be.PureComponent=jv;be.StrictMode=O_;be.Suspense=$_;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y_;be.act=c1;be.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=i1({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=Bv.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)a1.call(e,l)&&!o1.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:hh,type:n.type,key:r,ref:s,props:i,_owner:a}};be.createContext=function(n){return n={$$typeof:B_,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:z_,_context:n},n.Consumer=n};be.createElement=l1;be.createFactory=function(n){var e=l1.bind(null,n);return e.type=n,e};be.createRef=function(){return{current:null}};be.forwardRef=function(n){return{$$typeof:H_,render:n}};be.isValidElement=Hv;be.lazy=function(n){return{$$typeof:V_,_payload:{_status:-1,_result:n},_init:X_}};be.memo=function(n,e){return{$$typeof:U_,type:n,compare:e===void 0?null:e}};be.startTransition=function(n){var e=Jh.transition;Jh.transition={};try{n()}finally{Jh.transition=e}};be.unstable_act=c1;be.useCallback=function(n,e){return on.current.useCallback(n,e)};be.useContext=function(n){return on.current.useContext(n)};be.useDebugValue=function(){};be.useDeferredValue=function(n){return on.current.useDeferredValue(n)};be.useEffect=function(n,e){return on.current.useEffect(n,e)};be.useId=function(){return on.current.useId()};be.useImperativeHandle=function(n,e,t){return on.current.useImperativeHandle(n,e,t)};be.useInsertionEffect=function(n,e){return on.current.useInsertionEffect(n,e)};be.useLayoutEffect=function(n,e){return on.current.useLayoutEffect(n,e)};be.useMemo=function(n,e){return on.current.useMemo(n,e)};be.useReducer=function(n,e,t){return on.current.useReducer(n,e,t)};be.useRef=function(n){return on.current.useRef(n)};be.useState=function(n){return on.current.useState(n)};be.useSyncExternalStore=function(n,e,t){return on.current.useSyncExternalStore(n,e,t)};be.useTransition=function(){return on.current.useTransition()};be.version="18.3.1";t1.exports=be;var re=t1.exports;const u1=dh(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K_=re,Q_=Symbol.for("react.element"),Z_=Symbol.for("react.fragment"),J_=Object.prototype.hasOwnProperty,eC=K_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tC={key:!0,ref:!0,__self:!0,__source:!0};function d1(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)J_.call(e,i)&&!tC.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Q_,type:n,key:s,ref:a,props:r,_owner:eC.current}}Hf.Fragment=Z_;Hf.jsx=d1;Hf.jsxs=d1;e1.exports=Hf;var P=e1.exports,h1={exports:{}},Vn={},p1={exports:{}},f1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,I){var k=N.length;N.push(I);e:for(;0<k;){var D=k-1>>>1,U=N[D];if(0<r(U,I))N[D]=I,N[k]=U,k=D;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var I=N[0],k=N.pop();if(k!==I){N[0]=k;e:for(var D=0,U=N.length,S=U>>>1;D<S;){var z=2*(D+1)-1,oe=N[z],G=z+1,ee=N[G];if(0>r(oe,k))G<U&&0>r(ee,oe)?(N[D]=ee,N[G]=k,D=G):(N[D]=oe,N[z]=k,D=z);else if(G<U&&0>r(ee,k))N[D]=ee,N[G]=k,D=G;else break e}}return I}function r(N,I){var k=N.sortIndex-I.sortIndex;return k!==0?k:N.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],d=1,h=null,p=3,f=!1,m=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(N){for(var I=t(u);I!==null;){if(I.callback===null)i(u);else if(I.startTime<=N)i(u),I.sortIndex=I.expirationTime,e(l,I);else break;I=t(u)}}function C(N){if(y=!1,b(N),!m)if(t(l)!==null)m=!0,ae(T);else{var I=t(u);I!==null&&X(C,I.startTime-N)}}function T(N,I){m=!1,y&&(y=!1,g(R),R=-1),f=!0;var k=p;try{for(b(I),h=t(l);h!==null&&(!(h.expirationTime>I)||N&&!F());){var D=h.callback;if(typeof D=="function"){h.callback=null,p=h.priorityLevel;var U=D(h.expirationTime<=I);I=n.unstable_now(),typeof U=="function"?h.callback=U:h===t(l)&&i(l),b(I)}else i(l);h=t(l)}if(h!==null)var S=!0;else{var z=t(u);z!==null&&X(C,z.startTime-I),S=!1}return S}finally{h=null,p=k,f=!1}}var _=!1,L=null,R=-1,O=5,j=-1;function F(){return!(n.unstable_now()-j<O)}function H(){if(L!==null){var N=n.unstable_now();j=N;var I=!0;try{I=L(!0,N)}finally{I?K():(_=!1,L=null)}}else _=!1}var K;if(typeof v=="function")K=function(){v(H)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,W=Q.port2;Q.port1.onmessage=H,K=function(){W.postMessage(null)}}else K=function(){E(H,0)};function ae(N){L=N,_||(_=!0,K())}function X(N,I){R=E(function(){N(n.unstable_now())},I)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){m||f||(m=!0,ae(T))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var k=p;p=I;try{return N()}finally{p=k}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,I){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var k=p;p=N;try{return I()}finally{p=k}},n.unstable_scheduleCallback=function(N,I,k){var D=n.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?D+k:D):k=D,N){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=k+U,N={id:d++,callback:I,priorityLevel:N,startTime:k,expirationTime:U,sortIndex:-1},k>D?(N.sortIndex=k,e(u,N),t(l)===null&&N===t(u)&&(y?(g(R),R=-1):y=!0,X(C,k-D))):(N.sortIndex=U,e(l,N),m||f||(m=!0,ae(T))),N},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(N){var I=p;return function(){var k=p;p=I;try{return N.apply(this,arguments)}finally{p=k}}}})(f1);p1.exports=f1;var nC=p1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC=re,Un=nC;function $(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m1=new Set,Pu={};function Mo(n,e){yc(n,e),yc(n+"Capture",e)}function yc(n,e){for(Pu[n]=e,n=0;n<e.length;n++)m1.add(e[n])}var Qr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pg=Object.prototype.hasOwnProperty,rC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vx={},xx={};function sC(n){return pg.call(xx,n)?!0:pg.call(vx,n)?!1:rC.test(n)?xx[n]=!0:(vx[n]=!0,!1)}function aC(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function oC(n,e,t,i){if(e===null||typeof e>"u"||aC(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ot[n]=new ln(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ot[e]=new ln(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ot[n]=new ln(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ot[n]=new ln(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ot[n]=new ln(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ot[n]=new ln(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ot[n]=new ln(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ot[n]=new ln(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ot[n]=new ln(n,5,!1,n.toLowerCase(),null,!1,!1)});var $v=/[\-:]([a-z])/g;function Uv(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace($v,Uv);Ot[e]=new ln(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace($v,Uv);Ot[e]=new ln(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace($v,Uv);Ot[e]=new ln(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ot[n]=new ln(n,1,!1,n.toLowerCase(),null,!1,!1)});Ot.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ot[n]=new ln(n,1,!1,n.toLowerCase(),null,!0,!0)});function Vv(n,e,t,i){var r=Ot.hasOwnProperty(e)?Ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oC(e,t,r,i)&&(t=null),i||r===null?sC(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var is=iC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eh=Symbol.for("react.element"),Ko=Symbol.for("react.portal"),Qo=Symbol.for("react.fragment"),Wv=Symbol.for("react.strict_mode"),fg=Symbol.for("react.profiler"),g1=Symbol.for("react.provider"),y1=Symbol.for("react.context"),qv=Symbol.for("react.forward_ref"),mg=Symbol.for("react.suspense"),gg=Symbol.for("react.suspense_list"),Gv=Symbol.for("react.memo"),cs=Symbol.for("react.lazy"),v1=Symbol.for("react.offscreen"),wx=Symbol.iterator;function Dc(n){return n===null||typeof n!="object"?null:(n=wx&&n[wx]||n["@@iterator"],typeof n=="function"?n:null)}var Je=Object.assign,bm;function Xc(n){if(bm===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);bm=e&&e[1]||""}return`
`+bm+n}var km=!1;function Am(n,e){if(!n||km)return"";km=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{km=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Xc(n):""}function lC(n){switch(n.tag){case 5:return Xc(n.type);case 16:return Xc("Lazy");case 13:return Xc("Suspense");case 19:return Xc("SuspenseList");case 0:case 2:case 15:return n=Am(n.type,!1),n;case 11:return n=Am(n.type.render,!1),n;case 1:return n=Am(n.type,!0),n;default:return""}}function yg(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Qo:return"Fragment";case Ko:return"Portal";case fg:return"Profiler";case Wv:return"StrictMode";case mg:return"Suspense";case gg:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case y1:return(n.displayName||"Context")+".Consumer";case g1:return(n._context.displayName||"Context")+".Provider";case qv:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Gv:return e=n.displayName||null,e!==null?e:yg(n.type)||"Memo";case cs:e=n._payload,n=n._init;try{return yg(n(e))}catch{}}return null}function cC(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yg(e);case 8:return e===Wv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qs(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function x1(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uC(n){var e=x1(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function _h(n){n._valueTracker||(n._valueTracker=uC(n))}function w1(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=x1(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Up(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function vg(n,e){var t=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function bx(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Qs(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b1(n,e){e=e.checked,e!=null&&Vv(n,"checked",e,!1)}function xg(n,e){b1(n,e);var t=Qs(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?wg(n,e.type,t):e.hasOwnProperty("defaultValue")&&wg(n,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function kx(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function wg(n,e,t){(e!=="number"||Up(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Yc=Array.isArray;function cl(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Qs(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function bg(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Ax(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error($(92));if(Yc(t)){if(1<t.length)throw Error($(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Qs(t)}}function k1(n,e){var t=Qs(e.value),i=Qs(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function Sx(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function A1(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kg(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?A1(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ch,S1=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ch=Ch||document.createElement("div"),Ch.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ch.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Lu(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dC=["Webkit","ms","Moz","O"];Object.keys(fu).forEach(function(n){dC.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),fu[e]=fu[n]})});function E1(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||fu.hasOwnProperty(n)&&fu[n]?(""+e).trim():e+"px"}function _1(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=E1(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var hC=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ag(n,e){if(e){if(hC[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Sg(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eg=null;function Xv(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var _g=null,ul=null,dl=null;function Ex(n){if(n=mh(n)){if(typeof _g!="function")throw Error($(280));var e=n.stateNode;e&&(e=qf(e),_g(n.stateNode,n.type,e))}}function C1(n){ul?dl?dl.push(n):dl=[n]:ul=n}function T1(){if(ul){var n=ul,e=dl;if(dl=ul=null,Ex(n),e)for(n=0;n<e.length;n++)Ex(e[n])}}function P1(n,e){return n(e)}function L1(){}var Sm=!1;function I1(n,e,t){if(Sm)return n(e,t);Sm=!0;try{return P1(n,e,t)}finally{Sm=!1,(ul!==null||dl!==null)&&(L1(),T1())}}function Iu(n,e){var t=n.stateNode;if(t===null)return null;var i=qf(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error($(231,e,typeof t));return t}var Cg=!1;if(Qr)try{var Fc={};Object.defineProperty(Fc,"passive",{get:function(){Cg=!0}}),window.addEventListener("test",Fc,Fc),window.removeEventListener("test",Fc,Fc)}catch{Cg=!1}function pC(n,e,t,i,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(d){this.onError(d)}}var mu=!1,Vp=null,Wp=!1,Tg=null,fC={onError:function(n){mu=!0,Vp=n}};function mC(n,e,t,i,r,s,a,o,l){mu=!1,Vp=null,pC.apply(fC,arguments)}function gC(n,e,t,i,r,s,a,o,l){if(mC.apply(this,arguments),mu){if(mu){var u=Vp;mu=!1,Vp=null}else throw Error($(198));Wp||(Wp=!0,Tg=u)}}function No(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function R1(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function _x(n){if(No(n)!==n)throw Error($(188))}function yC(n){var e=n.alternate;if(!e){if(e=No(n),e===null)throw Error($(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return _x(r),n;if(s===i)return _x(r),e;s=s.sibling}throw Error($(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error($(189))}}if(t.alternate!==i)throw Error($(190))}if(t.tag!==3)throw Error($(188));return t.stateNode.current===t?n:e}function M1(n){return n=yC(n),n!==null?N1(n):null}function N1(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=N1(n);if(e!==null)return e;n=n.sibling}return null}var D1=Un.unstable_scheduleCallback,Cx=Un.unstable_cancelCallback,vC=Un.unstable_shouldYield,xC=Un.unstable_requestPaint,rt=Un.unstable_now,wC=Un.unstable_getCurrentPriorityLevel,Yv=Un.unstable_ImmediatePriority,F1=Un.unstable_UserBlockingPriority,qp=Un.unstable_NormalPriority,bC=Un.unstable_LowPriority,O1=Un.unstable_IdlePriority,$f=null,lr=null;function kC(n){if(lr&&typeof lr.onCommitFiberRoot=="function")try{lr.onCommitFiberRoot($f,n,void 0,(n.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:EC,AC=Math.log,SC=Math.LN2;function EC(n){return n>>>=0,n===0?32:31-(AC(n)/SC|0)|0}var Th=64,Ph=4194304;function Kc(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Gp(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=Kc(o):(s&=a,s!==0&&(i=Kc(s)))}else a=t&~r,a!==0?i=Kc(a):s!==0&&(i=Kc(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Ii(e),r=1<<t,i|=n[t],e&=~r;return i}function _C(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CC(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-Ii(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=_C(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function Pg(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function j1(){var n=Th;return Th<<=1,!(Th&4194240)&&(Th=64),n}function Em(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function ph(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Ii(e),n[e]=t}function TC(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Ii(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function Kv(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Ii(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Re=0;function z1(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var B1,Qv,H1,$1,U1,Lg=!1,Lh=[],Us=null,Vs=null,Ws=null,Ru=new Map,Mu=new Map,ds=[],PC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tx(n,e){switch(n){case"focusin":case"focusout":Us=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":Ws=null;break;case"pointerover":case"pointerout":Ru.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(e.pointerId)}}function Oc(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=mh(e),e!==null&&Qv(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function LC(n,e,t,i,r){switch(e){case"focusin":return Us=Oc(Us,n,e,t,i,r),!0;case"dragenter":return Vs=Oc(Vs,n,e,t,i,r),!0;case"mouseover":return Ws=Oc(Ws,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Ru.set(s,Oc(Ru.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Mu.set(s,Oc(Mu.get(s)||null,n,e,t,i,r)),!0}return!1}function V1(n){var e=ba(n.target);if(e!==null){var t=No(e);if(t!==null){if(e=t.tag,e===13){if(e=R1(t),e!==null){n.blockedOn=e,U1(n.priority,function(){H1(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ep(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Ig(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Eg=i,t.target.dispatchEvent(i),Eg=null}else return e=mh(t),e!==null&&Qv(e),n.blockedOn=t,!1;e.shift()}return!0}function Px(n,e,t){ep(n)&&t.delete(e)}function IC(){Lg=!1,Us!==null&&ep(Us)&&(Us=null),Vs!==null&&ep(Vs)&&(Vs=null),Ws!==null&&ep(Ws)&&(Ws=null),Ru.forEach(Px),Mu.forEach(Px)}function jc(n,e){n.blockedOn===e&&(n.blockedOn=null,Lg||(Lg=!0,Un.unstable_scheduleCallback(Un.unstable_NormalPriority,IC)))}function Nu(n){function e(r){return jc(r,n)}if(0<Lh.length){jc(Lh[0],n);for(var t=1;t<Lh.length;t++){var i=Lh[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Us!==null&&jc(Us,n),Vs!==null&&jc(Vs,n),Ws!==null&&jc(Ws,n),Ru.forEach(e),Mu.forEach(e),t=0;t<ds.length;t++)i=ds[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ds.length&&(t=ds[0],t.blockedOn===null);)V1(t),t.blockedOn===null&&ds.shift()}var hl=is.ReactCurrentBatchConfig,Xp=!0;function RC(n,e,t,i){var r=Re,s=hl.transition;hl.transition=null;try{Re=1,Zv(n,e,t,i)}finally{Re=r,hl.transition=s}}function MC(n,e,t,i){var r=Re,s=hl.transition;hl.transition=null;try{Re=4,Zv(n,e,t,i)}finally{Re=r,hl.transition=s}}function Zv(n,e,t,i){if(Xp){var r=Ig(n,e,t,i);if(r===null)Dm(n,e,i,Yp,t),Tx(n,i);else if(LC(r,n,e,t,i))i.stopPropagation();else if(Tx(n,i),e&4&&-1<PC.indexOf(n)){for(;r!==null;){var s=mh(r);if(s!==null&&B1(s),s=Ig(n,e,t,i),s===null&&Dm(n,e,i,Yp,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Dm(n,e,i,null,t)}}var Yp=null;function Ig(n,e,t,i){if(Yp=null,n=Xv(i),n=ba(n),n!==null)if(e=No(n),e===null)n=null;else if(t=e.tag,t===13){if(n=R1(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Yp=n,null}function W1(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wC()){case Yv:return 1;case F1:return 4;case qp:case bC:return 16;case O1:return 536870912;default:return 16}default:return 16}}var Hs=null,Jv=null,tp=null;function q1(){if(tp)return tp;var n,e=Jv,t=e.length,i,r="value"in Hs?Hs.value:Hs.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return tp=r.slice(n,1<i?1-i:void 0)}function np(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Ih(){return!0}function Lx(){return!1}function Wn(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ih:Lx,this.isPropagationStopped=Lx,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Ih)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Ih)},persist:function(){},isPersistent:Ih}),e}var Cc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},e0=Wn(Cc),fh=Je({},Cc,{view:0,detail:0}),NC=Wn(fh),_m,Cm,zc,Uf=Je({},fh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:t0,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zc&&(zc&&n.type==="mousemove"?(_m=n.screenX-zc.screenX,Cm=n.screenY-zc.screenY):Cm=_m=0,zc=n),_m)},movementY:function(n){return"movementY"in n?n.movementY:Cm}}),Ix=Wn(Uf),DC=Je({},Uf,{dataTransfer:0}),FC=Wn(DC),OC=Je({},fh,{relatedTarget:0}),Tm=Wn(OC),jC=Je({},Cc,{animationName:0,elapsedTime:0,pseudoElement:0}),zC=Wn(jC),BC=Je({},Cc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),HC=Wn(BC),$C=Je({},Cc,{data:0}),Rx=Wn($C),UC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qC(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=WC[n])?!!e[n]:!1}function t0(){return qC}var GC=Je({},fh,{key:function(n){if(n.key){var e=UC[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=np(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VC[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:t0,charCode:function(n){return n.type==="keypress"?np(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?np(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),XC=Wn(GC),YC=Je({},Uf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mx=Wn(YC),KC=Je({},fh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:t0}),QC=Wn(KC),ZC=Je({},Cc,{propertyName:0,elapsedTime:0,pseudoElement:0}),JC=Wn(ZC),eT=Je({},Uf,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),tT=Wn(eT),nT=[9,13,27,32],n0=Qr&&"CompositionEvent"in window,gu=null;Qr&&"documentMode"in document&&(gu=document.documentMode);var iT=Qr&&"TextEvent"in window&&!gu,G1=Qr&&(!n0||gu&&8<gu&&11>=gu),Nx=" ",Dx=!1;function X1(n,e){switch(n){case"keyup":return nT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y1(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Zo=!1;function rT(n,e){switch(n){case"compositionend":return Y1(e);case"keypress":return e.which!==32?null:(Dx=!0,Nx);case"textInput":return n=e.data,n===Nx&&Dx?null:n;default:return null}}function sT(n,e){if(Zo)return n==="compositionend"||!n0&&X1(n,e)?(n=q1(),tp=Jv=Hs=null,Zo=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return G1&&e.locale!=="ko"?null:e.data;default:return null}}var aT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!aT[n.type]:e==="textarea"}function K1(n,e,t,i){C1(i),e=Kp(e,"onChange"),0<e.length&&(t=new e0("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var yu=null,Du=null;function oT(n){ok(n,0)}function Vf(n){var e=tl(n);if(w1(e))return n}function lT(n,e){if(n==="change")return e}var Q1=!1;if(Qr){var Pm;if(Qr){var Lm="oninput"in document;if(!Lm){var Ox=document.createElement("div");Ox.setAttribute("oninput","return;"),Lm=typeof Ox.oninput=="function"}Pm=Lm}else Pm=!1;Q1=Pm&&(!document.documentMode||9<document.documentMode)}function jx(){yu&&(yu.detachEvent("onpropertychange",Z1),Du=yu=null)}function Z1(n){if(n.propertyName==="value"&&Vf(Du)){var e=[];K1(e,Du,n,Xv(n)),I1(oT,e)}}function cT(n,e,t){n==="focusin"?(jx(),yu=e,Du=t,yu.attachEvent("onpropertychange",Z1)):n==="focusout"&&jx()}function uT(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Vf(Du)}function dT(n,e){if(n==="click")return Vf(e)}function hT(n,e){if(n==="input"||n==="change")return Vf(e)}function pT(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ni=typeof Object.is=="function"?Object.is:pT;function Fu(n,e){if(Ni(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!pg.call(e,r)||!Ni(n[r],e[r]))return!1}return!0}function zx(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bx(n,e){var t=zx(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=zx(t)}}function J1(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?J1(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function ek(){for(var n=window,e=Up();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Up(n.document)}return e}function i0(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function fT(n){var e=ek(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&J1(t.ownerDocument.documentElement,t)){if(i!==null&&i0(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=Bx(t,s);var a=Bx(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var mT=Qr&&"documentMode"in document&&11>=document.documentMode,Jo=null,Rg=null,vu=null,Mg=!1;function Hx(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Mg||Jo==null||Jo!==Up(i)||(i=Jo,"selectionStart"in i&&i0(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),vu&&Fu(vu,i)||(vu=i,i=Kp(Rg,"onSelect"),0<i.length&&(e=new e0("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Jo)))}function Rh(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var el={animationend:Rh("Animation","AnimationEnd"),animationiteration:Rh("Animation","AnimationIteration"),animationstart:Rh("Animation","AnimationStart"),transitionend:Rh("Transition","TransitionEnd")},Im={},tk={};Qr&&(tk=document.createElement("div").style,"AnimationEvent"in window||(delete el.animationend.animation,delete el.animationiteration.animation,delete el.animationstart.animation),"TransitionEvent"in window||delete el.transitionend.transition);function Wf(n){if(Im[n])return Im[n];if(!el[n])return n;var e=el[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in tk)return Im[n]=e[t];return n}var nk=Wf("animationend"),ik=Wf("animationiteration"),rk=Wf("animationstart"),sk=Wf("transitionend"),ak=new Map,$x="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ia(n,e){ak.set(n,e),Mo(e,[n])}for(var Rm=0;Rm<$x.length;Rm++){var Mm=$x[Rm],gT=Mm.toLowerCase(),yT=Mm[0].toUpperCase()+Mm.slice(1);ia(gT,"on"+yT)}ia(nk,"onAnimationEnd");ia(ik,"onAnimationIteration");ia(rk,"onAnimationStart");ia("dblclick","onDoubleClick");ia("focusin","onFocus");ia("focusout","onBlur");ia(sk,"onTransitionEnd");yc("onMouseEnter",["mouseout","mouseover"]);yc("onMouseLeave",["mouseout","mouseover"]);yc("onPointerEnter",["pointerout","pointerover"]);yc("onPointerLeave",["pointerout","pointerover"]);Mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function Ux(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,gC(i,e,void 0,n),n.currentTarget=null}function ok(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Ux(r,o,u),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Ux(r,o,u),s=l}}}if(Wp)throw n=Tg,Wp=!1,Tg=null,n}function Be(n,e){var t=e[jg];t===void 0&&(t=e[jg]=new Set);var i=n+"__bubble";t.has(i)||(lk(e,n,2,!1),t.add(i))}function Nm(n,e,t){var i=0;e&&(i|=4),lk(t,n,i,e)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function Ou(n){if(!n[Mh]){n[Mh]=!0,m1.forEach(function(t){t!=="selectionchange"&&(vT.has(t)||Nm(t,!1,n),Nm(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Mh]||(e[Mh]=!0,Nm("selectionchange",!1,e))}}function lk(n,e,t,i){switch(W1(e)){case 1:var r=RC;break;case 4:r=MC;break;default:r=Zv}t=r.bind(null,e,t,n),r=void 0,!Cg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Dm(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=ba(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}I1(function(){var u=s,d=Xv(t),h=[];e:{var p=ak.get(n);if(p!==void 0){var f=e0,m=n;switch(n){case"keypress":if(np(t)===0)break e;case"keydown":case"keyup":f=XC;break;case"focusin":m="focus",f=Tm;break;case"focusout":m="blur",f=Tm;break;case"beforeblur":case"afterblur":f=Tm;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ix;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=FC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=QC;break;case nk:case ik:case rk:f=zC;break;case sk:f=JC;break;case"scroll":f=NC;break;case"wheel":f=tT;break;case"copy":case"cut":case"paste":f=HC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Mx}var y=(e&4)!==0,E=!y&&n==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var v=u,b;v!==null;){b=v;var C=b.stateNode;if(b.tag===5&&C!==null&&(b=C,g!==null&&(C=Iu(v,g),C!=null&&y.push(ju(v,C,b)))),E)break;v=v.return}0<y.length&&(p=new f(p,m,null,t,d),h.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",p&&t!==Eg&&(m=t.relatedTarget||t.fromElement)&&(ba(m)||m[Zr]))break e;if((f||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,f?(m=t.relatedTarget||t.toElement,f=u,m=m?ba(m):null,m!==null&&(E=No(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(y=Ix,C="onMouseLeave",g="onMouseEnter",v="mouse",(n==="pointerout"||n==="pointerover")&&(y=Mx,C="onPointerLeave",g="onPointerEnter",v="pointer"),E=f==null?p:tl(f),b=m==null?p:tl(m),p=new y(C,v+"leave",f,t,d),p.target=E,p.relatedTarget=b,C=null,ba(d)===u&&(y=new y(g,v+"enter",m,t,d),y.target=b,y.relatedTarget=E,C=y),E=C,f&&m)t:{for(y=f,g=m,v=0,b=y;b;b=Bo(b))v++;for(b=0,C=g;C;C=Bo(C))b++;for(;0<v-b;)y=Bo(y),v--;for(;0<b-v;)g=Bo(g),b--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=Bo(y),g=Bo(g)}y=null}else y=null;f!==null&&Vx(h,p,f,y,!1),m!==null&&E!==null&&Vx(h,E,m,y,!0)}}e:{if(p=u?tl(u):window,f=p.nodeName&&p.nodeName.toLowerCase(),f==="select"||f==="input"&&p.type==="file")var T=lT;else if(Fx(p))if(Q1)T=hT;else{T=uT;var _=cT}else(f=p.nodeName)&&f.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(T=dT);if(T&&(T=T(n,u))){K1(h,T,t,d);break e}_&&_(n,p,u),n==="focusout"&&(_=p._wrapperState)&&_.controlled&&p.type==="number"&&wg(p,"number",p.value)}switch(_=u?tl(u):window,n){case"focusin":(Fx(_)||_.contentEditable==="true")&&(Jo=_,Rg=u,vu=null);break;case"focusout":vu=Rg=Jo=null;break;case"mousedown":Mg=!0;break;case"contextmenu":case"mouseup":case"dragend":Mg=!1,Hx(h,t,d);break;case"selectionchange":if(mT)break;case"keydown":case"keyup":Hx(h,t,d)}var L;if(n0)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Zo?X1(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(G1&&t.locale!=="ko"&&(Zo||R!=="onCompositionStart"?R==="onCompositionEnd"&&Zo&&(L=q1()):(Hs=d,Jv="value"in Hs?Hs.value:Hs.textContent,Zo=!0)),_=Kp(u,R),0<_.length&&(R=new Rx(R,n,null,t,d),h.push({event:R,listeners:_}),L?R.data=L:(L=Y1(t),L!==null&&(R.data=L)))),(L=iT?rT(n,t):sT(n,t))&&(u=Kp(u,"onBeforeInput"),0<u.length&&(d=new Rx("onBeforeInput","beforeinput",null,t,d),h.push({event:d,listeners:u}),d.data=L))}ok(h,e)})}function ju(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Kp(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Iu(n,t),s!=null&&i.unshift(ju(n,s,r)),s=Iu(n,e),s!=null&&i.push(ju(n,s,r))),n=n.return}return i}function Bo(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Vx(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&u!==null&&(o=u,r?(l=Iu(t,s),l!=null&&a.unshift(ju(t,l,o))):r||(l=Iu(t,s),l!=null&&a.push(ju(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var xT=/\r\n?/g,wT=/\u0000|\uFFFD/g;function Wx(n){return(typeof n=="string"?n:""+n).replace(xT,`
`).replace(wT,"")}function Nh(n,e,t){if(e=Wx(e),Wx(n)!==e&&t)throw Error($(425))}function Qp(){}var Ng=null,Dg=null;function Fg(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,bT=typeof clearTimeout=="function"?clearTimeout:void 0,qx=typeof Promise=="function"?Promise:void 0,kT=typeof queueMicrotask=="function"?queueMicrotask:typeof qx<"u"?function(n){return qx.resolve(null).then(n).catch(AT)}:Og;function AT(n){setTimeout(function(){throw n})}function Fm(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Nu(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Nu(e)}function qs(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function Gx(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Tc=Math.random().toString(36).slice(2),ar="__reactFiber$"+Tc,zu="__reactProps$"+Tc,Zr="__reactContainer$"+Tc,jg="__reactEvents$"+Tc,ST="__reactListeners$"+Tc,ET="__reactHandles$"+Tc;function ba(n){var e=n[ar];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Zr]||t[ar]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=Gx(n);n!==null;){if(t=n[ar])return t;n=Gx(n)}return e}n=t,t=n.parentNode}return null}function mh(n){return n=n[ar]||n[Zr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function tl(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($(33))}function qf(n){return n[zu]||null}var zg=[],nl=-1;function ra(n){return{current:n}}function $e(n){0>nl||(n.current=zg[nl],zg[nl]=null,nl--)}function je(n,e){nl++,zg[nl]=n.current,n.current=e}var Zs={},Xt=ra(Zs),xn=ra(!1),Ao=Zs;function vc(n,e){var t=n.type.contextTypes;if(!t)return Zs;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function wn(n){return n=n.childContextTypes,n!=null}function Zp(){$e(xn),$e(Xt)}function Xx(n,e,t){if(Xt.current!==Zs)throw Error($(168));je(Xt,e),je(xn,t)}function ck(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,cC(n)||"Unknown",r));return Je({},t,i)}function Jp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Zs,Ao=Xt.current,je(Xt,n),je(xn,xn.current),!0}function Yx(n,e,t){var i=n.stateNode;if(!i)throw Error($(169));t?(n=ck(n,e,Ao),i.__reactInternalMemoizedMergedChildContext=n,$e(xn),$e(Xt),je(Xt,n)):$e(xn),je(xn,t)}var xr=null,Gf=!1,Om=!1;function uk(n){xr===null?xr=[n]:xr.push(n)}function _T(n){Gf=!0,uk(n)}function sa(){if(!Om&&xr!==null){Om=!0;var n=0,e=Re;try{var t=xr;for(Re=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}xr=null,Gf=!1}catch(r){throw xr!==null&&(xr=xr.slice(n+1)),D1(Yv,sa),r}finally{Re=e,Om=!1}}return null}var il=[],rl=0,ef=null,tf=0,Zn=[],Jn=0,So=null,Wr=1,qr="";function da(n,e){il[rl++]=tf,il[rl++]=ef,ef=n,tf=e}function dk(n,e,t){Zn[Jn++]=Wr,Zn[Jn++]=qr,Zn[Jn++]=So,So=n;var i=Wr;n=qr;var r=32-Ii(i)-1;i&=~(1<<r),t+=1;var s=32-Ii(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Wr=1<<32-Ii(e)+r|t<<r|i,qr=s+n}else Wr=1<<s|t<<r|i,qr=n}function r0(n){n.return!==null&&(da(n,1),dk(n,1,0))}function s0(n){for(;n===ef;)ef=il[--rl],il[rl]=null,tf=il[--rl],il[rl]=null;for(;n===So;)So=Zn[--Jn],Zn[Jn]=null,qr=Zn[--Jn],Zn[Jn]=null,Wr=Zn[--Jn],Zn[Jn]=null}var Hn=null,zn=null,Ve=!1,Pi=null;function hk(n,e){var t=ii(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function Kx(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Hn=n,zn=qs(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Hn=n,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=So!==null?{id:Wr,overflow:qr}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ii(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Hn=n,zn=null,!0):!1;default:return!1}}function Bg(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Hg(n){if(Ve){var e=zn;if(e){var t=e;if(!Kx(n,e)){if(Bg(n))throw Error($(418));e=qs(t.nextSibling);var i=Hn;e&&Kx(n,e)?hk(i,t):(n.flags=n.flags&-4097|2,Ve=!1,Hn=n)}}else{if(Bg(n))throw Error($(418));n.flags=n.flags&-4097|2,Ve=!1,Hn=n}}}function Qx(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Hn=n}function Dh(n){if(n!==Hn)return!1;if(!Ve)return Qx(n),Ve=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Fg(n.type,n.memoizedProps)),e&&(e=zn)){if(Bg(n))throw pk(),Error($(418));for(;e;)hk(n,e),e=qs(e.nextSibling)}if(Qx(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){zn=qs(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}zn=null}}else zn=Hn?qs(n.stateNode.nextSibling):null;return!0}function pk(){for(var n=zn;n;)n=qs(n.nextSibling)}function xc(){zn=Hn=null,Ve=!1}function a0(n){Pi===null?Pi=[n]:Pi.push(n)}var CT=is.ReactCurrentBatchConfig;function Bc(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($(309));var i=t.stateNode}if(!i)throw Error($(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error($(284));if(!t._owner)throw Error($(290,n))}return n}function Fh(n,e){throw n=Object.prototype.toString.call(e),Error($(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function Zx(n){var e=n._init;return e(n._payload)}function fk(n){function e(g,v){if(n){var b=g.deletions;b===null?(g.deletions=[v],g.flags|=16):b.push(v)}}function t(g,v){if(!n)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function i(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function r(g,v){return g=Ks(g,v),g.index=0,g.sibling=null,g}function s(g,v,b){return g.index=b,n?(b=g.alternate,b!==null?(b=b.index,b<v?(g.flags|=2,v):b):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return n&&g.alternate===null&&(g.flags|=2),g}function o(g,v,b,C){return v===null||v.tag!==6?(v=Vm(b,g.mode,C),v.return=g,v):(v=r(v,b),v.return=g,v)}function l(g,v,b,C){var T=b.type;return T===Qo?d(g,v,b.props.children,C,b.key):v!==null&&(v.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===cs&&Zx(T)===v.type)?(C=r(v,b.props),C.ref=Bc(g,v,b),C.return=g,C):(C=cp(b.type,b.key,b.props,null,g.mode,C),C.ref=Bc(g,v,b),C.return=g,C)}function u(g,v,b,C){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Wm(b,g.mode,C),v.return=g,v):(v=r(v,b.children||[]),v.return=g,v)}function d(g,v,b,C,T){return v===null||v.tag!==7?(v=ko(b,g.mode,C,T),v.return=g,v):(v=r(v,b),v.return=g,v)}function h(g,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Vm(""+v,g.mode,b),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Eh:return b=cp(v.type,v.key,v.props,null,g.mode,b),b.ref=Bc(g,null,v),b.return=g,b;case Ko:return v=Wm(v,g.mode,b),v.return=g,v;case cs:var C=v._init;return h(g,C(v._payload),b)}if(Yc(v)||Dc(v))return v=ko(v,g.mode,b,null),v.return=g,v;Fh(g,v)}return null}function p(g,v,b,C){var T=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return T!==null?null:o(g,v,""+b,C);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Eh:return b.key===T?l(g,v,b,C):null;case Ko:return b.key===T?u(g,v,b,C):null;case cs:return T=b._init,p(g,v,T(b._payload),C)}if(Yc(b)||Dc(b))return T!==null?null:d(g,v,b,C,null);Fh(g,b)}return null}function f(g,v,b,C,T){if(typeof C=="string"&&C!==""||typeof C=="number")return g=g.get(b)||null,o(v,g,""+C,T);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Eh:return g=g.get(C.key===null?b:C.key)||null,l(v,g,C,T);case Ko:return g=g.get(C.key===null?b:C.key)||null,u(v,g,C,T);case cs:var _=C._init;return f(g,v,b,_(C._payload),T)}if(Yc(C)||Dc(C))return g=g.get(b)||null,d(v,g,C,T,null);Fh(v,C)}return null}function m(g,v,b,C){for(var T=null,_=null,L=v,R=v=0,O=null;L!==null&&R<b.length;R++){L.index>R?(O=L,L=null):O=L.sibling;var j=p(g,L,b[R],C);if(j===null){L===null&&(L=O);break}n&&L&&j.alternate===null&&e(g,L),v=s(j,v,R),_===null?T=j:_.sibling=j,_=j,L=O}if(R===b.length)return t(g,L),Ve&&da(g,R),T;if(L===null){for(;R<b.length;R++)L=h(g,b[R],C),L!==null&&(v=s(L,v,R),_===null?T=L:_.sibling=L,_=L);return Ve&&da(g,R),T}for(L=i(g,L);R<b.length;R++)O=f(L,g,R,b[R],C),O!==null&&(n&&O.alternate!==null&&L.delete(O.key===null?R:O.key),v=s(O,v,R),_===null?T=O:_.sibling=O,_=O);return n&&L.forEach(function(F){return e(g,F)}),Ve&&da(g,R),T}function y(g,v,b,C){var T=Dc(b);if(typeof T!="function")throw Error($(150));if(b=T.call(b),b==null)throw Error($(151));for(var _=T=null,L=v,R=v=0,O=null,j=b.next();L!==null&&!j.done;R++,j=b.next()){L.index>R?(O=L,L=null):O=L.sibling;var F=p(g,L,j.value,C);if(F===null){L===null&&(L=O);break}n&&L&&F.alternate===null&&e(g,L),v=s(F,v,R),_===null?T=F:_.sibling=F,_=F,L=O}if(j.done)return t(g,L),Ve&&da(g,R),T;if(L===null){for(;!j.done;R++,j=b.next())j=h(g,j.value,C),j!==null&&(v=s(j,v,R),_===null?T=j:_.sibling=j,_=j);return Ve&&da(g,R),T}for(L=i(g,L);!j.done;R++,j=b.next())j=f(L,g,R,j.value,C),j!==null&&(n&&j.alternate!==null&&L.delete(j.key===null?R:j.key),v=s(j,v,R),_===null?T=j:_.sibling=j,_=j);return n&&L.forEach(function(H){return e(g,H)}),Ve&&da(g,R),T}function E(g,v,b,C){if(typeof b=="object"&&b!==null&&b.type===Qo&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Eh:e:{for(var T=b.key,_=v;_!==null;){if(_.key===T){if(T=b.type,T===Qo){if(_.tag===7){t(g,_.sibling),v=r(_,b.props.children),v.return=g,g=v;break e}}else if(_.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===cs&&Zx(T)===_.type){t(g,_.sibling),v=r(_,b.props),v.ref=Bc(g,_,b),v.return=g,g=v;break e}t(g,_);break}else e(g,_);_=_.sibling}b.type===Qo?(v=ko(b.props.children,g.mode,C,b.key),v.return=g,g=v):(C=cp(b.type,b.key,b.props,null,g.mode,C),C.ref=Bc(g,v,b),C.return=g,g=C)}return a(g);case Ko:e:{for(_=b.key;v!==null;){if(v.key===_)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){t(g,v.sibling),v=r(v,b.children||[]),v.return=g,g=v;break e}else{t(g,v);break}else e(g,v);v=v.sibling}v=Wm(b,g.mode,C),v.return=g,g=v}return a(g);case cs:return _=b._init,E(g,v,_(b._payload),C)}if(Yc(b))return m(g,v,b,C);if(Dc(b))return y(g,v,b,C);Fh(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(t(g,v.sibling),v=r(v,b),v.return=g,g=v):(t(g,v),v=Vm(b,g.mode,C),v.return=g,g=v),a(g)):t(g,v)}return E}var wc=fk(!0),mk=fk(!1),nf=ra(null),rf=null,sl=null,o0=null;function l0(){o0=sl=rf=null}function c0(n){var e=nf.current;$e(nf),n._currentValue=e}function $g(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function pl(n,e){rf=n,o0=sl=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(yn=!0),n.firstContext=null)}function ai(n){var e=n._currentValue;if(o0!==n)if(n={context:n,memoizedValue:e,next:null},sl===null){if(rf===null)throw Error($(308));sl=n,rf.dependencies={lanes:0,firstContext:n}}else sl=sl.next=n;return e}var ka=null;function u0(n){ka===null?ka=[n]:ka.push(n)}function gk(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,u0(e)):(t.next=r.next,r.next=t),e.interleaved=t,Jr(n,i)}function Jr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var us=!1;function d0(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yk(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Gr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Gs(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ee&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Jr(n,t)}return r=i.interleaved,r===null?(e.next=e,u0(i)):(e.next=r.next,r.next=e),i.interleaved=e,Jr(n,t)}function ip(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Kv(n,t)}}function Jx(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function sf(n,e,t,i){var r=n.updateQueue;us=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var d=n.alternate;d!==null&&(d=d.updateQueue,o=d.lastBaseUpdate,o!==a&&(o===null?d.firstBaseUpdate=u:o.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,d=u=l=null,o=s;do{var p=o.lane,f=o.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=n,y=o;switch(p=e,f=t,y.tag){case 1:if(m=y.payload,typeof m=="function"){h=m.call(f,h,p);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,p=typeof m=="function"?m.call(f,h,p):m,p==null)break e;h=Je({},h,p);break e;case 2:us=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[o]:p.push(o))}else f={eventTime:f,lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},d===null?(u=d=f,l=h):d=d.next=f,a|=p;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;p=o,o=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(d===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);_o|=a,n.lanes=a,n.memoizedState=h}}function ew(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error($(191,r));r.call(i)}}}var gh={},cr=ra(gh),Bu=ra(gh),Hu=ra(gh);function Aa(n){if(n===gh)throw Error($(174));return n}function h0(n,e){switch(je(Hu,e),je(Bu,n),je(cr,gh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kg(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=kg(e,n)}$e(cr),je(cr,e)}function bc(){$e(cr),$e(Bu),$e(Hu)}function vk(n){Aa(Hu.current);var e=Aa(cr.current),t=kg(e,n.type);e!==t&&(je(Bu,n),je(cr,t))}function p0(n){Bu.current===n&&($e(cr),$e(Bu))}var Qe=ra(0);function af(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jm=[];function f0(){for(var n=0;n<jm.length;n++)jm[n]._workInProgressVersionPrimary=null;jm.length=0}var rp=is.ReactCurrentDispatcher,zm=is.ReactCurrentBatchConfig,Eo=0,Ze=null,vt=null,Ct=null,of=!1,xu=!1,$u=0,TT=0;function jt(){throw Error($(321))}function m0(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ni(n[t],e[t]))return!1;return!0}function g0(n,e,t,i,r,s){if(Eo=s,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rp.current=n===null||n.memoizedState===null?RT:MT,n=t(i,r),xu){s=0;do{if(xu=!1,$u=0,25<=s)throw Error($(301));s+=1,Ct=vt=null,e.updateQueue=null,rp.current=NT,n=t(i,r)}while(xu)}if(rp.current=lf,e=vt!==null&&vt.next!==null,Eo=0,Ct=vt=Ze=null,of=!1,e)throw Error($(300));return n}function y0(){var n=$u!==0;return $u=0,n}function Bi(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ze.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function oi(){if(vt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=vt.next;var e=Ct===null?Ze.memoizedState:Ct.next;if(e!==null)Ct=e,vt=n;else{if(n===null)throw Error($(310));vt=n,n={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Ct===null?Ze.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function Uu(n,e){return typeof e=="function"?e(n):e}function Bm(n){var e=oi(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var i=vt,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,u=s;do{var d=u.lane;if((Eo&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=i):l=l.next=h,Ze.lanes|=d,_o|=d}u=u.next}while(u!==null&&u!==s);l===null?a=i:l.next=o,Ni(i,e.memoizedState)||(yn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Ze.lanes|=s,_o|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Hm(n){var e=oi(),t=e.queue;if(t===null)throw Error($(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);Ni(s,e.memoizedState)||(yn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function xk(){}function wk(n,e){var t=Ze,i=oi(),r=e(),s=!Ni(i.memoizedState,r);if(s&&(i.memoizedState=r,yn=!0),i=i.queue,v0(Ak.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Ct!==null&&Ct.memoizedState.tag&1){if(t.flags|=2048,Vu(9,kk.bind(null,t,i,r,e),void 0,null),Tt===null)throw Error($(349));Eo&30||bk(t,e,r)}return r}function bk(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function kk(n,e,t,i){e.value=t,e.getSnapshot=i,Sk(e)&&Ek(n)}function Ak(n,e,t){return t(function(){Sk(e)&&Ek(n)})}function Sk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ni(n,t)}catch{return!0}}function Ek(n){var e=Jr(n,1);e!==null&&Ri(e,n,1,-1)}function tw(n){var e=Bi();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:n},e.queue=n,n=n.dispatch=IT.bind(null,Ze,n),[e.memoizedState,n]}function Vu(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function _k(){return oi().memoizedState}function sp(n,e,t,i){var r=Bi();Ze.flags|=n,r.memoizedState=Vu(1|e,t,void 0,i===void 0?null:i)}function Xf(n,e,t,i){var r=oi();i=i===void 0?null:i;var s=void 0;if(vt!==null){var a=vt.memoizedState;if(s=a.destroy,i!==null&&m0(i,a.deps)){r.memoizedState=Vu(e,t,s,i);return}}Ze.flags|=n,r.memoizedState=Vu(1|e,t,s,i)}function nw(n,e){return sp(8390656,8,n,e)}function v0(n,e){return Xf(2048,8,n,e)}function Ck(n,e){return Xf(4,2,n,e)}function Tk(n,e){return Xf(4,4,n,e)}function Pk(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Lk(n,e,t){return t=t!=null?t.concat([n]):null,Xf(4,4,Pk.bind(null,e,n),t)}function x0(){}function Ik(n,e){var t=oi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&m0(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function Rk(n,e){var t=oi();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&m0(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function Mk(n,e,t){return Eo&21?(Ni(t,e)||(t=j1(),Ze.lanes|=t,_o|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,yn=!0),n.memoizedState=t)}function PT(n,e){var t=Re;Re=t!==0&&4>t?t:4,n(!0);var i=zm.transition;zm.transition={};try{n(!1),e()}finally{Re=t,zm.transition=i}}function Nk(){return oi().memoizedState}function LT(n,e,t){var i=Ys(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},Dk(n))Fk(e,t);else if(t=gk(n,e,t,i),t!==null){var r=nn();Ri(t,n,i,r),Ok(t,e,i)}}function IT(n,e,t){var i=Ys(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(Dk(n))Fk(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,Ni(o,a)){var l=e.interleaved;l===null?(r.next=r,u0(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=gk(n,e,r,i),t!==null&&(r=nn(),Ri(t,n,i,r),Ok(t,e,i))}}function Dk(n){var e=n.alternate;return n===Ze||e!==null&&e===Ze}function Fk(n,e){xu=of=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Ok(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,Kv(n,t)}}var lf={readContext:ai,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},RT={readContext:ai,useCallback:function(n,e){return Bi().memoizedState=[n,e===void 0?null:e],n},useContext:ai,useEffect:nw,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,sp(4194308,4,Pk.bind(null,e,n),t)},useLayoutEffect:function(n,e){return sp(4194308,4,n,e)},useInsertionEffect:function(n,e){return sp(4,2,n,e)},useMemo:function(n,e){var t=Bi();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Bi();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=LT.bind(null,Ze,n),[i.memoizedState,n]},useRef:function(n){var e=Bi();return n={current:n},e.memoizedState=n},useState:tw,useDebugValue:x0,useDeferredValue:function(n){return Bi().memoizedState=n},useTransition:function(){var n=tw(!1),e=n[0];return n=PT.bind(null,n[1]),Bi().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Ze,r=Bi();if(Ve){if(t===void 0)throw Error($(407));t=t()}else{if(t=e(),Tt===null)throw Error($(349));Eo&30||bk(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,nw(Ak.bind(null,i,s,n),[n]),i.flags|=2048,Vu(9,kk.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Bi(),e=Tt.identifierPrefix;if(Ve){var t=qr,i=Wr;t=(i&~(1<<32-Ii(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=$u++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=TT++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},MT={readContext:ai,useCallback:Ik,useContext:ai,useEffect:v0,useImperativeHandle:Lk,useInsertionEffect:Ck,useLayoutEffect:Tk,useMemo:Rk,useReducer:Bm,useRef:_k,useState:function(){return Bm(Uu)},useDebugValue:x0,useDeferredValue:function(n){var e=oi();return Mk(e,vt.memoizedState,n)},useTransition:function(){var n=Bm(Uu)[0],e=oi().memoizedState;return[n,e]},useMutableSource:xk,useSyncExternalStore:wk,useId:Nk,unstable_isNewReconciler:!1},NT={readContext:ai,useCallback:Ik,useContext:ai,useEffect:v0,useImperativeHandle:Lk,useInsertionEffect:Ck,useLayoutEffect:Tk,useMemo:Rk,useReducer:Hm,useRef:_k,useState:function(){return Hm(Uu)},useDebugValue:x0,useDeferredValue:function(n){var e=oi();return vt===null?e.memoizedState=n:Mk(e,vt.memoizedState,n)},useTransition:function(){var n=Hm(Uu)[0],e=oi().memoizedState;return[n,e]},useMutableSource:xk,useSyncExternalStore:wk,useId:Nk,unstable_isNewReconciler:!1};function pi(n,e){if(n&&n.defaultProps){e=Je({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Ug(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Je({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Yf={isMounted:function(n){return(n=n._reactInternals)?No(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=nn(),r=Ys(n),s=Gr(i,r);s.payload=e,t!=null&&(s.callback=t),e=Gs(n,s,r),e!==null&&(Ri(e,n,r,i),ip(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=nn(),r=Ys(n),s=Gr(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Gs(n,s,r),e!==null&&(Ri(e,n,r,i),ip(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=nn(),i=Ys(n),r=Gr(t,i);r.tag=2,e!=null&&(r.callback=e),e=Gs(n,r,i),e!==null&&(Ri(e,n,i,t),ip(e,n,i))}};function iw(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Fu(t,i)||!Fu(r,s):!0}function jk(n,e,t){var i=!1,r=Zs,s=e.contextType;return typeof s=="object"&&s!==null?s=ai(s):(r=wn(e)?Ao:Xt.current,i=e.contextTypes,s=(i=i!=null)?vc(n,r):Zs),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Yf,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function rw(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Yf.enqueueReplaceState(e,e.state,null)}function Vg(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},d0(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ai(s):(s=wn(e)?Ao:Xt.current,r.context=vc(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ug(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Yf.enqueueReplaceState(r,r.state,null),sf(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function kc(n,e){try{var t="",i=e;do t+=lC(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function $m(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Wg(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var DT=typeof WeakMap=="function"?WeakMap:Map;function zk(n,e,t){t=Gr(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){uf||(uf=!0,ty=i),Wg(n,e)},t}function Bk(n,e,t){t=Gr(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Wg(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Wg(n,e),typeof i!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function sw(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new DT;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=YT.bind(null,n,e,t),e.then(n,n))}function aw(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ow(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Gr(-1,1),e.tag=2,Gs(t,e,1))),t.lanes|=1),n)}var FT=is.ReactCurrentOwner,yn=!1;function en(n,e,t,i){e.child=n===null?mk(e,null,t,i):wc(e,n.child,t,i)}function lw(n,e,t,i,r){t=t.render;var s=e.ref;return pl(e,r),i=g0(n,e,t,i,s,r),t=y0(),n!==null&&!yn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,es(n,e,r)):(Ve&&t&&r0(e),e.flags|=1,en(n,e,i,r),e.child)}function cw(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!C0(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,Hk(n,e,s,i,r)):(n=cp(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Fu,t(a,i)&&n.ref===e.ref)return es(n,e,r)}return e.flags|=1,n=Ks(s,i),n.ref=e.ref,n.return=e,e.child=n}function Hk(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Fu(s,i)&&n.ref===e.ref)if(yn=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(yn=!0);else return e.lanes=n.lanes,es(n,e,r)}return qg(n,e,t,i,r)}function $k(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(ol,On),On|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,je(ol,On),On|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,je(ol,On),On|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,je(ol,On),On|=i;return en(n,e,r,t),e.child}function Uk(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function qg(n,e,t,i,r){var s=wn(t)?Ao:Xt.current;return s=vc(e,s),pl(e,r),t=g0(n,e,t,i,s,r),i=y0(),n!==null&&!yn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,es(n,e,r)):(Ve&&i&&r0(e),e.flags|=1,en(n,e,t,r),e.child)}function uw(n,e,t,i,r){if(wn(t)){var s=!0;Jp(e)}else s=!1;if(pl(e,r),e.stateNode===null)ap(n,e),jk(e,t,i),Vg(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=ai(u):(u=wn(t)?Ao:Xt.current,u=vc(e,u));var d=t.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==u)&&rw(e,a,i,u),us=!1;var p=e.memoizedState;a.state=p,sf(e,i,a,r),l=e.memoizedState,o!==i||p!==l||xn.current||us?(typeof d=="function"&&(Ug(e,t,d,i),l=e.memoizedState),(o=us||iw(e,t,o,i,p,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,yk(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:pi(e.type,o),a.props=u,h=e.pendingProps,p=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=ai(l):(l=wn(t)?Ao:Xt.current,l=vc(e,l));var f=t.getDerivedStateFromProps;(d=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||p!==l)&&rw(e,a,i,l),us=!1,p=e.memoizedState,a.state=p,sf(e,i,a,r);var m=e.memoizedState;o!==h||p!==m||xn.current||us?(typeof f=="function"&&(Ug(e,t,f,i),m=e.memoizedState),(u=us||iw(e,t,u,i,p,m,l)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=m),a.props=i,a.state=m,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Gg(n,e,t,i,s,r)}function Gg(n,e,t,i,r,s){Uk(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Yx(e,t,!1),es(n,e,s);i=e.stateNode,FT.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=wc(e,n.child,null,s),e.child=wc(e,null,o,s)):en(n,e,o,s),e.memoizedState=i.state,r&&Yx(e,t,!0),e.child}function Vk(n){var e=n.stateNode;e.pendingContext?Xx(n,e.pendingContext,e.pendingContext!==e.context):e.context&&Xx(n,e.context,!1),h0(n,e.containerInfo)}function dw(n,e,t,i,r){return xc(),a0(r),e.flags|=256,en(n,e,t,i),e.child}var Xg={dehydrated:null,treeContext:null,retryLane:0};function Yg(n){return{baseLanes:n,cachePool:null,transitions:null}}function Wk(n,e,t){var i=e.pendingProps,r=Qe.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),je(Qe,r&1),n===null)return Hg(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Zf(a,i,0,null),n=ko(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Yg(t),e.memoizedState=Xg,n):w0(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return OT(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ks(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Ks(o,s):(s=ko(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?Yg(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=Xg,i}return s=n.child,n=s.sibling,i=Ks(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function w0(n,e){return e=Zf({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Oh(n,e,t,i){return i!==null&&a0(i),wc(e,n.child,null,t),n=w0(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function OT(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=$m(Error($(422))),Oh(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Zf({mode:"visible",children:i.children},r,0,null),s=ko(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&wc(e,n.child,null,a),e.child.memoizedState=Yg(a),e.memoizedState=Xg,s);if(!(e.mode&1))return Oh(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error($(419)),i=$m(s,i,void 0),Oh(n,e,a,i)}if(o=(a&n.childLanes)!==0,yn||o){if(i=Tt,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Jr(n,r),Ri(i,n,r,-1))}return _0(),i=$m(Error($(421))),Oh(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=KT.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,zn=qs(r.nextSibling),Hn=e,Ve=!0,Pi=null,n!==null&&(Zn[Jn++]=Wr,Zn[Jn++]=qr,Zn[Jn++]=So,Wr=n.id,qr=n.overflow,So=e),e=w0(e,i.children),e.flags|=4096,e)}function hw(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),$g(n.return,e,t)}function Um(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function qk(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(en(n,e,i.children,t),i=Qe.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hw(n,t,e);else if(n.tag===19)hw(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(je(Qe,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&af(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Um(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&af(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Um(e,!0,t,null,s);break;case"together":Um(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ap(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function es(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),_o|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error($(153));if(e.child!==null){for(n=e.child,t=Ks(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ks(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function jT(n,e,t){switch(e.tag){case 3:Vk(e),xc();break;case 5:vk(e);break;case 1:wn(e.type)&&Jp(e);break;case 4:h0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;je(nf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(je(Qe,Qe.current&1),e.flags|=128,null):t&e.child.childLanes?Wk(n,e,t):(je(Qe,Qe.current&1),n=es(n,e,t),n!==null?n.sibling:null);je(Qe,Qe.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return qk(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(Qe,Qe.current),i)break;return null;case 22:case 23:return e.lanes=0,$k(n,e,t)}return es(n,e,t)}var Gk,Kg,Xk,Yk;Gk=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Kg=function(){};Xk=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Aa(cr.current);var s=null;switch(t){case"input":r=vg(n,r),i=vg(n,i),s=[];break;case"select":r=Je({},r,{value:void 0}),i=Je({},i,{value:void 0}),s=[];break;case"textarea":r=bg(n,r),i=bg(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Qp)}Ag(t,i);var a;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Pu.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(o=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Pu.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Be("scroll",n),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Yk=function(n,e,t,i){t!==i&&(e.flags|=4)};function Hc(n,e){if(!Ve)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function zt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function zT(n,e,t){var i=e.pendingProps;switch(s0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(e),null;case 1:return wn(e.type)&&Zp(),zt(e),null;case 3:return i=e.stateNode,bc(),$e(xn),$e(Xt),f0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Dh(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pi!==null&&(ry(Pi),Pi=null))),Kg(n,e),zt(e),null;case 5:p0(e);var r=Aa(Hu.current);if(t=e.type,n!==null&&e.stateNode!=null)Xk(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return zt(e),null}if(n=Aa(cr.current),Dh(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ar]=e,i[zu]=s,n=(e.mode&1)!==0,t){case"dialog":Be("cancel",i),Be("close",i);break;case"iframe":case"object":case"embed":Be("load",i);break;case"video":case"audio":for(r=0;r<Qc.length;r++)Be(Qc[r],i);break;case"source":Be("error",i);break;case"img":case"image":case"link":Be("error",i),Be("load",i);break;case"details":Be("toggle",i);break;case"input":bx(i,s),Be("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Be("invalid",i);break;case"textarea":Ax(i,s),Be("invalid",i)}Ag(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&Nh(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&Nh(i.textContent,o,n),r=["children",""+o]):Pu.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Be("scroll",i)}switch(t){case"input":_h(i),kx(i,s,!0);break;case"textarea":_h(i),Sx(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Qp)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=A1(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[ar]=e,n[zu]=i,Gk(n,e,!1,!1),e.stateNode=n;e:{switch(a=Sg(t,i),t){case"dialog":Be("cancel",n),Be("close",n),r=i;break;case"iframe":case"object":case"embed":Be("load",n),r=i;break;case"video":case"audio":for(r=0;r<Qc.length;r++)Be(Qc[r],n);r=i;break;case"source":Be("error",n),r=i;break;case"img":case"image":case"link":Be("error",n),Be("load",n),r=i;break;case"details":Be("toggle",n),r=i;break;case"input":bx(n,i),r=vg(n,i),Be("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Je({},i,{value:void 0}),Be("invalid",n);break;case"textarea":Ax(n,i),r=bg(n,i),Be("invalid",n);break;default:r=i}Ag(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?_1(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&S1(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Lu(n,l):typeof l=="number"&&Lu(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Pu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Be("scroll",n):l!=null&&Vv(n,s,l,a))}switch(t){case"input":_h(n),kx(n,i,!1);break;case"textarea":_h(n),Sx(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Qs(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?cl(n,!!i.multiple,s,!1):i.defaultValue!=null&&cl(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Qp)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zt(e),null;case 6:if(n&&e.stateNode!=null)Yk(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(t=Aa(Hu.current),Aa(cr.current),Dh(e)){if(i=e.stateNode,t=e.memoizedProps,i[ar]=e,(s=i.nodeValue!==t)&&(n=Hn,n!==null))switch(n.tag){case 3:Nh(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Nh(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ar]=e,e.stateNode=i}return zt(e),null;case 13:if($e(Qe),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ve&&zn!==null&&e.mode&1&&!(e.flags&128))pk(),xc(),e.flags|=98560,s=!1;else if(s=Dh(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[ar]=e}else xc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zt(e),s=!1}else Pi!==null&&(ry(Pi),Pi=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Qe.current&1?wt===0&&(wt=3):_0())),e.updateQueue!==null&&(e.flags|=4),zt(e),null);case 4:return bc(),Kg(n,e),n===null&&Ou(e.stateNode.containerInfo),zt(e),null;case 10:return c0(e.type._context),zt(e),null;case 17:return wn(e.type)&&Zp(),zt(e),null;case 19:if($e(Qe),s=e.memoizedState,s===null)return zt(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)Hc(s,!1);else{if(wt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=af(n),a!==null){for(e.flags|=128,Hc(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return je(Qe,Qe.current&1|2),e.child}n=n.sibling}s.tail!==null&&rt()>Ac&&(e.flags|=128,i=!0,Hc(s,!1),e.lanes=4194304)}else{if(!i)if(n=af(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Hc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ve)return zt(e),null}else 2*rt()-s.renderingStartTime>Ac&&t!==1073741824&&(e.flags|=128,i=!0,Hc(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=rt(),e.sibling=null,t=Qe.current,je(Qe,i?t&1|2:t&1),e):(zt(e),null);case 22:case 23:return E0(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?On&1073741824&&(zt(e),e.subtreeFlags&6&&(e.flags|=8192)):zt(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function BT(n,e){switch(s0(e),e.tag){case 1:return wn(e.type)&&Zp(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return bc(),$e(xn),$e(Xt),f0(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return p0(e),null;case 13:if($e(Qe),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error($(340));xc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return $e(Qe),null;case 4:return bc(),null;case 10:return c0(e.type._context),null;case 22:case 23:return E0(),null;case 24:return null;default:return null}}var jh=!1,qt=!1,HT=typeof WeakSet=="function"?WeakSet:Set,te=null;function al(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){nt(n,e,i)}else t.current=null}function Qg(n,e,t){try{t()}catch(i){nt(n,e,i)}}var pw=!1;function $T(n,e){if(Ng=Xp,n=ek(),i0(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,d=0,h=n,p=null;t:for(;;){for(var f;h!==t||r!==0&&h.nodeType!==3||(o=a+r),h!==s||i!==0&&h.nodeType!==3||(l=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)p=h,h=f;for(;;){if(h===n)break t;if(p===t&&++u===r&&(o=a),p===s&&++d===i&&(l=a),(f=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Dg={focusedElem:n,selectionRange:t},Xp=!1,te=e;te!==null;)if(e=te,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,te=n;else for(;te!==null;){e=te;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,E=m.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:pi(e.type,y),E);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(C){nt(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}return m=pw,pw=!1,m}function wu(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Qg(e,t,s)}r=r.next}while(r!==i)}}function Kf(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Zg(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Kk(n){var e=n.alternate;e!==null&&(n.alternate=null,Kk(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ar],delete e[zu],delete e[jg],delete e[ST],delete e[ET])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Qk(n){return n.tag===5||n.tag===3||n.tag===4}function fw(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Jg(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Qp));else if(i!==4&&(n=n.child,n!==null))for(Jg(n,e,t),n=n.sibling;n!==null;)Jg(n,e,t),n=n.sibling}function ey(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(ey(n,e,t),n=n.sibling;n!==null;)ey(n,e,t),n=n.sibling}var Nt=null,Ti=!1;function ss(n,e,t){for(t=t.child;t!==null;)Zk(n,e,t),t=t.sibling}function Zk(n,e,t){if(lr&&typeof lr.onCommitFiberUnmount=="function")try{lr.onCommitFiberUnmount($f,t)}catch{}switch(t.tag){case 5:qt||al(t,e);case 6:var i=Nt,r=Ti;Nt=null,ss(n,e,t),Nt=i,Ti=r,Nt!==null&&(Ti?(n=Nt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Nt.removeChild(t.stateNode));break;case 18:Nt!==null&&(Ti?(n=Nt,t=t.stateNode,n.nodeType===8?Fm(n.parentNode,t):n.nodeType===1&&Fm(n,t),Nu(n)):Fm(Nt,t.stateNode));break;case 4:i=Nt,r=Ti,Nt=t.stateNode.containerInfo,Ti=!0,ss(n,e,t),Nt=i,Ti=r;break;case 0:case 11:case 14:case 15:if(!qt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Qg(t,e,a),r=r.next}while(r!==i)}ss(n,e,t);break;case 1:if(!qt&&(al(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){nt(t,e,o)}ss(n,e,t);break;case 21:ss(n,e,t);break;case 22:t.mode&1?(qt=(i=qt)||t.memoizedState!==null,ss(n,e,t),qt=i):ss(n,e,t);break;default:ss(n,e,t)}}function mw(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new HT),e.forEach(function(i){var r=QT.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function ui(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Nt=o.stateNode,Ti=!1;break e;case 3:Nt=o.stateNode.containerInfo,Ti=!0;break e;case 4:Nt=o.stateNode.containerInfo,Ti=!0;break e}o=o.return}if(Nt===null)throw Error($(160));Zk(s,a,r),Nt=null,Ti=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){nt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jk(e,n),e=e.sibling}function Jk(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ui(e,n),Oi(n),i&4){try{wu(3,n,n.return),Kf(3,n)}catch(y){nt(n,n.return,y)}try{wu(5,n,n.return)}catch(y){nt(n,n.return,y)}}break;case 1:ui(e,n),Oi(n),i&512&&t!==null&&al(t,t.return);break;case 5:if(ui(e,n),Oi(n),i&512&&t!==null&&al(t,t.return),n.flags&32){var r=n.stateNode;try{Lu(r,"")}catch(y){nt(n,n.return,y)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&b1(r,s),Sg(o,a);var u=Sg(o,s);for(a=0;a<l.length;a+=2){var d=l[a],h=l[a+1];d==="style"?_1(r,h):d==="dangerouslySetInnerHTML"?S1(r,h):d==="children"?Lu(r,h):Vv(r,d,h,u)}switch(o){case"input":xg(r,s);break;case"textarea":k1(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?cl(r,!!s.multiple,f,!1):p!==!!s.multiple&&(s.defaultValue!=null?cl(r,!!s.multiple,s.defaultValue,!0):cl(r,!!s.multiple,s.multiple?[]:"",!1))}r[zu]=s}catch(y){nt(n,n.return,y)}}break;case 6:if(ui(e,n),Oi(n),i&4){if(n.stateNode===null)throw Error($(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(y){nt(n,n.return,y)}}break;case 3:if(ui(e,n),Oi(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Nu(e.containerInfo)}catch(y){nt(n,n.return,y)}break;case 4:ui(e,n),Oi(n);break;case 13:ui(e,n),Oi(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(A0=rt())),i&4&&mw(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(qt=(u=qt)||d,ui(e,n),qt=u):ui(e,n),Oi(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!d&&n.mode&1)for(te=n,d=n.child;d!==null;){for(h=te=d;te!==null;){switch(p=te,f=p.child,p.tag){case 0:case 11:case 14:case 15:wu(4,p,p.return);break;case 1:al(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){nt(i,t,y)}}break;case 5:al(p,p.return);break;case 22:if(p.memoizedState!==null){yw(h);continue}}f!==null?(f.return=p,te=f):yw(h)}d=d.sibling}e:for(d=null,h=n;;){if(h.tag===5){if(d===null){d=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=E1("display",a))}catch(y){nt(n,n.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){nt(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ui(e,n),Oi(n),i&4&&mw(n);break;case 21:break;default:ui(e,n),Oi(n)}}function Oi(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Qk(t)){var i=t;break e}t=t.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Lu(r,""),i.flags&=-33);var s=fw(n);ey(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=fw(n);Jg(n,o,a);break;default:throw Error($(161))}}catch(l){nt(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function UT(n,e,t){te=n,eA(n)}function eA(n,e,t){for(var i=(n.mode&1)!==0;te!==null;){var r=te,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||jh;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||qt;o=jh;var u=qt;if(jh=a,(qt=l)&&!u)for(te=r;te!==null;)a=te,l=a.child,a.tag===22&&a.memoizedState!==null?vw(r):l!==null?(l.return=a,te=l):vw(r);for(;s!==null;)te=s,eA(s),s=s.sibling;te=r,jh=o,qt=u}gw(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,te=s):gw(n)}}function gw(n){for(;te!==null;){var e=te;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||Kf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!qt)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:pi(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ew(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}ew(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Nu(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}qt||e.flags&512&&Zg(e)}catch(p){nt(e,e.return,p)}}if(e===n){te=null;break}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}}function yw(n){for(;te!==null;){var e=te;if(e===n){te=null;break}var t=e.sibling;if(t!==null){t.return=e.return,te=t;break}te=e.return}}function vw(n){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Kf(4,e)}catch(l){nt(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){nt(e,r,l)}}var s=e.return;try{Zg(e)}catch(l){nt(e,s,l)}break;case 5:var a=e.return;try{Zg(e)}catch(l){nt(e,a,l)}}}catch(l){nt(e,e.return,l)}if(e===n){te=null;break}var o=e.sibling;if(o!==null){o.return=e.return,te=o;break}te=e.return}}var VT=Math.ceil,cf=is.ReactCurrentDispatcher,b0=is.ReactCurrentOwner,ri=is.ReactCurrentBatchConfig,Ee=0,Tt=null,ct=null,Dt=0,On=0,ol=ra(0),wt=0,Wu=null,_o=0,Qf=0,k0=0,bu=null,gn=null,A0=0,Ac=1/0,gr=null,uf=!1,ty=null,Xs=null,zh=!1,$s=null,df=0,ku=0,ny=null,op=-1,lp=0;function nn(){return Ee&6?rt():op!==-1?op:op=rt()}function Ys(n){return n.mode&1?Ee&2&&Dt!==0?Dt&-Dt:CT.transition!==null?(lp===0&&(lp=j1()),lp):(n=Re,n!==0||(n=window.event,n=n===void 0?16:W1(n.type)),n):1}function Ri(n,e,t,i){if(50<ku)throw ku=0,ny=null,Error($(185));ph(n,t,i),(!(Ee&2)||n!==Tt)&&(n===Tt&&(!(Ee&2)&&(Qf|=t),wt===4&&hs(n,Dt)),bn(n,i),t===1&&Ee===0&&!(e.mode&1)&&(Ac=rt()+500,Gf&&sa()))}function bn(n,e){var t=n.callbackNode;CC(n,e);var i=Gp(n,n===Tt?Dt:0);if(i===0)t!==null&&Cx(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&Cx(t),e===1)n.tag===0?_T(xw.bind(null,n)):uk(xw.bind(null,n)),kT(function(){!(Ee&6)&&sa()}),t=null;else{switch(z1(i)){case 1:t=Yv;break;case 4:t=F1;break;case 16:t=qp;break;case 536870912:t=O1;break;default:t=qp}t=lA(t,tA.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function tA(n,e){if(op=-1,lp=0,Ee&6)throw Error($(327));var t=n.callbackNode;if(fl()&&n.callbackNode!==t)return null;var i=Gp(n,n===Tt?Dt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=hf(n,i);else{e=i;var r=Ee;Ee|=2;var s=iA();(Tt!==n||Dt!==e)&&(gr=null,Ac=rt()+500,bo(n,e));do try{GT();break}catch(o){nA(n,o)}while(!0);l0(),cf.current=s,Ee=r,ct!==null?e=0:(Tt=null,Dt=0,e=wt)}if(e!==0){if(e===2&&(r=Pg(n),r!==0&&(i=r,e=iy(n,r))),e===1)throw t=Wu,bo(n,0),hs(n,i),bn(n,rt()),t;if(e===6)hs(n,i);else{if(r=n.current.alternate,!(i&30)&&!WT(r)&&(e=hf(n,i),e===2&&(s=Pg(n),s!==0&&(i=s,e=iy(n,s))),e===1))throw t=Wu,bo(n,0),hs(n,i),bn(n,rt()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:ha(n,gn,gr);break;case 3:if(hs(n,i),(i&130023424)===i&&(e=A0+500-rt(),10<e)){if(Gp(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){nn(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=Og(ha.bind(null,n,gn,gr),e);break}ha(n,gn,gr);break;case 4:if(hs(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-Ii(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=rt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VT(i/1960))-i,10<i){n.timeoutHandle=Og(ha.bind(null,n,gn,gr),i);break}ha(n,gn,gr);break;case 5:ha(n,gn,gr);break;default:throw Error($(329))}}}return bn(n,rt()),n.callbackNode===t?tA.bind(null,n):null}function iy(n,e){var t=bu;return n.current.memoizedState.isDehydrated&&(bo(n,e).flags|=256),n=hf(n,e),n!==2&&(e=gn,gn=t,e!==null&&ry(e)),n}function ry(n){gn===null?gn=n:gn.push.apply(gn,n)}function WT(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Ni(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hs(n,e){for(e&=~k0,e&=~Qf,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Ii(e),i=1<<t;n[t]=-1,e&=~i}}function xw(n){if(Ee&6)throw Error($(327));fl();var e=Gp(n,0);if(!(e&1))return bn(n,rt()),null;var t=hf(n,e);if(n.tag!==0&&t===2){var i=Pg(n);i!==0&&(e=i,t=iy(n,i))}if(t===1)throw t=Wu,bo(n,0),hs(n,e),bn(n,rt()),t;if(t===6)throw Error($(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ha(n,gn,gr),bn(n,rt()),null}function S0(n,e){var t=Ee;Ee|=1;try{return n(e)}finally{Ee=t,Ee===0&&(Ac=rt()+500,Gf&&sa())}}function Co(n){$s!==null&&$s.tag===0&&!(Ee&6)&&fl();var e=Ee;Ee|=1;var t=ri.transition,i=Re;try{if(ri.transition=null,Re=1,n)return n()}finally{Re=i,ri.transition=t,Ee=e,!(Ee&6)&&sa()}}function E0(){On=ol.current,$e(ol)}function bo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,bT(t)),ct!==null)for(t=ct.return;t!==null;){var i=t;switch(s0(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Zp();break;case 3:bc(),$e(xn),$e(Xt),f0();break;case 5:p0(i);break;case 4:bc();break;case 13:$e(Qe);break;case 19:$e(Qe);break;case 10:c0(i.type._context);break;case 22:case 23:E0()}t=t.return}if(Tt=n,ct=n=Ks(n.current,null),Dt=On=e,wt=0,Wu=null,k0=Qf=_o=0,gn=bu=null,ka!==null){for(e=0;e<ka.length;e++)if(t=ka[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}ka=null}return n}function nA(n,e){do{var t=ct;try{if(l0(),rp.current=lf,of){for(var i=Ze.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}of=!1}if(Eo=0,Ct=vt=Ze=null,xu=!1,$u=0,b0.current=null,t===null||t.return===null){wt=1,Wu=e,ct=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=Dt,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=o,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=aw(a);if(f!==null){f.flags&=-257,ow(f,a,o,s,e),f.mode&1&&sw(s,u,e),e=f,l=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(l),e.updateQueue=y}else m.add(l);break e}else{if(!(e&1)){sw(s,u,e),_0();break e}l=Error($(426))}}else if(Ve&&o.mode&1){var E=aw(a);if(E!==null){!(E.flags&65536)&&(E.flags|=256),ow(E,a,o,s,e),a0(kc(l,o));break e}}s=l=kc(l,o),wt!==4&&(wt=2),bu===null?bu=[s]:bu.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=zk(s,l,e);Jx(s,g);break e;case 1:o=l;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Xs===null||!Xs.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Bk(s,o,e);Jx(s,C);break e}}s=s.return}while(s!==null)}sA(t)}catch(T){e=T,ct===t&&t!==null&&(ct=t=t.return);continue}break}while(!0)}function iA(){var n=cf.current;return cf.current=lf,n===null?lf:n}function _0(){(wt===0||wt===3||wt===2)&&(wt=4),Tt===null||!(_o&268435455)&&!(Qf&268435455)||hs(Tt,Dt)}function hf(n,e){var t=Ee;Ee|=2;var i=iA();(Tt!==n||Dt!==e)&&(gr=null,bo(n,e));do try{qT();break}catch(r){nA(n,r)}while(!0);if(l0(),Ee=t,cf.current=i,ct!==null)throw Error($(261));return Tt=null,Dt=0,wt}function qT(){for(;ct!==null;)rA(ct)}function GT(){for(;ct!==null&&!vC();)rA(ct)}function rA(n){var e=oA(n.alternate,n,On);n.memoizedProps=n.pendingProps,e===null?sA(n):ct=e,b0.current=null}function sA(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=BT(t,e),t!==null){t.flags&=32767,ct=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{wt=6,ct=null;return}}else if(t=zT(t,e,On),t!==null){ct=t;return}if(e=e.sibling,e!==null){ct=e;return}ct=e=n}while(e!==null);wt===0&&(wt=5)}function ha(n,e,t){var i=Re,r=ri.transition;try{ri.transition=null,Re=1,XT(n,e,t,i)}finally{ri.transition=r,Re=i}return null}function XT(n,e,t,i){do fl();while($s!==null);if(Ee&6)throw Error($(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error($(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(TC(n,s),n===Tt&&(ct=Tt=null,Dt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||zh||(zh=!0,lA(qp,function(){return fl(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ri.transition,ri.transition=null;var a=Re;Re=1;var o=Ee;Ee|=4,b0.current=null,$T(n,t),Jk(t,n),fT(Dg),Xp=!!Ng,Dg=Ng=null,n.current=t,UT(t),xC(),Ee=o,Re=a,ri.transition=s}else n.current=t;if(zh&&(zh=!1,$s=n,df=r),s=n.pendingLanes,s===0&&(Xs=null),kC(t.stateNode),bn(n,rt()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(uf)throw uf=!1,n=ty,ty=null,n;return df&1&&n.tag!==0&&fl(),s=n.pendingLanes,s&1?n===ny?ku++:(ku=0,ny=n):ku=0,sa(),null}function fl(){if($s!==null){var n=z1(df),e=ri.transition,t=Re;try{if(ri.transition=null,Re=16>n?16:n,$s===null)var i=!1;else{if(n=$s,$s=null,df=0,Ee&6)throw Error($(331));var r=Ee;for(Ee|=4,te=n.current;te!==null;){var s=te,a=s.child;if(te.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(te=u;te!==null;){var d=te;switch(d.tag){case 0:case 11:case 15:wu(8,d,s)}var h=d.child;if(h!==null)h.return=d,te=h;else for(;te!==null;){d=te;var p=d.sibling,f=d.return;if(Kk(d),d===u){te=null;break}if(p!==null){p.return=f,te=p;break}te=f}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}te=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,te=a;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wu(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,te=g;break e}te=s.return}}var v=n.current;for(te=v;te!==null;){a=te;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,te=b;else e:for(a=v;te!==null;){if(o=te,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Kf(9,o)}}catch(T){nt(o,o.return,T)}if(o===a){te=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,te=C;break e}te=o.return}}if(Ee=r,sa(),lr&&typeof lr.onPostCommitFiberRoot=="function")try{lr.onPostCommitFiberRoot($f,n)}catch{}i=!0}return i}finally{Re=t,ri.transition=e}}return!1}function ww(n,e,t){e=kc(t,e),e=zk(n,e,1),n=Gs(n,e,1),e=nn(),n!==null&&(ph(n,1,e),bn(n,e))}function nt(n,e,t){if(n.tag===3)ww(n,n,t);else for(;e!==null;){if(e.tag===3){ww(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Xs===null||!Xs.has(i))){n=kc(t,n),n=Bk(e,n,1),e=Gs(e,n,1),n=nn(),e!==null&&(ph(e,1,n),bn(e,n));break}}e=e.return}}function YT(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=nn(),n.pingedLanes|=n.suspendedLanes&t,Tt===n&&(Dt&t)===t&&(wt===4||wt===3&&(Dt&130023424)===Dt&&500>rt()-A0?bo(n,0):k0|=t),bn(n,e)}function aA(n,e){e===0&&(n.mode&1?(e=Ph,Ph<<=1,!(Ph&130023424)&&(Ph=4194304)):e=1);var t=nn();n=Jr(n,e),n!==null&&(ph(n,e,t),bn(n,t))}function KT(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),aA(n,t)}function QT(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),aA(n,t)}var oA;oA=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||xn.current)yn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return yn=!1,jT(n,e,t);yn=!!(n.flags&131072)}else yn=!1,Ve&&e.flags&1048576&&dk(e,tf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ap(n,e),n=e.pendingProps;var r=vc(e,Xt.current);pl(e,t),r=g0(null,e,i,n,r,t);var s=y0();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wn(i)?(s=!0,Jp(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,d0(e),r.updater=Yf,e.stateNode=r,r._reactInternals=e,Vg(e,i,n,t),e=Gg(null,e,i,!0,s,t)):(e.tag=0,Ve&&s&&r0(e),en(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(ap(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=JT(i),n=pi(i,n),r){case 0:e=qg(null,e,i,n,t);break e;case 1:e=uw(null,e,i,n,t);break e;case 11:e=lw(null,e,i,n,t);break e;case 14:e=cw(null,e,i,pi(i.type,n),t);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pi(i,r),qg(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pi(i,r),uw(n,e,i,r,t);case 3:e:{if(Vk(e),n===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,yk(n,e),sf(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=kc(Error($(423)),e),e=dw(n,e,i,t,r);break e}else if(i!==r){r=kc(Error($(424)),e),e=dw(n,e,i,t,r);break e}else for(zn=qs(e.stateNode.containerInfo.firstChild),Hn=e,Ve=!0,Pi=null,t=mk(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xc(),i===r){e=es(n,e,t);break e}en(n,e,i,t)}e=e.child}return e;case 5:return vk(e),n===null&&Hg(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,Fg(i,r)?a=null:s!==null&&Fg(i,s)&&(e.flags|=32),Uk(n,e),en(n,e,a,t),e.child;case 6:return n===null&&Hg(e),null;case 13:return Wk(n,e,t);case 4:return h0(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=wc(e,null,i,t):en(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pi(i,r),lw(n,e,i,r,t);case 7:return en(n,e,e.pendingProps,t),e.child;case 8:return en(n,e,e.pendingProps.children,t),e.child;case 12:return en(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,je(nf,i._currentValue),i._currentValue=a,s!==null)if(Ni(s.value,a)){if(s.children===r.children&&!xn.current){e=es(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Gr(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),$g(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error($(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),$g(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}en(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,pl(e,t),r=ai(r),i=i(r),e.flags|=1,en(n,e,i,t),e.child;case 14:return i=e.type,r=pi(i,e.pendingProps),r=pi(i.type,r),cw(n,e,i,r,t);case 15:return Hk(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:pi(i,r),ap(n,e),e.tag=1,wn(i)?(n=!0,Jp(e)):n=!1,pl(e,t),jk(e,i,r),Vg(e,i,r,t),Gg(null,e,i,!0,n,t);case 19:return qk(n,e,t);case 22:return $k(n,e,t)}throw Error($(156,e.tag))};function lA(n,e){return D1(n,e)}function ZT(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(n,e,t,i){return new ZT(n,e,t,i)}function C0(n){return n=n.prototype,!(!n||!n.isReactComponent)}function JT(n){if(typeof n=="function")return C0(n)?1:0;if(n!=null){if(n=n.$$typeof,n===qv)return 11;if(n===Gv)return 14}return 2}function Ks(n,e){var t=n.alternate;return t===null?(t=ii(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function cp(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")C0(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case Qo:return ko(t.children,r,s,e);case Wv:a=8,r|=8;break;case fg:return n=ii(12,t,e,r|2),n.elementType=fg,n.lanes=s,n;case mg:return n=ii(13,t,e,r),n.elementType=mg,n.lanes=s,n;case gg:return n=ii(19,t,e,r),n.elementType=gg,n.lanes=s,n;case v1:return Zf(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case g1:a=10;break e;case y1:a=9;break e;case qv:a=11;break e;case Gv:a=14;break e;case cs:a=16,i=null;break e}throw Error($(130,n==null?n:typeof n,""))}return e=ii(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ko(n,e,t,i){return n=ii(7,n,i,e),n.lanes=t,n}function Zf(n,e,t,i){return n=ii(22,n,i,e),n.elementType=v1,n.lanes=t,n.stateNode={isHidden:!1},n}function Vm(n,e,t){return n=ii(6,n,null,e),n.lanes=t,n}function Wm(n,e,t){return e=ii(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function e2(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Em(0),this.expirationTimes=Em(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Em(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function T0(n,e,t,i,r,s,a,o,l){return n=new e2(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ii(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},d0(s),n}function t2(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ko,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function cA(n){if(!n)return Zs;n=n._reactInternals;e:{if(No(n)!==n||n.tag!==1)throw Error($(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(n.tag===1){var t=n.type;if(wn(t))return ck(n,t,e)}return e}function uA(n,e,t,i,r,s,a,o,l){return n=T0(t,i,!0,n,r,s,a,o,l),n.context=cA(null),t=n.current,i=nn(),r=Ys(t),s=Gr(i,r),s.callback=e??null,Gs(t,s,r),n.current.lanes=r,ph(n,r,i),bn(n,i),n}function Jf(n,e,t,i){var r=e.current,s=nn(),a=Ys(r);return t=cA(t),e.context===null?e.context=t:e.pendingContext=t,e=Gr(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Gs(r,e,a),n!==null&&(Ri(n,r,a,s),ip(n,r,a)),a}function pf(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function bw(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function P0(n,e){bw(n,e),(n=n.alternate)&&bw(n,e)}function n2(){return null}var dA=typeof reportError=="function"?reportError:function(n){console.error(n)};function L0(n){this._internalRoot=n}em.prototype.render=L0.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error($(409));Jf(n,e,null,null)};em.prototype.unmount=L0.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Co(function(){Jf(null,n,null,null)}),e[Zr]=null}};function em(n){this._internalRoot=n}em.prototype.unstable_scheduleHydration=function(n){if(n){var e=$1();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ds.length&&e!==0&&e<ds[t].priority;t++);ds.splice(t,0,n),t===0&&V1(n)}};function I0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function tm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function kw(){}function i2(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=pf(a);s.call(u)}}var a=uA(e,i,n,0,null,!1,!1,"",kw);return n._reactRootContainer=a,n[Zr]=a.current,Ou(n.nodeType===8?n.parentNode:n),Co(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var u=pf(l);o.call(u)}}var l=T0(n,0,!1,null,null,!1,!1,"",kw);return n._reactRootContainer=l,n[Zr]=l.current,Ou(n.nodeType===8?n.parentNode:n),Co(function(){Jf(e,l,t,i)}),l}function nm(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=pf(a);o.call(l)}}Jf(e,a,n,r)}else a=i2(t,e,n,r,i);return pf(a)}B1=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Kc(e.pendingLanes);t!==0&&(Kv(e,t|1),bn(e,rt()),!(Ee&6)&&(Ac=rt()+500,sa()))}break;case 13:Co(function(){var i=Jr(n,1);if(i!==null){var r=nn();Ri(i,n,1,r)}}),P0(n,1)}};Qv=function(n){if(n.tag===13){var e=Jr(n,134217728);if(e!==null){var t=nn();Ri(e,n,134217728,t)}P0(n,134217728)}};H1=function(n){if(n.tag===13){var e=Ys(n),t=Jr(n,e);if(t!==null){var i=nn();Ri(t,n,e,i)}P0(n,e)}};$1=function(){return Re};U1=function(n,e){var t=Re;try{return Re=n,e()}finally{Re=t}};_g=function(n,e,t){switch(e){case"input":if(xg(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=qf(i);if(!r)throw Error($(90));w1(i),xg(i,r)}}}break;case"textarea":k1(n,t);break;case"select":e=t.value,e!=null&&cl(n,!!t.multiple,e,!1)}};P1=S0;L1=Co;var r2={usingClientEntryPoint:!1,Events:[mh,tl,qf,C1,T1,S0]},$c={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s2={bundleType:$c.bundleType,version:$c.version,rendererPackageName:$c.rendererPackageName,rendererConfig:$c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:is.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=M1(n),n===null?null:n.stateNode},findFiberByHostInstance:$c.findFiberByHostInstance||n2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{$f=Bh.inject(s2),lr=Bh}catch{}}Vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r2;Vn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!I0(e))throw Error($(200));return t2(n,e,null,t)};Vn.createRoot=function(n,e){if(!I0(n))throw Error($(299));var t=!1,i="",r=dA;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=T0(n,1,!1,null,null,t,!1,i,r),n[Zr]=e.current,Ou(n.nodeType===8?n.parentNode:n),new L0(e)};Vn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error($(188)):(n=Object.keys(n).join(","),Error($(268,n)));return n=M1(e),n=n===null?null:n.stateNode,n};Vn.flushSync=function(n){return Co(n)};Vn.hydrate=function(n,e,t){if(!tm(e))throw Error($(200));return nm(null,n,e,!0,t)};Vn.hydrateRoot=function(n,e,t){if(!I0(n))throw Error($(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=dA;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=uA(e,null,n,1,t??null,r,!1,s,a),n[Zr]=e.current,Ou(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new em(e)};Vn.render=function(n,e,t){if(!tm(e))throw Error($(200));return nm(null,n,e,!1,t)};Vn.unmountComponentAtNode=function(n){if(!tm(n))throw Error($(40));return n._reactRootContainer?(Co(function(){nm(null,null,n,!1,function(){n._reactRootContainer=null,n[Zr]=null})}),!0):!1};Vn.unstable_batchedUpdates=S0;Vn.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!tm(t))throw Error($(200));if(n==null||n._reactInternals===void 0)throw Error($(38));return nm(n,e,t,!1,i)};Vn.version="18.3.1-next-f1338f8080-20240426";function hA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hA)}catch(n){console.error(n)}}hA(),h1.exports=Vn;var a2=h1.exports,pA,Aw=a2;pA=Aw.createRoot,Aw.hydrateRoot;var fA={exports:{}},o2="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",l2=o2,c2=l2;function mA(){}function gA(){}gA.resetWarningCache=mA;var u2=function(){function n(i,r,s,a,o,l){if(l!==c2){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:gA,resetWarningCache:mA};return t.PropTypes=t,t};fA.exports=u2();var d2=fA.exports;const De=dh(d2);function Do(n,e,t,i){function r(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(d){try{u(i.next(d))}catch(h){a(h)}}function l(d){try{u(i.throw(d))}catch(h){a(h)}}function u(d){d.done?s(d.value):r(d.value).then(o,l)}u((i=i.apply(n,e||[])).next())})}const h2=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function Sc(n,e,t){const i=p2(n),{webkitRelativePath:r}=n,s=typeof e=="string"?e:typeof r=="string"&&r.length>0?r:`./${n.name}`;return typeof i.path!="string"&&Sw(i,"path",s),Sw(i,"relativePath",s),i}function p2(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const i=e.split(".").pop().toLowerCase(),r=h2.get(i);r&&Object.defineProperty(n,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return n}function Sw(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const f2=[".DS_Store","Thumbs.db"];function m2(n){return Do(this,void 0,void 0,function*(){return ff(n)&&g2(n.dataTransfer)?w2(n.dataTransfer,n.type):y2(n)?v2(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?x2(n):[]})}function g2(n){return ff(n)}function y2(n){return ff(n)&&ff(n.target)}function ff(n){return typeof n=="object"&&n!==null}function v2(n){return sy(n.target.files).map(e=>Sc(e))}function x2(n){return Do(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>Sc(t))})}function w2(n,e){return Do(this,void 0,void 0,function*(){if(n.items){const t=sy(n.items).filter(r=>r.kind==="file");if(e!=="drop")return t;const i=yield Promise.all(t.map(b2));return Ew(yA(i))}return Ew(sy(n.files).map(t=>Sc(t)))})}function Ew(n){return n.filter(e=>f2.indexOf(e.name)===-1)}function sy(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const i=n[t];e.push(i)}return e}function b2(n){if(typeof n.webkitGetAsEntry!="function")return _w(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?vA(e):_w(n,e)}function yA(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?yA(t):[t]],[])}function _w(n,e){return Do(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const s=yield n.getAsFileSystemHandle();if(s===null)throw new Error(`${n} is not a File`);if(s!==void 0){const a=yield s.getFile();return a.handle=s,Sc(a)}}const i=n.getAsFile();if(!i)throw new Error(`${n} is not a File`);return Sc(i,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function k2(n){return Do(this,void 0,void 0,function*(){return n.isDirectory?vA(n):A2(n)})}function vA(n){const e=n.createReader();return new Promise((t,i)=>{const r=[];function s(){e.readEntries(a=>Do(this,void 0,void 0,function*(){if(a.length){const o=Promise.all(a.map(k2));r.push(o),s()}else try{const o=yield Promise.all(r);t(o)}catch(o){i(o)}}),a=>{i(a)})}s()})}function A2(n){return Do(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(i=>{const r=Sc(i,n.fullPath);e(r)},i=>{t(i)})})})}var qm=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",r=(n.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return t.some(function(a){var o=a.trim().toLowerCase();return o.charAt(0)==="."?i.toLowerCase().endsWith(o):o.endsWith("/*")?s===o.replace(/\/.*$/,""):r===o})}return!0};function Cw(n){return _2(n)||E2(n)||wA(n)||S2()}function S2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function _2(n){if(Array.isArray(n))return ay(n)}function Tw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Pw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Tw(Object(t),!0).forEach(function(i){xA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Tw(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function xA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qu(n,e){return P2(n)||T2(n,e)||wA(n,e)||C2()}function C2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wA(n,e){if(n){if(typeof n=="string")return ay(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ay(n,e)}}function ay(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function T2(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function P2(n){if(Array.isArray(n))return n}var L2=typeof qm=="function"?qm:qm.default,I2="file-invalid-type",R2="file-too-large",M2="file-too-small",N2="too-many-files",D2=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),i=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:I2,message:"File type must be ".concat(i)}},Lw=function(e){return{code:R2,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},Iw=function(e){return{code:M2,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},F2={code:N2,message:"Too many files"};function bA(n,e){var t=n.type==="application/x-moz-file"||L2(n,e);return[t,t?null:D2(e)]}function kA(n,e,t){if(ya(n.size))if(ya(e)&&ya(t)){if(n.size>t)return[!1,Lw(t)];if(n.size<e)return[!1,Iw(e)]}else{if(ya(e)&&n.size<e)return[!1,Iw(e)];if(ya(t)&&n.size>t)return[!1,Lw(t)]}return[!0,null]}function ya(n){return n!=null}function O2(n){var e=n.files,t=n.accept,i=n.minSize,r=n.maxSize,s=n.multiple,a=n.maxFiles,o=n.validator;return!s&&e.length>1||s&&a>=1&&e.length>a?!1:e.every(function(l){var u=bA(l,t),d=qu(u,1),h=d[0],p=kA(l,i,r),f=qu(p,1),m=f[0],y=o?o(l):null;return h&&m&&!y})}function mf(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function Hh(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function Rw(n){n.preventDefault()}function j2(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function z2(n){return n.indexOf("Edge/")!==-1}function B2(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return j2(n)||z2(n)}function ji(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return e.some(function(o){return!mf(i)&&o&&o.apply(void 0,[i].concat(s)),mf(i)})}}function H2(){return"showOpenFilePicker"in window}function $2(n){if(ya(n)){var e=Object.entries(n).filter(function(t){var i=qu(t,2),r=i[0],s=i[1],a=!0;return AA(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(s)||!s.every(SA))&&(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(t,i){var r=qu(i,2),s=r[0],a=r[1];return Pw(Pw({},t),{},xA({},s,a))},{});return[{description:"Files",accept:e}]}return n}function U2(n){if(ya(n))return Object.entries(n).reduce(function(e,t){var i=qu(t,2),r=i[0],s=i[1];return[].concat(Cw(e),[r],Cw(s))},[]).filter(function(e){return AA(e)||SA(e)}).join(",")}function V2(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function W2(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function AA(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function SA(n){return/^.*\.[\w]+$/.test(n)}var q2=["children"],G2=["open"],X2=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Y2=["refKey","onChange","onClick"];function K2(n){return J2(n)||Z2(n)||EA(n)||Q2()}function Q2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z2(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function J2(n){if(Array.isArray(n))return oy(n)}function Gm(n,e){return nP(n)||tP(n,e)||EA(n,e)||eP()}function eP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EA(n,e){if(n){if(typeof n=="string")return oy(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return oy(n,e)}}function oy(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function tP(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],r=!0,s=!1,a,o;try{for(t=t.call(n);!(r=(a=t.next()).done)&&(i.push(a.value),!(e&&i.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&t.return!=null&&t.return()}finally{if(s)throw o}}return i}}function nP(n){if(Array.isArray(n))return n}function Mw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function Ke(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Mw(Object(t),!0).forEach(function(i){ly(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Mw(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ly(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function gf(n,e){if(n==null)return{};var t=iP(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function iP(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var R0=re.forwardRef(function(n,e){var t=n.children,i=gf(n,q2),r=CA(i),s=r.open,a=gf(r,G2);return re.useImperativeHandle(e,function(){return{open:s}},[s]),u1.createElement(re.Fragment,null,t(Ke(Ke({},a),{},{open:s})))});R0.displayName="Dropzone";var _A={disabled:!1,getFilesFromEvent:m2,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};R0.defaultProps=_A;R0.propTypes={children:De.func,accept:De.objectOf(De.arrayOf(De.string)),multiple:De.bool,preventDropOnDocument:De.bool,noClick:De.bool,noKeyboard:De.bool,noDrag:De.bool,noDragEventsBubbling:De.bool,minSize:De.number,maxSize:De.number,maxFiles:De.number,disabled:De.bool,getFilesFromEvent:De.func,onFileDialogCancel:De.func,onFileDialogOpen:De.func,useFsAccessApi:De.bool,autoFocus:De.bool,onDragEnter:De.func,onDragLeave:De.func,onDragOver:De.func,onDrop:De.func,onDropAccepted:De.func,onDropRejected:De.func,onError:De.func,validator:De.func};var cy={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function CA(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ke(Ke({},_A),n),t=e.accept,i=e.disabled,r=e.getFilesFromEvent,s=e.maxSize,a=e.minSize,o=e.multiple,l=e.maxFiles,u=e.onDragEnter,d=e.onDragLeave,h=e.onDragOver,p=e.onDrop,f=e.onDropAccepted,m=e.onDropRejected,y=e.onFileDialogCancel,E=e.onFileDialogOpen,g=e.useFsAccessApi,v=e.autoFocus,b=e.preventDropOnDocument,C=e.noClick,T=e.noKeyboard,_=e.noDrag,L=e.noDragEventsBubbling,R=e.onError,O=e.validator,j=re.useMemo(function(){return U2(t)},[t]),F=re.useMemo(function(){return $2(t)},[t]),H=re.useMemo(function(){return typeof E=="function"?E:Nw},[E]),K=re.useMemo(function(){return typeof y=="function"?y:Nw},[y]),Q=re.useRef(null),W=re.useRef(null),ae=re.useReducer(rP,cy),X=Gm(ae,2),N=X[0],I=X[1],k=N.isFocused,D=N.isFileDialogActive,U=re.useRef(typeof window<"u"&&window.isSecureContext&&g&&H2()),S=function(){!U.current&&D&&setTimeout(function(){if(W.current){var le=W.current.files;le.length||(I({type:"closeDialog"}),K())}},300)};re.useEffect(function(){return window.addEventListener("focus",S,!1),function(){window.removeEventListener("focus",S,!1)}},[W,D,K,U]);var z=re.useRef([]),oe=function(le){Q.current&&Q.current.contains(le.target)||(le.preventDefault(),z.current=[])};re.useEffect(function(){return b&&(document.addEventListener("dragover",Rw,!1),document.addEventListener("drop",oe,!1)),function(){b&&(document.removeEventListener("dragover",Rw),document.removeEventListener("drop",oe))}},[Q,b]),re.useEffect(function(){return!i&&v&&Q.current&&Q.current.focus(),function(){}},[Q,v,i]);var G=re.useCallback(function(Z){R?R(Z):console.error(Z)},[R]),ee=re.useCallback(function(Z){Z.preventDefault(),Z.persist(),ca(Z),z.current=[].concat(K2(z.current),[Z.target]),Hh(Z)&&Promise.resolve(r(Z)).then(function(le){if(!(mf(Z)&&!L)){var M=le.length,B=M>0&&O2({files:le,accept:j,minSize:a,maxSize:s,multiple:o,maxFiles:l,validator:O}),ie=M>0&&!B;I({isDragAccept:B,isDragReject:ie,isDragActive:!0,type:"setDraggedFiles"}),u&&u(Z)}}).catch(function(le){return G(le)})},[r,u,G,L,j,a,s,o,l,O]),pe=re.useCallback(function(Z){Z.preventDefault(),Z.persist(),ca(Z);var le=Hh(Z);if(le&&Z.dataTransfer)try{Z.dataTransfer.dropEffect="copy"}catch{}return le&&h&&h(Z),!1},[h,L]),et=re.useCallback(function(Z){Z.preventDefault(),Z.persist(),ca(Z);var le=z.current.filter(function(B){return Q.current&&Q.current.contains(B)}),M=le.indexOf(Z.target);M!==-1&&le.splice(M,1),z.current=le,!(le.length>0)&&(I({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Hh(Z)&&d&&d(Z))},[Q,d,L]),We=re.useCallback(function(Z,le){var M=[],B=[];Z.forEach(function(ie){var ge=bA(ie,j),Se=Gm(ge,2),Kt=Se[0],ci=Se[1],Sn=kA(ie,a,s),Di=Gm(Sn,2),hr=Di[0],Pt=Di[1],Fi=O?O(ie):null;if(Kt&&hr&&!Fi)M.push(ie);else{var En=[ci,Pt];Fi&&(En=En.concat(Fi)),B.push({file:ie,errors:En.filter(function(R_){return R_})})}}),(!o&&M.length>1||o&&l>=1&&M.length>l)&&(M.forEach(function(ie){B.push({file:ie,errors:[F2]})}),M.splice(0)),I({acceptedFiles:M,fileRejections:B,isDragReject:B.length>0,type:"setFiles"}),p&&p(M,B,le),B.length>0&&m&&m(B,le),M.length>0&&f&&f(M,le)},[I,o,j,a,s,l,p,f,m,O]),ht=re.useCallback(function(Z){Z.preventDefault(),Z.persist(),ca(Z),z.current=[],Hh(Z)&&Promise.resolve(r(Z)).then(function(le){mf(Z)&&!L||We(le,Z)}).catch(function(le){return G(le)}),I({type:"reset"})},[r,We,G,L]),rs=re.useCallback(function(){if(U.current){I({type:"openDialog"}),H();var Z={multiple:o,types:F};window.showOpenFilePicker(Z).then(function(le){return r(le)}).then(function(le){We(le,null),I({type:"closeDialog"})}).catch(function(le){V2(le)?(K(le),I({type:"closeDialog"})):W2(le)?(U.current=!1,W.current?(W.current.value=null,W.current.click()):G(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):G(le)});return}W.current&&(I({type:"openDialog"}),H(),W.current.value=null,W.current.click())},[I,H,K,g,We,G,F,o]),kh=re.useCallback(function(Z){!Q.current||!Q.current.isEqualNode(Z.target)||(Z.key===" "||Z.key==="Enter"||Z.keyCode===32||Z.keyCode===13)&&(Z.preventDefault(),rs())},[Q,rs]),Ah=re.useCallback(function(){I({type:"focus"})},[]),Rc=re.useCallback(function(){I({type:"blur"})},[]),Mc=re.useCallback(function(){C||(B2()?setTimeout(rs,0):rs())},[C,rs]),dr=function(le){return i?null:le},Nc=function(le){return T?null:dr(le)},la=function(le){return _?null:dr(le)},ca=function(le){L&&le.stopPropagation()},gm=re.useMemo(function(){return function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},le=Z.refKey,M=le===void 0?"ref":le,B=Z.role,ie=Z.onKeyDown,ge=Z.onFocus,Se=Z.onBlur,Kt=Z.onClick,ci=Z.onDragEnter,Sn=Z.onDragOver,Di=Z.onDragLeave,hr=Z.onDrop,Pt=gf(Z,X2);return Ke(Ke(ly({onKeyDown:Nc(ji(ie,kh)),onFocus:Nc(ji(ge,Ah)),onBlur:Nc(ji(Se,Rc)),onClick:dr(ji(Kt,Mc)),onDragEnter:la(ji(ci,ee)),onDragOver:la(ji(Sn,pe)),onDragLeave:la(ji(Di,et)),onDrop:la(ji(hr,ht)),role:typeof B=="string"&&B!==""?B:"presentation"},M,Q),!i&&!T?{tabIndex:0}:{}),Pt)}},[Q,kh,Ah,Rc,Mc,ee,pe,et,ht,T,_,i]),ym=re.useCallback(function(Z){Z.stopPropagation()},[]),vm=re.useMemo(function(){return function(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},le=Z.refKey,M=le===void 0?"ref":le,B=Z.onChange,ie=Z.onClick,ge=gf(Z,Y2),Se=ly({accept:j,multiple:o,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:dr(ji(B,ht)),onClick:dr(ji(ie,ym)),tabIndex:-1},M,W);return Ke(Ke({},Se),ge)}},[W,t,o,ht,i]);return Ke(Ke({},N),{},{isFocused:k&&!i,getRootProps:gm,getInputProps:vm,rootRef:Q,inputRef:W,open:dr(rs)})}function rP(n,e){switch(e.type){case"focus":return Ke(Ke({},n),{},{isFocused:!0});case"blur":return Ke(Ke({},n),{},{isFocused:!1});case"openDialog":return Ke(Ke({},cy),{},{isFileDialogActive:!0});case"closeDialog":return Ke(Ke({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ke(Ke({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Ke(Ke({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Ke({},cy);default:return n}}function Nw(){}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),dt=(n,e)=>{const t=re.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,...u},d)=>re.createElement("svg",{ref:d,...sP,width:r,height:r,stroke:i,strokeWidth:a?Number(s)*24/Number(r):s,className:["lucide",`lucide-${aP(n)}`,o].join(" "),...u},[...e.map(([h,p])=>re.createElement(h,p)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TA=dt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=dt("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=dt("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IA=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lP=dt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=dt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=dt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=dt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=dt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=dt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=dt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=dt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=dt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=dt("Wand2",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z",key:"1bcowg"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]),yP={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Dw=n=>{let e;const t=new Set,i=(d,h)=>{const p=typeof d=="function"?d(e):d;if(!Object.is(p,e)){const f=e;e=h??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(m=>m(e,f))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{(yP?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(i,r,l);return l},vP=n=>n?Dw(n):Dw;var FA={exports:{}},OA={},jA={exports:{}},zA={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ec=re;function xP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var wP=typeof Object.is=="function"?Object.is:xP,bP=Ec.useState,kP=Ec.useEffect,AP=Ec.useLayoutEffect,SP=Ec.useDebugValue;function EP(n,e){var t=e(),i=bP({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return AP(function(){r.value=t,r.getSnapshot=e,Xm(r)&&s({inst:r})},[n,t,e]),kP(function(){return Xm(r)&&s({inst:r}),n(function(){Xm(r)&&s({inst:r})})},[n]),SP(t),t}function Xm(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!wP(n,t)}catch{return!0}}function _P(n,e){return e()}var CP=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?_P:EP;zA.useSyncExternalStore=Ec.useSyncExternalStore!==void 0?Ec.useSyncExternalStore:CP;jA.exports=zA;var TP=jA.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var im=re,PP=TP;function LP(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var IP=typeof Object.is=="function"?Object.is:LP,RP=PP.useSyncExternalStore,MP=im.useRef,NP=im.useEffect,DP=im.useMemo,FP=im.useDebugValue;OA.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=MP(null);if(s.current===null){var a={hasValue:!1,value:null};s.current=a}else a=s.current;s=DP(function(){function l(f){if(!u){if(u=!0,d=f,f=i(f),r!==void 0&&a.hasValue){var m=a.value;if(r(m,f))return h=m}return h=f}if(m=h,IP(d,f))return m;var y=i(f);return r!==void 0&&r(m,y)?(d=f,m):(d=f,h=y)}var u=!1,d,h,p=t===void 0?null:t;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,t,i,r]);var o=RP(n,s[0],s[1]);return NP(function(){a.hasValue=!0,a.value=o},[o]),FP(o),o};FA.exports=OA;var OP=FA.exports;const jP=dh(OP),BA={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:zP}=u1,{useSyncExternalStoreWithSelector:BP}=jP;let Fw=!1;const HP=n=>n;function $P(n,e=HP,t){(BA?"production":void 0)!=="production"&&t&&!Fw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Fw=!0);const i=BP(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return zP(i),i}const Ow=n=>{(BA?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?vP(n):n,t=(i,r)=>$P(e,i,r);return Object.assign(t,e),t},UP=n=>n?Ow(n):Ow,VP={summaryLength:"medium",quizType:"multiple-choice",difficulty:"medium",numQuestions:5,numFlashcards:10},Mi=UP(n=>({messages:[],isProcessing:!1,selectedTool:"summarize",toolSettings:VP,inputText:"",setInputText:e=>n({inputText:e}),setIsProcessing:e=>n({isProcessing:e}),setSelectedTool:e=>n({selectedTool:e}),updateToolSettings:e=>n(t=>({toolSettings:{...t.toolSettings,...e}})),addMessage:e=>n(t=>({messages:[...t.messages,{...e,id:crypto.randomUUID()}]})),removeMessage:e=>n(t=>({messages:t.messages.filter(i=>i.id!==e)}))}));var WP={exports:{}};(function(n){var e=function(t){var i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(I,k,D){I[k]=D.value},a,o=typeof Symbol=="function"?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",d=o.toStringTag||"@@toStringTag";function h(I,k,D){return Object.defineProperty(I,k,{value:D,enumerable:!0,configurable:!0,writable:!0}),I[k]}try{h({},"")}catch{h=function(k,D,U){return k[D]=U}}function p(I,k,D,U){var S=k&&k.prototype instanceof b?k:b,z=Object.create(S.prototype),oe=new ae(U||[]);return s(z,"_invoke",{value:H(I,D,oe)}),z}t.wrap=p;function f(I,k,D){try{return{type:"normal",arg:I.call(k,D)}}catch(U){return{type:"throw",arg:U}}}var m="suspendedStart",y="suspendedYield",E="executing",g="completed",v={};function b(){}function C(){}function T(){}var _={};h(_,l,function(){return this});var L=Object.getPrototypeOf,R=L&&L(L(X([])));R&&R!==i&&r.call(R,l)&&(_=R);var O=T.prototype=b.prototype=Object.create(_);C.prototype=T,s(O,"constructor",{value:T,configurable:!0}),s(T,"constructor",{value:C,configurable:!0}),C.displayName=h(T,d,"GeneratorFunction");function j(I){["next","throw","return"].forEach(function(k){h(I,k,function(D){return this._invoke(k,D)})})}t.isGeneratorFunction=function(I){var k=typeof I=="function"&&I.constructor;return k?k===C||(k.displayName||k.name)==="GeneratorFunction":!1},t.mark=function(I){return Object.setPrototypeOf?Object.setPrototypeOf(I,T):(I.__proto__=T,h(I,d,"GeneratorFunction")),I.prototype=Object.create(O),I},t.awrap=function(I){return{__await:I}};function F(I,k){function D(z,oe,G,ee){var pe=f(I[z],I,oe);if(pe.type==="throw")ee(pe.arg);else{var et=pe.arg,We=et.value;return We&&typeof We=="object"&&r.call(We,"__await")?k.resolve(We.__await).then(function(ht){D("next",ht,G,ee)},function(ht){D("throw",ht,G,ee)}):k.resolve(We).then(function(ht){et.value=ht,G(et)},function(ht){return D("throw",ht,G,ee)})}}var U;function S(z,oe){function G(){return new k(function(ee,pe){D(z,oe,ee,pe)})}return U=U?U.then(G,G):G()}s(this,"_invoke",{value:S})}j(F.prototype),h(F.prototype,u,function(){return this}),t.AsyncIterator=F,t.async=function(I,k,D,U,S){S===void 0&&(S=Promise);var z=new F(p(I,k,D,U),S);return t.isGeneratorFunction(k)?z:z.next().then(function(oe){return oe.done?oe.value:z.next()})};function H(I,k,D){var U=m;return function(z,oe){if(U===E)throw new Error("Generator is already running");if(U===g){if(z==="throw")throw oe;return N()}for(D.method=z,D.arg=oe;;){var G=D.delegate;if(G){var ee=K(G,D);if(ee){if(ee===v)continue;return ee}}if(D.method==="next")D.sent=D._sent=D.arg;else if(D.method==="throw"){if(U===m)throw U=g,D.arg;D.dispatchException(D.arg)}else D.method==="return"&&D.abrupt("return",D.arg);U=E;var pe=f(I,k,D);if(pe.type==="normal"){if(U=D.done?g:y,pe.arg===v)continue;return{value:pe.arg,done:D.done}}else pe.type==="throw"&&(U=g,D.method="throw",D.arg=pe.arg)}}}function K(I,k){var D=k.method,U=I.iterator[D];if(U===a)return k.delegate=null,D==="throw"&&I.iterator.return&&(k.method="return",k.arg=a,K(I,k),k.method==="throw")||D!=="return"&&(k.method="throw",k.arg=new TypeError("The iterator does not provide a '"+D+"' method")),v;var S=f(U,I.iterator,k.arg);if(S.type==="throw")return k.method="throw",k.arg=S.arg,k.delegate=null,v;var z=S.arg;if(!z)return k.method="throw",k.arg=new TypeError("iterator result is not an object"),k.delegate=null,v;if(z.done)k[I.resultName]=z.value,k.next=I.nextLoc,k.method!=="return"&&(k.method="next",k.arg=a);else return z;return k.delegate=null,v}j(O),h(O,d,"Generator"),h(O,l,function(){return this}),h(O,"toString",function(){return"[object Generator]"});function Q(I){var k={tryLoc:I[0]};1 in I&&(k.catchLoc=I[1]),2 in I&&(k.finallyLoc=I[2],k.afterLoc=I[3]),this.tryEntries.push(k)}function W(I){var k=I.completion||{};k.type="normal",delete k.arg,I.completion=k}function ae(I){this.tryEntries=[{tryLoc:"root"}],I.forEach(Q,this),this.reset(!0)}t.keys=function(I){var k=Object(I),D=[];for(var U in k)D.push(U);return D.reverse(),function S(){for(;D.length;){var z=D.pop();if(z in k)return S.value=z,S.done=!1,S}return S.done=!0,S}};function X(I){if(I){var k=I[l];if(k)return k.call(I);if(typeof I.next=="function")return I;if(!isNaN(I.length)){var D=-1,U=function S(){for(;++D<I.length;)if(r.call(I,D))return S.value=I[D],S.done=!1,S;return S.value=a,S.done=!0,S};return U.next=U}}return{next:N}}t.values=X;function N(){return{value:a,done:!0}}return ae.prototype={constructor:ae,reset:function(I){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(W),!I)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=a)},stop:function(){this.done=!0;var I=this.tryEntries[0],k=I.completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(I){if(this.done)throw I;var k=this;function D(ee,pe){return z.type="throw",z.arg=I,k.next=ee,pe&&(k.method="next",k.arg=a),!!pe}for(var U=this.tryEntries.length-1;U>=0;--U){var S=this.tryEntries[U],z=S.completion;if(S.tryLoc==="root")return D("end");if(S.tryLoc<=this.prev){var oe=r.call(S,"catchLoc"),G=r.call(S,"finallyLoc");if(oe&&G){if(this.prev<S.catchLoc)return D(S.catchLoc,!0);if(this.prev<S.finallyLoc)return D(S.finallyLoc)}else if(oe){if(this.prev<S.catchLoc)return D(S.catchLoc,!0)}else if(G){if(this.prev<S.finallyLoc)return D(S.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(I,k){for(var D=this.tryEntries.length-1;D>=0;--D){var U=this.tryEntries[D];if(U.tryLoc<=this.prev&&r.call(U,"finallyLoc")&&this.prev<U.finallyLoc){var S=U;break}}S&&(I==="break"||I==="continue")&&S.tryLoc<=k&&k<=S.finallyLoc&&(S=null);var z=S?S.completion:{};return z.type=I,z.arg=k,S?(this.method="next",this.next=S.finallyLoc,v):this.complete(z)},complete:function(I,k){if(I.type==="throw")throw I.arg;return I.type==="break"||I.type==="continue"?this.next=I.arg:I.type==="return"?(this.rval=this.arg=I.arg,this.method="return",this.next="end"):I.type==="normal"&&k&&(this.next=k),v},finish:function(I){for(var k=this.tryEntries.length-1;k>=0;--k){var D=this.tryEntries[k];if(D.finallyLoc===I)return this.complete(D.completion,D.afterLoc),W(D),v}},catch:function(I){for(var k=this.tryEntries.length-1;k>=0;--k){var D=this.tryEntries[k];if(D.tryLoc===I){var U=D.completion;if(U.type==="throw"){var S=U.arg;W(D)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(I,k,D){return this.delegate={iterator:X(I),resultName:k,nextLoc:D},this.method==="next"&&(this.arg=a),v}},t}(n.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(WP);var D0=(n,e)=>`${n}-${e}-${Math.random().toString(16).slice(3,8)}`;const qP=D0;let jw=0;var HA=({id:n,action:e,payload:t={}})=>{let i=n;return typeof i>"u"&&(i=qP("Job",jw),jw+=1),{id:i,action:e,payload:t}},Pc={};let F0=!1;Pc.logging=F0;Pc.setLogging=n=>{F0=n};Pc.log=(...n)=>F0?console.log.apply(void 0,n):null;const GP=HA,{log:$h}=Pc,XP=D0;let zw=0;var YP=()=>{const n=XP("Scheduler",zw),e={},t={};let i=[];zw+=1;const r=()=>i.length,s=()=>Object.keys(e).length,a=()=>{if(i.length!==0){const h=Object.keys(e);for(let p=0;p<h.length;p+=1)if(typeof t[h[p]]>"u"){i[0](e[h[p]]);break}}},o=(h,p)=>new Promise((f,m)=>{const y=GP({action:h,payload:p});i.push(async E=>{i.shift(),t[E.id]=y;try{f(await E[h].apply(void 0,[...p,y.id]))}catch(g){m(g)}finally{delete t[E.id],a()}}),$h(`[${n}]: Add ${y.id} to JobQueue`),$h(`[${n}]: JobQueue length=${i.length}`),a()});return{addWorker:h=>(e[h.id]=h,$h(`[${n}]: Add ${h.id}`),$h(`[${n}]: Number of workers=${s()}`),a(),h.id),addJob:async(h,...p)=>{if(s()===0)throw Error(`[${n}]: You need to have at least one worker before adding jobs`);return o(h,p)},terminate:async()=>{Object.keys(e).forEach(async h=>{await e[h].terminate()}),i=[]},getQueueLen:r,getNumWorkers:s}};function KP(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}function QP(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var ZP=QP;const JP=ZP;var eL=n=>{const e={};return typeof WorkerGlobalScope<"u"?e.type="webworker":JP()?e.type="electron":typeof document=="object"?e.type="browser":typeof process=="object"&&typeof KP=="function"&&(e.type="node"),typeof n>"u"?e:e[n]};const tL=eL("type")==="browser",nL=tL?n=>new URL(n,window.location.href).href:n=>n;var iL=n=>{const e={...n};return["corePath","workerPath","langPath"].forEach(t=>{n[t]&&(e[t]=nL(e[t]))}),e},rL=n=>{const e=[],t=[],i=[],r=[],s=[];return n.blocks&&n.blocks.forEach(a=>{a.paragraphs.forEach(o=>{o.lines.forEach(l=>{l.words.forEach(u=>{u.symbols.forEach(d=>{s.push({...d,page:n,block:a,paragraph:o,line:l,word:u})}),r.push({...u,page:n,block:a,paragraph:o,line:l})}),i.push({...l,page:n,block:a,paragraph:o})}),t.push({...o,page:n,block:a})}),e.push({...a,page:n})}),{...n,blocks:e,paragraphs:t,lines:i,words:r,symbols:s}},$A={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3};const sL="tesseract.js",aL="5.1.1",oL="Pure Javascript Multilingual OCR",lL="src/index.js",cL="src/index.d.ts",uL="dist/tesseract.min.js",dL="dist/tesseract.min.js",hL={start:"node scripts/server.js",build:"rimraf dist && webpack --config scripts/webpack.config.prod.js && rollup -c scripts/rollup.esm.mjs","profile:tesseract":"webpack-bundle-analyzer dist/tesseract-stats.json","profile:worker":"webpack-bundle-analyzer dist/worker-stats.json",prepublishOnly:"npm run build",wait:"rimraf dist && wait-on http://localhost:3000/dist/tesseract.min.js",test:"npm-run-all -p -r start test:all","test:all":"npm-run-all wait test:browser:* test:node:all","test:node":"nyc mocha --exit --bail --require ./scripts/test-helper.js","test:node:all":"npm run test:node -- ./tests/*.test.js","test:browser-tpl":"mocha-headless-chrome -a incognito -a no-sandbox -a disable-setuid-sandbox -a disable-logging -t 300000","test:browser:detect":"npm run test:browser-tpl -- -f ./tests/detect.test.html","test:browser:recognize":"npm run test:browser-tpl -- -f ./tests/recognize.test.html","test:browser:scheduler":"npm run test:browser-tpl -- -f ./tests/scheduler.test.html","test:browser:FS":"npm run test:browser-tpl -- -f ./tests/FS.test.html",lint:"eslint src","lint:fix":"eslint --fix src",postinstall:"opencollective-postinstall || true"},pL={"./src/worker/node/index.js":"./src/worker/browser/index.js"},fL="",mL=["jeromewu"],gL="Apache-2.0",yL={"@babel/core":"^7.21.4","@babel/eslint-parser":"^7.21.3","@babel/preset-env":"^7.21.4","@rollup/plugin-commonjs":"^24.1.0",acorn:"^8.8.2","babel-loader":"^9.1.2",buffer:"^6.0.3",cors:"^2.8.5",eslint:"^7.32.0","eslint-config-airbnb-base":"^14.2.1","eslint-plugin-import":"^2.27.5","expect.js":"^0.3.1",express:"^4.18.2",mocha:"^10.2.0","mocha-headless-chrome":"^4.0.0","npm-run-all":"^4.1.5",nyc:"^15.1.0",rimraf:"^5.0.0",rollup:"^3.20.7","wait-on":"^7.0.1",webpack:"^5.79.0","webpack-bundle-analyzer":"^4.8.0","webpack-cli":"^5.0.1","webpack-dev-middleware":"^6.0.2","rollup-plugin-sourcemaps":"^0.6.3"},vL={"bmp-js":"^0.1.0","idb-keyval":"^6.2.0","is-electron":"^2.2.2","is-url":"^1.2.4","node-fetch":"^2.6.9","opencollective-postinstall":"^2.0.3","regenerator-runtime":"^0.13.3","tesseract.js-core":"^5.1.1","wasm-feature-detect":"^1.2.11",zlibjs:"^0.3.1"},xL={"@rollup/pluginutils":"^5.0.2"},wL={type:"git",url:"https://github.com/naptha/tesseract.js.git"},bL={url:"https://github.com/naptha/tesseract.js/issues"},kL="https://github.com/naptha/tesseract.js",AL={type:"opencollective",url:"https://opencollective.com/tesseractjs"},SL={name:sL,version:aL,description:oL,main:lL,types:cL,unpkg:uL,jsdelivr:dL,scripts:hL,browser:pL,author:fL,contributors:mL,license:gL,devDependencies:yL,dependencies:vL,overrides:xL,repository:wL,bugs:bL,homepage:kL,collective:AL};var EL={workerBlobURL:!0,logger:()=>{}};const _L=SL.version,CL=EL;var TL={...CL,workerPath:`https://cdn.jsdelivr.net/npm/tesseract.js@v${_L}/dist/worker.min.js`},PL=({workerPath:n,workerBlobURL:e})=>{let t;if(Blob&&URL&&e){const i=new Blob([`importScripts("${n}");`],{type:"application/javascript"});t=new Worker(URL.createObjectURL(i))}else t=new Worker(n);return t},LL=n=>{n.terminate()},IL=(n,e)=>{n.onmessage=({data:t})=>{e(t)}},RL=async(n,e)=>{n.postMessage(e)};const Ym=n=>new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.onerror=({target:{error:{code:r}}})=>{t(Error(`File could not be read! Code=${r}`))},i.readAsArrayBuffer(n)}),uy=async n=>{let e=n;if(typeof n>"u")return"undefined";if(typeof n=="string")/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(n)?e=atob(n.split(",")[1]).split("").map(t=>t.charCodeAt(0)):e=await(await fetch(n)).arrayBuffer();else if(typeof HTMLElement<"u"&&n instanceof HTMLElement)n.tagName==="IMG"&&(e=await uy(n.src)),n.tagName==="VIDEO"&&(e=await uy(n.poster)),n.tagName==="CANVAS"&&await new Promise(t=>{n.toBlob(async i=>{e=await Ym(i),t()})});else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas){const t=await n.convertToBlob();e=await Ym(t)}else(n instanceof File||n instanceof Blob)&&(e=await Ym(n));return new Uint8Array(e)};var ML=uy;const NL=TL,DL=PL,FL=LL,OL=IL,jL=RL,zL=ML;var BL={defaultOptions:NL,spawnWorker:DL,terminateWorker:FL,onMessage:OL,send:jL,loadImage:zL};const HL=iL,$L=rL,di=HA,{log:Bw}=Pc,UL=D0,ua=$A,{defaultOptions:VL,spawnWorker:WL,terminateWorker:qL,onMessage:GL,loadImage:Hw,send:XL}=BL;let $w=0;var UA=async(n="eng",e=ua.LSTM_ONLY,t={},i={})=>{const r=UL("Worker",$w),{logger:s,errorHandler:a,...o}=HL({...VL,...t}),l={},u={},d=typeof n=="string"?n.split("+"):n;let h=e,p=i;const f=[ua.DEFAULT,ua.LSTM_ONLY].includes(e)&&!o.legacyCore;let m,y;const E=new Promise((S,z)=>{y=S,m=z}),g=S=>{m(S.message)};let v=WL(o);v.onerror=g,$w+=1;const b=(S,z)=>{l[S]=z},C=(S,z)=>{u[S]=z},T=({id:S,action:z,payload:oe})=>new Promise((G,ee)=>{Bw(`[${r}]: Start ${S}, action=${z}`);const pe=`${z}-${S}`;b(pe,G),C(pe,ee),XL(v,{workerId:r,jobId:S,action:z,payload:oe})}),_=()=>console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)"),L=S=>T(di({id:S,action:"load",payload:{options:{lstmOnly:f,corePath:o.corePath,logging:o.logging}}})),R=(S,z,oe)=>T(di({id:oe,action:"FS",payload:{method:"writeFile",args:[S,z]}})),O=(S,z)=>T(di({id:z,action:"FS",payload:{method:"readFile",args:[S,{encoding:"utf8"}]}})),j=(S,z)=>T(di({id:z,action:"FS",payload:{method:"unlink",args:[S]}})),F=(S,z,oe)=>T(di({id:oe,action:"FS",payload:{method:S,args:z}})),H=()=>console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)"),K=(S,z)=>T(di({id:z,action:"loadLanguage",payload:{langs:S,options:{langPath:o.langPath,dataPath:o.dataPath,cachePath:o.cachePath,cacheMethod:o.cacheMethod,gzip:o.gzip,lstmOnly:[ua.DEFAULT,ua.LSTM_ONLY].includes(h)&&!o.legacyLang}}})),Q=()=>console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)"),W=(S,z,oe,G)=>T(di({id:G,action:"initialize",payload:{langs:S,oem:z,config:oe}})),ae=(S="eng",z,oe,G)=>{if(f&&[ua.TESSERACT_ONLY,ua.TESSERACT_LSTM_COMBINED].includes(z))throw Error("Legacy model requested but code missing.");const ee=z||h;h=ee;const pe=oe||p;p=pe;const We=(typeof S=="string"?S.split("+"):S).filter(ht=>!d.includes(ht));return d.push(...We),We.length>0?K(We,G).then(()=>W(S,ee,pe,G)):W(S,ee,pe,G)},X=(S={},z)=>T(di({id:z,action:"setParameters",payload:{params:S}})),N=async(S,z={},oe={blocks:!0,text:!0,hocr:!0,tsv:!0},G)=>T(di({id:G,action:"recognize",payload:{image:await Hw(S),options:z,output:oe}})),I=(S="Tesseract OCR Result",z=!1,oe)=>(console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),T(di({id:oe,action:"getPDF",payload:{title:S,textonly:z}}))),k=async(S,z)=>{if(f)throw Error("`worker.detect` requires Legacy model, which was not loaded.");return T(di({id:z,action:"detect",payload:{image:await Hw(S)}}))},D=async()=>(v!==null&&(qL(v),v=null),Promise.resolve());GL(v,({workerId:S,jobId:z,status:oe,action:G,data:ee})=>{const pe=`${G}-${z}`;if(oe==="resolve"){Bw(`[${S}]: Complete ${z}`);let et=ee;G==="recognize"?et=$L(ee):G==="getPDF"&&(et=Array.from({...ee,length:Object.keys(ee).length})),l[pe]({jobId:z,data:et})}else if(oe==="reject")if(u[pe](ee),G==="load"&&m(ee),a)a(ee);else throw Error(ee);else oe==="progress"&&s({...ee,userJobId:z})});const U={id:r,worker:v,setResolve:b,setReject:C,load:_,writeText:R,readText:O,removeFile:j,FS:F,loadLanguage:H,initialize:Q,reinitialize:ae,setParameters:X,recognize:N,getPDF:I,detect:k,terminate:D};return L().then(()=>K(n)).then(()=>W(n,e,i)).then(()=>y(U)).catch(()=>{}),E};const VA=UA,YL=async(n,e,t)=>{const i=await VA(e,1,t);return i.recognize(n).finally(async()=>{await i.terminate()})},KL=async(n,e)=>{const t=await VA("osd",0,e);return t.detect(n).finally(async()=>{await t.terminate()})};var QL={recognize:YL,detect:KL},ZL={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"},JL={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"};const eI=YP,tI=UA,nI=QL,iI=ZL,rI=$A,sI=JL,{setLogging:aI}=Pc;var oI={languages:iI,OEM:rI,PSM:sI,createScheduler:eI,createWorker:tI,setLogging:aI,...nI};const lI="modulepreload",cI=function(n){return"/"+n},Uw={},Uh=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=cI(l),l in Uw)return;Uw[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":lI,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((p,f)=>{h.addEventListener("load",p),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};var Au={};Au.d=(n,e)=>{for(var t in e)Au.o(e,t)&&!Au.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};Au.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var he=globalThis.pdfjsLib={};Au.d(he,{AbortException:()=>Oo,AnnotationEditorLayer:()=>bv,AnnotationEditorParamsType:()=>de,AnnotationEditorType:()=>ye,AnnotationEditorUIManager:()=>Po,AnnotationLayer:()=>oM,AnnotationMode:()=>ps,ColorPicker:()=>wf,DOMSVGFactory:()=>X0,DrawLayer:()=>Ev,FeatureTest:()=>rn,GlobalWorkerOptions:()=>Vr,ImageKind:()=>up,InvalidPDFException:()=>qA,MissingPDFException:()=>Fo,OPS:()=>fi,OutputScale:()=>my,PDFDataRangeTransport:()=>$S,PDFDateString:()=>H0,PDFWorker:()=>gl,PasswordResponses:()=>pI,PermissionFlag:()=>hI,PixelsPerInch:()=>Js,RenderingCancelledException:()=>z0,TextLayer:()=>Gu,UnexpectedResponseException:()=>om,Util:()=>ne,VerbosityLevel:()=>rm,XfaLayer:()=>VS,build:()=>HR,createValidAbsoluteUrl:()=>yI,fetchData:()=>cm,getDocument:()=>RR,getFilenameFromUrl:()=>_I,getPdfFilenameFromUrl:()=>CI,getXfaPageViewport:()=>TI,isDataScheme:()=>um,isPdfFile:()=>B0,noContextMenu:()=>li,normalizeUnicode:()=>AI,setLayerDimensions:()=>To,shadow:()=>Ae,version:()=>BR});const Gt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),WA=[1,0,0,1,0,0],dy=[.001,0,0,.001,0,0],uI=1e7,Km=1.35,Fn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ps={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dI="pdfjs_internal_editor_",ye={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},de={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},hI={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Bt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},up={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},pt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Uc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},rm={ERRORS:0,WARNINGS:1,INFOS:5},fi={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},pI={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let sm=rm.WARNINGS;function fI(n){Number.isInteger(n)&&(sm=n)}function mI(){return sm}function am(n){sm>=rm.INFOS&&console.log(`Info: ${n}`)}function xe(n){sm>=rm.WARNINGS&&console.log(`Warning: ${n}`)}function He(n){throw new Error(n)}function xt(n,e){n||He(e)}function gI(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function yI(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const r=n.match(/\./g);(r==null?void 0:r.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=kI(n)}catch{}}const i=e?new URL(n,e):new URL(n);if(gI(i))return i}catch{}return null}function Ae(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const aa=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class hy extends aa{constructor(e,t){super(e,"PasswordException"),this.code=t}}class py extends aa{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class qA extends aa{constructor(e){super(e,"InvalidPDFException")}}class Fo extends aa{constructor(e){super(e,"MissingPDFException")}}class om extends aa{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class vI extends aa{constructor(e){super(e,"FormatError")}}class Oo extends aa{constructor(e){super(e,"AbortException")}}function GA(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&He("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),a=n.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function lm(n){typeof n!="string"&&He("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function xI(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function O0(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function wI(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function bI(){try{return new Function(""),!0}catch{return!1}}class rn{static get isLittleEndian(){return Ae(this,"isLittleEndian",wI())}static get isEvalSupported(){return Ae(this,"isEvalSupported",bI())}static get isOffscreenCanvasSupported(){return Ae(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?Ae(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):Ae(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return Ae(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Qm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Yr,dp,fy;class ne{static makeHexColor(e,t,i){return`#${Qm[e]}${Qm[t]}${Qm[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[i,r]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[r,s]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],r[0],s[0],a[0]),Math.min(i[1],r[1],s[1],a[1]),Math.max(i[0],r[0],s[0],a[0]),Math.max(i[1],r[1],s[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(i+a)/2,l=Math.sqrt((i+a)**2-4*(i*a-s*r))/2,u=o+l||1,d=o-l||1;return[Math.sqrt(u),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[i,s,r,a]}static bezierBoundingBox(e,t,i,r,s,a,o,l,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],w(this,Yr,fy).call(this,e,i,s,o,t,r,a,l,3*(-e+3*(i-s)+o),6*(e-2*i+s),3*(i-e),u),w(this,Yr,fy).call(this,e,i,s,o,t,r,a,l,3*(-t+3*(r-a)+l),6*(t-2*r+a),3*(r-t),u),u}}Yr=new WeakSet,dp=function(e,t,i,r,s,a,o,l,u,d){if(u<=0||u>=1)return;const h=1-u,p=u*u,f=p*u,m=h*(h*(h*e+3*u*t)+3*p*i)+f*r,y=h*(h*(h*s+3*u*a)+3*p*o)+f*l;d[0]=Math.min(d[0],m),d[1]=Math.min(d[1],y),d[2]=Math.max(d[2],m),d[3]=Math.max(d[3],y)},fy=function(e,t,i,r,s,a,o,l,u,d,h,p){if(Math.abs(u)<1e-12){Math.abs(d)>=1e-12&&w(this,Yr,dp).call(this,e,t,i,r,s,a,o,l,-h/d,p);return}const f=d**2-4*h*u;if(f<0)return;const m=Math.sqrt(f),y=2*u;w(this,Yr,dp).call(this,e,t,i,r,s,a,o,l,(-d+m)/y,p),w(this,Yr,dp).call(this,e,t,i,r,s,a,o,l,(-d-m)/y,p)},A(ne,Yr);function kI(n){return decodeURIComponent(escape(n))}let Zm=null,Vw=null;function AI(n){return Zm||(Zm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Vw=new Map([["","t"]])),n.replaceAll(Zm,(e,t,i)=>t?t.normalize("NFKC"):Vw.get(i))}function SI(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const n=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(n);else for(let e=0;e<32;e++)n[e]=Math.floor(Math.random()*255);return GA(n)}const j0="pdfjs_internal_id_",pr={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function EI(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(GA(n))}const mr="http://www.w3.org/2000/svg",xa=class xa{};ue(xa,"CSS",96),ue(xa,"PDF",72),ue(xa,"PDF_TO_CSS_UNITS",xa.CSS/xa.PDF);let Js=xa;async function cm(n,e="text"){if(Zc(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class yh{constructor({viewBox:e,scale:t,rotation:i,offsetX:r=0,offsetY:s=0,dontFlip:a=!1}){this.viewBox=e,this.scale=t,this.rotation=i,this.offsetX=r,this.offsetY=s;const o=(e[2]+e[0])/2,l=(e[3]+e[1])/2;let u,d,h,p;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,d=0,h=0,p=1;break;case 90:u=0,d=1,h=1,p=0;break;case 270:u=0,d=-1,h=-1,p=0;break;case 0:u=1,d=0,h=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(h=-h,p=-p);let f,m,y,E;u===0?(f=Math.abs(l-e[1])*t+r,m=Math.abs(o-e[0])*t+s,y=(e[3]-e[1])*t,E=(e[2]-e[0])*t):(f=Math.abs(o-e[0])*t+r,m=Math.abs(l-e[1])*t+s,y=(e[2]-e[0])*t,E=(e[3]-e[1])*t),this.transform=[u*t,d*t,h*t,p*t,f-u*t*o-h*t*l,m-d*t*o-p*t*l],this.width=y,this.height=E}get rawDims(){const{viewBox:e}=this;return Ae(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new yh({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return ne.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ne.applyTransform([e[0],e[1]],this.transform),i=ne.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return ne.applyInverseTransform([e,t],this.transform)}}class z0 extends aa{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function um(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function B0(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function _I(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function CI(n,e="document.pdf"){if(typeof n!="string")return e;if(um(n))return xe('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(n);let s=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=i.exec(decodeURIComponent(s))[0]}catch{}return s||e}class Ww{constructor(){ue(this,"started",Object.create(null));ue(this,"times",[])}time(e){e in this.started&&xe(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||xe(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(t)} ${s-r}ms
`);return e.join("")}}function Zc(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function li(n){n.preventDefault()}function qw(n){console.log("Deprecated API usage: "+n)}var Ku;class H0{static toDateObject(e){if(!e||typeof e!="string")return null;c(this,Ku)||x(this,Ku,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=c(this,Ku).exec(e);if(!t)return null;const i=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(a+=d,o+=h):u==="+"&&(a-=d,o-=h),new Date(Date.UTC(i,r,s,a,o,l))}}Ku=new WeakMap,A(H0,Ku);function TI(n,{scale:e=1,rotation:t=0}){const{width:i,height:r}=n.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new yh({viewBox:s,scale:e,rotation:t})}function $0(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(xe(`Not a valid color format: "${n}"`),[0,0,0])}function PI(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,$0(i))}e.remove()}function Ye(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform();return[e,t,i,r,s,a]}function fr(n){const{a:e,b:t,c:i,d:r,e:s,f:a}=n.getTransform().invertSelf();return[e,t,i,r,s,a]}function To(n,e,t=!1,i=!0){if(e instanceof yh){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=n,o=rn.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${s}px`,d=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=d,a.height=h):(a.width=h,a.height=d)}i&&n.setAttribute("data-main-rotation",e.rotation)}class my{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var fs,Sa,mi,Ea,Qu,Zu,Sf,XA,sn,YA,KA,hp,QA,yy;const yr=class yr{constructor(e){A(this,sn);A(this,fs,null);A(this,Sa,null);A(this,mi);A(this,Ea,null);A(this,Qu,null);x(this,mi,e),c(yr,Zu)||x(yr,Zu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=x(this,fs,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=c(this,mi)._uiManager._signal;e.addEventListener("contextmenu",li,{signal:t}),e.addEventListener("pointerdown",w(yr,Sf,XA),{signal:t});const i=x(this,Ea,document.createElement("div"));i.className="buttons",e.append(i);const r=c(this,mi).toolbarPosition;if(r){const{style:s}=e,a=c(this,mi)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return w(this,sn,QA).call(this),e}get div(){return c(this,fs)}hide(){var e;c(this,fs).classList.add("hidden"),(e=c(this,Sa))==null||e.hideDropdown()}show(){var e;c(this,fs).classList.remove("hidden"),(e=c(this,Qu))==null||e.shown()}async addAltText(e){const t=await e.render();w(this,sn,hp).call(this,t),c(this,Ea).prepend(t,c(this,sn,yy)),x(this,Qu,e)}addColorPicker(e){x(this,Sa,e);const t=e.renderButton();w(this,sn,hp).call(this,t),c(this,Ea).prepend(t,c(this,sn,yy))}remove(){var e;c(this,fs).remove(),(e=c(this,Sa))==null||e.destroy(),x(this,Sa,null)}};fs=new WeakMap,Sa=new WeakMap,mi=new WeakMap,Ea=new WeakMap,Qu=new WeakMap,Zu=new WeakMap,Sf=new WeakSet,XA=function(e){e.stopPropagation()},sn=new WeakSet,YA=function(e){c(this,mi)._focusEventsAllowed=!1,e.preventDefault(),e.stopPropagation()},KA=function(e){c(this,mi)._focusEventsAllowed=!0,e.preventDefault(),e.stopPropagation()},hp=function(e){const t=c(this,mi)._uiManager._signal;e.addEventListener("focusin",w(this,sn,YA).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",w(this,sn,KA).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",li,{signal:t})},QA=function(){const{editorType:e,_uiManager:t}=c(this,mi),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",c(yr,Zu)[e]),w(this,sn,hp).call(this,i),i.addEventListener("click",r=>{t.delete()},{signal:t._signal}),c(this,Ea).append(i)},yy=function(){const e=document.createElement("div");return e.className="divider",e},A(yr,Sf),A(yr,Zu,null);let gy=yr;var Ju,_a,Ca,ta,ZA,JA,eS;class LI{constructor(e){A(this,ta);A(this,Ju,null);A(this,_a,null);A(this,Ca);x(this,Ca,e)}show(e,t,i){const[r,s]=w(this,ta,JA).call(this,t,i),{style:a}=c(this,_a)||x(this,_a,w(this,ta,ZA).call(this));e.append(c(this,_a)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,_a).remove()}}Ju=new WeakMap,_a=new WeakMap,Ca=new WeakMap,ta=new WeakSet,ZA=function(){const e=x(this,_a,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",li,{signal:c(this,Ca)._signal});const t=x(this,Ju,document.createElement("div"));return t.className="buttons",e.append(t),w(this,ta,eS).call(this),e},JA=function(e,t){let i=0,r=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const o=s.x+(t?s.width:0);if(a>i){r=o,i=a;continue}t?o>r&&(r=o):o<r&&(r=o)}return[t?1-r:r,i]},eS=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=c(this,Ca)._signal;e.addEventListener("contextmenu",li,{signal:i}),e.addEventListener("click",()=>{c(this,Ca).highlightSelection("floating_button")},{signal:i}),c(this,Ju).append(e)};function yf(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}function II(n){return Math.round(Math.min(255,Math.max(1,255*n))).toString(16).padStart(2,"0")}var Ef;class RI{constructor(){A(this,Ef,0)}get id(){return`${dI}${Qt(this,Ef)._++}`}}Ef=new WeakMap;var xl,ed,$t,wl,pp;const dx=class dx{constructor(){A(this,wl);A(this,xl,SI());A(this,ed,0);A(this,$t,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return Ae(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:i,size:r,type:s}=e;return w(this,wl,pp).call(this,`${t}_${i}_${r}_${s}`,e)}async getFromUrl(e){return w(this,wl,pp).call(this,e,e)}async getFromBlob(e,t){const i=await t;return w(this,wl,pp).call(this,e,i)}async getFromId(e){c(this,$t)||x(this,$t,new Map);const t=c(this,$t).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){c(this,$t)||x(this,$t,new Map);let i=c(this,$t).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${c(this,xl)}_${Qt(this,ed)._++}`,refCounter:1,isSvg:!1},c(this,$t).set(e,i),c(this,$t).set(i.id,i),i}getSvgUrl(e){const t=c(this,$t).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;c(this,$t)||x(this,$t,new Map);const t=c(this,$t).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}(r=i.close)==null||r.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${c(this,xl)}_`)}};xl=new WeakMap,ed=new WeakMap,$t=new WeakMap,wl=new WeakSet,pp=async function(e,t){c(this,$t)||x(this,$t,new Map);let i=c(this,$t).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${c(this,xl)}_${Qt(this,ed)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(i.url=t,r=await cm(t,"blob")):t instanceof File?r=i.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=dx._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,d)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const h=i.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=d});a.readAsDataURL(r),await l}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){console.error(r),i=null}return c(this,$t).set(e,i),i&&c(this,$t).set(i.id,i),i};let vy=dx;var kt,ms,td,At;class MI{constructor(e=128){A(this,kt,[]);A(this,ms,!1);A(this,td);A(this,At,-1);x(this,td,e)}add({cmd:e,undo:t,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),c(this,ms))return;const l={cmd:e,undo:t,post:i,type:s};if(c(this,At)===-1){c(this,kt).length>0&&(c(this,kt).length=0),x(this,At,0),c(this,kt).push(l);return}if(a&&c(this,kt)[c(this,At)].type===s){o&&(l.undo=c(this,kt)[c(this,At)].undo),c(this,kt)[c(this,At)]=l;return}const u=c(this,At)+1;u===c(this,td)?c(this,kt).splice(0,1):(x(this,At,u),u<c(this,kt).length&&c(this,kt).splice(u)),c(this,kt).push(l)}undo(){if(c(this,At)===-1)return;x(this,ms,!0);const{undo:e,post:t}=c(this,kt)[c(this,At)];e(),t==null||t(),x(this,ms,!1),x(this,At,c(this,At)-1)}redo(){if(c(this,At)<c(this,kt).length-1){x(this,At,c(this,At)+1),x(this,ms,!0);const{cmd:e,post:t}=c(this,kt)[c(this,At)];e(),t==null||t(),x(this,ms,!1)}}hasSomethingToUndo(){return c(this,At)!==-1}hasSomethingToRedo(){return c(this,At)<c(this,kt).length-1}destroy(){x(this,kt,null)}}kt=new WeakMap,ms=new WeakMap,td=new WeakMap,At=new WeakMap;var _f,tS;class vh{constructor(e){A(this,_f);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=rn.platform;for(const[i,r,s={}]of e)for(const a of i){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(w(this,_f,tS).call(this,t));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(e,t)||(r.bind(e,...a,t)(),s||(t.stopPropagation(),t.preventDefault()))}}_f=new WeakSet,tS=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Cf=class Cf{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return PI(e),Ae(this,"_colors",e)}convert(e){const t=$0(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,r]of this._colors)if(r.every((s,a)=>s===t[a]))return Cf._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ne.makeHexColor(...t):e}};ue(Cf,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let xy=Cf;var bl,Tn,mt,It,kl,wr,Al,gi,gs,Sl,Ta,$i,yi,Pa,nd,id,El,rd,Ui,ys,_l,vs,Vi,Tf,xs,sd,ws,La,ad,od,St,Pe,br,Ia,ld,cd,bs,Wi,kr,ud,Gn,Y,fp,wy,nS,iS,mp,rS,sS,aS,by,oS,ky,Ay,lS,Zt,os,cS,uS,Sy,dS,Jc,Ey;const ll=class ll{constructor(e,t,i,r,s,a,o,l,u,d,h){A(this,Y);A(this,bl,new AbortController);A(this,Tn,null);A(this,mt,new Map);A(this,It,new Map);A(this,kl,null);A(this,wr,null);A(this,Al,null);A(this,gi,new MI);A(this,gs,null);A(this,Sl,0);A(this,Ta,new Set);A(this,$i,null);A(this,yi,null);A(this,Pa,new Set);A(this,nd,!1);A(this,id,!1);A(this,El,!1);A(this,rd,null);A(this,Ui,null);A(this,ys,null);A(this,_l,null);A(this,vs,!1);A(this,Vi,null);A(this,Tf,new RI);A(this,xs,!1);A(this,sd,!1);A(this,ws,null);A(this,La,null);A(this,ad,null);A(this,od,null);A(this,St,ye.NONE);A(this,Pe,new Set);A(this,br,null);A(this,Ia,null);A(this,ld,null);A(this,cd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});A(this,bs,[0,0]);A(this,Wi,null);A(this,kr,null);A(this,ud,null);A(this,Gn,null);const p=this._signal=c(this,bl).signal;x(this,kr,e),x(this,ud,t),x(this,kl,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:p}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:p}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:p}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:p}),r._on("setpreference",this.onSetPreference.bind(this),{signal:p}),r._on("switchannotationeditorparams",f=>this.updateParams(f.type,f.value),{signal:p}),w(this,Y,rS).call(this),w(this,Y,lS).call(this),w(this,Y,by).call(this),x(this,wr,s.annotationStorage),x(this,rd,s.filterFactory),x(this,Ia,a),x(this,_l,o||null),x(this,nd,l),x(this,id,u),x(this,El,d),x(this,od,h||null),this.viewParameters={realScale:Js.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const e=ll.prototype,t=a=>c(a,kr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return Ae(this,"_keyboardManager",new vh([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,kr).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,kr).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,i,r;(e=c(this,Gn))==null||e.resolve(),x(this,Gn,null),(t=c(this,bl))==null||t.abort(),x(this,bl,null),this._signal=null;for(const s of c(this,It).values())s.destroy();c(this,It).clear(),c(this,mt).clear(),c(this,Pa).clear(),x(this,Tn,null),c(this,Pe).clear(),c(this,gi).destroy(),(i=c(this,kl))==null||i.destroy(),(r=c(this,Vi))==null||r.hide(),x(this,Vi,null),c(this,Ui)&&(clearTimeout(c(this,Ui)),x(this,Ui,null)),c(this,Wi)&&(clearTimeout(c(this,Wi)),x(this,Wi,null))}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return c(this,od)}get useNewAltTextFlow(){return c(this,id)}get useNewAltTextWhenAddingImage(){return c(this,El)}get hcmFilter(){return Ae(this,"hcmFilter",c(this,Ia)?c(this,rd).addHCMFilter(c(this,Ia).foreground,c(this,Ia).background):"none")}get direction(){return Ae(this,"direction",getComputedStyle(c(this,kr)).direction)}get highlightColors(){return Ae(this,"highlightColors",c(this,_l)?new Map(c(this,_l).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return Ae(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setMainHighlightColorPicker(e){x(this,ad,e)}editAltText(e,t=!1){var i;(i=c(this,kl))==null||i.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":x(this,El,t);break}}onPageChanging({pageNumber:e}){x(this,Sl,e-1)}focusMainContainer(){c(this,kr).focus()}findParent(e,t){for(const i of c(this,It).values()){const{x:r,y:s,width:a,height:o}=i.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=s&&t<=s+o)return i}return null}disableUserSelect(e=!1){c(this,ud).classList.toggle("noUserSelect",e)}addShouldRescale(e){c(this,Pa).add(e)}removeShouldRescale(e){c(this,Pa).delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*Js.PDF_TO_CSS_UNITS;for(const t of c(this,Pa))t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a}=t,o=t.toString(),u=w(this,Y,fp).call(this,t).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;t.empty();const h=w(this,Y,wy).call(this,u),p=c(this,St)===ye.NONE,f=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:a,text:o}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(ye.HIGHLIGHT,f);return}f()}addToAnnotationStorage(e){!e.isEmpty()&&c(this,wr)&&!c(this,wr).has(e.id)&&c(this,wr).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,c(this,vs)&&(x(this,vs,!1),w(this,Y,mp).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of c(this,Pe))if(t.div.contains(e)){x(this,La,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!c(this,La))return;const[e,t]=c(this,La);x(this,La,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){w(this,Y,by).call(this),w(this,Y,ky).call(this)}removeEditListeners(){w(this,Y,oS).call(this),w(this,Y,Ay).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of c(this,yi))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of c(this,yi))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=c(this,Tn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of c(this,Pe)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of c(this,yi))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){xe(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const l of i){const u=await r.deserialize(l);if(!u)return;s.push(u)}const a=()=>{for(const l of s)w(this,Y,Sy).call(this,l);w(this,Y,Ey).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){xe(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,St)!==ye.NONE&&!this.isEditorHandlingKeyboard&&ll._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,vs)&&(x(this,vs,!1),w(this,Y,mp).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(w(this,Y,sS).call(this),w(this,Y,ky).call(this),w(this,Y,Zt).call(this,{isEditing:c(this,St)!==ye.NONE,isEmpty:w(this,Y,Jc).call(this),hasSomethingToUndo:c(this,gi).hasSomethingToUndo(),hasSomethingToRedo:c(this,gi).hasSomethingToRedo(),hasSelectedEditor:!1})):(w(this,Y,aS).call(this),w(this,Y,Ay).call(this),w(this,Y,Zt).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!c(this,yi)){x(this,yi,e);for(const t of c(this,yi))w(this,Y,os).call(this,t.defaultPropertiesToUpdate)}}getId(){return c(this,Tf).id}get currentLayer(){return c(this,It).get(c(this,Sl))}getLayer(e){return c(this,It).get(e)}get currentPageIndex(){return c(this,Sl)}addLayer(e){c(this,It).set(e.pageIndex,e),c(this,xs)?e.enable():e.disable()}removeLayer(e){c(this,It).delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(c(this,St)!==e&&!(c(this,Gn)&&(await c(this,Gn).promise,!c(this,Gn)))){if(x(this,Gn,Promise.withResolvers()),x(this,St,e),e===ye.NONE){this.setEditingState(!1),w(this,Y,uS).call(this),c(this,Gn).resolve();return}this.setEditingState(!0),await w(this,Y,cS).call(this),this.unselectAll();for(const r of c(this,It).values())r.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),c(this,Gn).resolve();return}for(const r of c(this,mt).values())r.annotationElementId===t?(this.setSelected(r),r.enterInEditMode()):r.unselect();c(this,Gn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==c(this,St)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var i;if(c(this,yi)){switch(e){case de.CREATE:this.currentLayer.addNewEditor();return;case de.HIGHLIGHT_DEFAULT_COLOR:(i=c(this,ad))==null||i.updateColor(t);break;case de.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,ld)||x(this,ld,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of c(this,Pe))r.updateParams(e,t);for(const r of c(this,yi))r.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var s;for(const a of c(this,mt).values())a.editorType===e&&a.show(t);(((s=c(this,ld))==null?void 0:s.get(de.HIGHLIGHT_SHOW_ALL))??!0)!==t&&w(this,Y,os).call(this,[[de.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(c(this,sd)!==e){x(this,sd,e);for(const t of c(this,It).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const i of c(this,mt).values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return c(this,mt).get(e)}addEditor(e){c(this,mt).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(c(this,Ui)&&clearTimeout(c(this,Ui)),x(this,Ui,setTimeout(()=>{this.focusMainContainer(),x(this,Ui,null)},0))),c(this,mt).delete(e.id),this.unselect(e),(!e.annotationElementId||!c(this,Ta).has(e.annotationElementId))&&((t=c(this,wr))==null||t.remove(e.id))}addDeletedAnnotationElement(e){c(this,Ta).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return c(this,Ta).has(e)}removeDeletedAnnotationElement(e){c(this,Ta).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){c(this,Tn)!==e&&(x(this,Tn,e),e&&w(this,Y,os).call(this,e.propertiesToUpdate))}updateUI(e){c(this,Y,dS)===e&&w(this,Y,os).call(this,e.propertiesToUpdate)}toggleSelected(e){if(c(this,Pe).has(e)){c(this,Pe).delete(e),e.unselect(),w(this,Y,Zt).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,Pe).add(e),e.select(),w(this,Y,os).call(this,e.propertiesToUpdate),w(this,Y,Zt).call(this,{hasSelectedEditor:!0})}setSelected(e){for(const t of c(this,Pe))t!==e&&t.unselect();c(this,Pe).clear(),c(this,Pe).add(e),e.select(),w(this,Y,os).call(this,e.propertiesToUpdate),w(this,Y,Zt).call(this,{hasSelectedEditor:!0})}isSelected(e){return c(this,Pe).has(e)}get firstSelectedEditor(){return c(this,Pe).values().next().value}unselect(e){e.unselect(),c(this,Pe).delete(e),w(this,Y,Zt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,Pe).size!==0}get isEnterHandled(){return c(this,Pe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,gi).undo(),w(this,Y,Zt).call(this,{hasSomethingToUndo:c(this,gi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:w(this,Y,Jc).call(this)})}redo(){c(this,gi).redo(),w(this,Y,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,gi).hasSomethingToRedo(),isEmpty:w(this,Y,Jc).call(this)})}addCommands(e){c(this,gi).add(e),w(this,Y,Zt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:w(this,Y,Jc).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...c(this,Pe)],t=()=>{for(const r of e)r.remove()},i=()=>{for(const r of e)w(this,Y,Sy).call(this,r)};this.addCommands({cmd:t,undo:i,mustExec:!0})}commitOrRemove(){var e;(e=c(this,Tn))==null||e.commitOrRemove()}hasSomethingToControl(){return c(this,Tn)||this.hasSelection}selectAll(){for(const e of c(this,Pe))e.commit();w(this,Y,Ey).call(this,c(this,mt).values())}unselectAll(){if(!(c(this,Tn)&&(c(this,Tn).commitOrRemove(),c(this,St)!==ye.NONE))&&this.hasSelection){for(const e of c(this,Pe))e.unselect();c(this,Pe).clear(),w(this,Y,Zt).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;c(this,bs)[0]+=e,c(this,bs)[1]+=t;const[r,s]=c(this,bs),a=[...c(this,Pe)],o=1e3;c(this,Wi)&&clearTimeout(c(this,Wi)),x(this,Wi,setTimeout(()=>{x(this,Wi,null),c(this,bs)[0]=c(this,bs)[1]=0,this.addCommands({cmd:()=>{for(const l of a)c(this,mt).has(l.id)&&l.translateInPage(r,s)},undo:()=>{for(const l of a)c(this,mt).has(l.id)&&l.translateInPage(-r,-s)},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),x(this,$i,new Map);for(const e of c(this,Pe))c(this,$i).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,$i))return!1;this.disableUserSelect(!1);const e=c(this,$i);x(this,$i,null);let t=!1;for(const[{x:r,y:s,pageIndex:a},o]of e)o.newX=r,o.newY=s,o.newPageIndex=a,t||(t=r!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const i=(r,s,a,o)=>{if(c(this,mt).has(r.id)){const l=c(this,It).get(o);l?r._setParentAndPosition(l,s,a):(r.pageIndex=o,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:o}]of e)i(r,s,a,o)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:o}]of e)i(r,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(c(this,$i))for(const i of c(this,$i).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||c(this,Pe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return c(this,Tn)===e}getActive(){return c(this,Tn)}getMode(){return c(this,St)}get imageManager(){return Ae(this,"imageManager",new vy)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,d=t.rangeCount;u<d;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,d,h,p)=>({x:(d-r)/a,y:1-(u+h-i)/s,width:p/a,height:h/s});break;case"180":o=(u,d,h,p)=>({x:1-(u+h-i)/s,y:1-(d+p-r)/a,width:h/s,height:p/a});break;case"270":o=(u,d,h,p)=>({x:1-(d+p-r)/a,y:(u-i)/s,width:p/a,height:h/s});break;default:o=(u,d,h,p)=>({x:(u-i)/s,y:(d-r)/a,width:h/s,height:p/a});break}const l=[];for(let u=0,d=t.rangeCount;u<d;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:p,y:f,width:m,height:y}of h.getClientRects())m===0||y===0||l.push(o(p,f,m,y))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(c(this,Al)||x(this,Al,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=c(this,Al))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=c(this,Al))==null?void 0:r.get(e.data.id);if(!t)return;const i=c(this,wr).getRawValue(t);i&&(c(this,St)===ye.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}};bl=new WeakMap,Tn=new WeakMap,mt=new WeakMap,It=new WeakMap,kl=new WeakMap,wr=new WeakMap,Al=new WeakMap,gi=new WeakMap,gs=new WeakMap,Sl=new WeakMap,Ta=new WeakMap,$i=new WeakMap,yi=new WeakMap,Pa=new WeakMap,nd=new WeakMap,id=new WeakMap,El=new WeakMap,rd=new WeakMap,Ui=new WeakMap,ys=new WeakMap,_l=new WeakMap,vs=new WeakMap,Vi=new WeakMap,Tf=new WeakMap,xs=new WeakMap,sd=new WeakMap,ws=new WeakMap,La=new WeakMap,ad=new WeakMap,od=new WeakMap,St=new WeakMap,Pe=new WeakMap,br=new WeakMap,Ia=new WeakMap,ld=new WeakMap,cd=new WeakMap,bs=new WeakMap,Wi=new WeakMap,kr=new WeakMap,ud=new WeakMap,Gn=new WeakMap,Y=new WeakSet,fp=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},wy=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of c(this,It).values())if(i.hasTextLayer(e))return i;return null},nS=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=w(this,Y,fp).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(c(this,Vi)||x(this,Vi,new LI(this)),c(this,Vi).show(i,r,this.direction==="ltr"))},iS=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){c(this,br)&&((s=c(this,Vi))==null||s.hide(),x(this,br,null),w(this,Y,Zt).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===c(this,br))return;const r=w(this,Y,fp).call(this,e).closest(".textLayer");if(!r){c(this,br)&&((a=c(this,Vi))==null||a.hide(),x(this,br,null),w(this,Y,Zt).call(this,{hasSelectedText:!1}));return}if((o=c(this,Vi))==null||o.hide(),x(this,br,t),w(this,Y,Zt).call(this,{hasSelectedText:!0}),!(c(this,St)!==ye.HIGHLIGHT&&c(this,St)!==ye.NONE)&&(c(this,St)===ye.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),x(this,vs,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,St)===ye.HIGHLIGHT?w(this,Y,wy).call(this,r):null;l==null||l.toggleDrawing();const u=new AbortController,d=this.combinedSignal(u),h=p=>{p.type==="pointerup"&&p.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),p.type==="pointerup"&&w(this,Y,mp).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:d}),window.addEventListener("blur",h,{signal:d})}},mp=function(e=""){c(this,St)===ye.HIGHLIGHT?this.highlightSelection(e):c(this,nd)&&w(this,Y,nS).call(this)},rS=function(){document.addEventListener("selectionchange",w(this,Y,iS).bind(this),{signal:this._signal})},sS=function(){if(c(this,ys))return;x(this,ys,new AbortController);const e=this.combinedSignal(c(this,ys));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},aS=function(){var e;(e=c(this,ys))==null||e.abort(),x(this,ys,null)},by=function(){if(c(this,ws))return;x(this,ws,new AbortController);const e=this.combinedSignal(c(this,ws));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},oS=function(){var e;(e=c(this,ws))==null||e.abort(),x(this,ws,null)},ky=function(){if(c(this,gs))return;x(this,gs,new AbortController);const e=this.combinedSignal(c(this,gs));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Ay=function(){var e;(e=c(this,gs))==null||e.abort(),x(this,gs,null)},lS=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Zt=function(e){Object.entries(e).some(([i,r])=>c(this,cd)[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,cd),e)}),c(this,St)===ye.HIGHLIGHT&&e.hasSelectedEditor===!1&&w(this,Y,os).call(this,[[de.HIGHLIGHT_FREE,!0]]))},os=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},cS=async function(){if(!c(this,xs)){x(this,xs,!0);const e=[];for(const t of c(this,It).values())e.push(t.enable());await Promise.all(e);for(const t of c(this,mt).values())t.enable()}},uS=function(){if(this.unselectAll(),c(this,xs)){x(this,xs,!1);for(const e of c(this,It).values())e.disable();for(const e of c(this,mt).values())e.disable()}},Sy=function(e){const t=c(this,It).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},dS=function(){let e=null;for(e of c(this,Pe));return e},Jc=function(){if(c(this,mt).size===0)return!0;if(c(this,mt).size===1)for(const e of c(this,mt).values())return e.isEmpty();return!1},Ey=function(e){for(const t of c(this,Pe))t.unselect();c(this,Pe).clear();for(const t of e)t.isEmpty()||(c(this,Pe).add(t),t.select());w(this,Y,Zt).call(this,{hasSelectedEditor:this.hasSelection})},ue(ll,"TRANSLATE_SMALL",1),ue(ll,"TRANSLATE_BIG",10);let Po=ll;var Et,qi,vi,Cl,Gi,Pn,Tl,Xi,hn,Ar,Ra,Yi,ks,Li,eu,gp;const Jt=class Jt{constructor(e){A(this,Li);A(this,Et,null);A(this,qi,!1);A(this,vi,null);A(this,Cl,null);A(this,Gi,null);A(this,Pn,null);A(this,Tl,!1);A(this,Xi,null);A(this,hn,null);A(this,Ar,null);A(this,Ra,null);A(this,Yi,!1);x(this,hn,e),x(this,Yi,e._uiManager.useNewAltTextFlow),c(Jt,ks)||x(Jt,ks,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Jt._l10n??(Jt._l10n=e)}async render(){const e=x(this,vi,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=x(this,Cl,document.createElement("span"));e.append(t),c(this,Yi)?(e.classList.add("new"),e.setAttribute("data-l10n-id",c(Jt,ks).missing),t.setAttribute("data-l10n-id",c(Jt,ks)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=c(this,hn)._uiManager._signal;e.addEventListener("contextmenu",li,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),c(this,hn)._uiManager.editAltText(c(this,hn)),c(this,Yi)&&c(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,Li,eu)}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(x(this,Tl,!0),r(s))},{signal:i}),await w(this,Li,gp).call(this),e}finish(){c(this,vi)&&(c(this,vi).focus({focusVisible:c(this,Tl)}),x(this,Tl,!1))}isEmpty(){return c(this,Yi)?c(this,Et)===null:!c(this,Et)&&!c(this,qi)}hasData(){return c(this,Yi)?c(this,Et)!==null||!!c(this,Ar):this.isEmpty()}get guessedText(){return c(this,Ar)}async setGuessedText(e){c(this,Et)===null&&(x(this,Ar,e),x(this,Ra,await Jt._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),w(this,Li,gp).call(this))}toggleAltTextBadge(e=!1){var t;if(!c(this,Yi)||c(this,Et)){(t=c(this,Xi))==null||t.remove(),x(this,Xi,null);return}if(!c(this,Xi)){const i=x(this,Xi,document.createElement("div"));i.className="noAltTextBadge",c(this,hn).div.append(i)}c(this,Xi).classList.toggle("hidden",!e)}serialize(e){let t=c(this,Et);return!e&&c(this,Ar)===t&&(t=c(this,Ra)),{altText:t,decorative:c(this,qi),guessedText:c(this,Ar),textWithDisclaimer:c(this,Ra)}}get data(){return{altText:c(this,Et),decorative:c(this,qi)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(x(this,Ar,i),x(this,Ra,r)),!(c(this,Et)===e&&c(this,qi)===t)&&(s||(x(this,Et,e),x(this,qi,t)),w(this,Li,gp).call(this))}toggle(e=!1){c(this,vi)&&(!e&&c(this,Pn)&&(clearTimeout(c(this,Pn)),x(this,Pn,null)),c(this,vi).disabled=!e)}shown(){c(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,Li,eu)}})}destroy(){var e,t;(e=c(this,vi))==null||e.remove(),x(this,vi,null),x(this,Cl,null),x(this,Gi,null),(t=c(this,Xi))==null||t.remove(),x(this,Xi,null)}};Et=new WeakMap,qi=new WeakMap,vi=new WeakMap,Cl=new WeakMap,Gi=new WeakMap,Pn=new WeakMap,Tl=new WeakMap,Xi=new WeakMap,hn=new WeakMap,Ar=new WeakMap,Ra=new WeakMap,Yi=new WeakMap,ks=new WeakMap,Li=new WeakSet,eu=function(){return c(this,Et)&&"added"||c(this,Et)===null&&this.guessedText&&"review"||"missing"},gp=async function(){var r,s,a;const e=c(this,vi);if(!e)return;if(c(this,Yi)){if(e.classList.toggle("done",!!c(this,Et)),e.setAttribute("data-l10n-id",c(Jt,ks)[c(this,Li,eu)]),(r=c(this,Cl))==null||r.setAttribute("data-l10n-id",c(Jt,ks)[`${c(this,Li,eu)}-label`]),!c(this,Et)){(s=c(this,Gi))==null||s.remove();return}}else{if(!c(this,Et)&&!c(this,qi)){e.classList.remove("done"),(a=c(this,Gi))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=c(this,Gi);if(!t){x(this,Gi,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${c(this,hn).id}`;const o=100,l=c(this,hn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,Pn)),x(this,Pn,null)},{once:!0}),e.addEventListener("mouseenter",()=>{x(this,Pn,setTimeout(()=>{x(this,Pn,null),c(this,Gi).classList.add("show"),c(this,hn)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;c(this,Pn)&&(clearTimeout(c(this,Pn)),x(this,Pn,null)),(u=c(this,Gi))==null||u.classList.remove("show")},{signal:l})}c(this,qi)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=c(this,Et)),t.parentNode||e.append(t);const i=c(this,hn).getImageForAltText();i==null||i.setAttribute("aria-describedby",t.id)},A(Jt,ks,null),ue(Jt,"_l10n",null);let vf=Jt;var Ma,xi,Ge,Pl,Na,Rt,Da,As,dd,Fa,Ss,hd,Oa,Sr,Ki,Ll,Il,Xn,pd,Pf,ve,_y,fd,Cy,Ty,hS,pS,Py,Ly,Iy,fS,Ry,mS,gS,yS,My,tu;const Te=class Te{constructor(e){A(this,ve);A(this,Ma,null);A(this,xi,null);A(this,Ge,null);A(this,Pl,!1);A(this,Na,!1);A(this,Rt,null);A(this,Da,null);A(this,As,null);A(this,dd,"");A(this,Fa,!1);A(this,Ss,null);A(this,hd,!1);A(this,Oa,!1);A(this,Sr,!1);A(this,Ki,null);A(this,Ll,0);A(this,Il,0);A(this,Xn,null);ue(this,"_editToolbar",null);ue(this,"_initialOptions",Object.create(null));ue(this,"_initialData",null);ue(this,"_isVisible",!0);ue(this,"_uiManager",null);ue(this,"_focusEventsAllowed",!0);A(this,pd,!1);A(this,Pf,Te._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Te.prototype._resizeWithKeyboard,t=Po.TRANSLATE_SMALL,i=Po.TRANSLATE_BIG;return Ae(this,"_resizerKeyboardManager",new vh([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Te.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return Ae(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new NI({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Te._l10n??(Te._l10n=e),Te._l10nResizer||(Te._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Te._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Te._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){He("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,pd)}set _isDraggable(e){var t;x(this,pd,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,Pf)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):w(this,ve,tu).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(c(this,Fa)?x(this,Fa,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){w(this,ve,_y).call(this,this.parentDimensions,e,t)}translateInPage(e,t){c(this,Ss)||x(this,Ss,[this.x,this.y]),w(this,ve,_y).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){c(this,Ss)||x(this,Ss,[this.x,this.y]);const[i,r]=this.parentDimensions;if(this.x+=e/i,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:u,y:d}=this.div.getBoundingClientRect();this.parent.findNewParent(this,u,d)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l,this.div.style.left=`${(100*s).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,Ss)&&(c(this,Ss)[0]!==this.x||c(this,Ss)[1]!==this.y)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=Te,r=i/e,s=i/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const[t,i]=this.pageDimensions;let{x:r,y:s,width:a,height:o}=this;if(a*=t,o*=i,r*=t,s*=i,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(t-a,r)),s=Math.max(0,Math.min(i-o,s));break;case 90:r=Math.max(0,Math.min(t-o,r)),s=Math.min(i,Math.max(a,s));break;case 180:r=Math.min(t,Math.max(a,r)),s=Math.min(i,Math.max(o,s));break;case 270:r=Math.min(t,Math.max(o,r)),s=Math.max(0,Math.min(i-a,s));break}this.x=r/=t,this.y=s/=i;const[l,u]=this.getBaseTranslation();r+=l,s+=u;const{style:d}=this.div;d.left=`${(100*r).toFixed(2)}%`,d.top=`${(100*s).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return w(i=Te,fd,Cy).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return w(i=Te,fd,Cy).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,r]=this.parentDimensions;this.div.style.width=`${(100*e/i).toFixed(2)}%`,c(this,Na)||(this.div.style.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,r=i.endsWith("%"),s=!c(this,Na)&&t.endsWith("%");if(r&&s)return;const[a,o]=this.parentDimensions;r||(e.width=`${(100*parseFloat(i)/a).toFixed(2)}%`),!c(this,Na)&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var e;(e=c(this,Ge))==null||e.finish()}async addEditToolbar(){return this._editToolbar||c(this,Oa)?this._editToolbar:(this._editToolbar=new gy(this),this.div.append(this._editToolbar.render()),c(this,Ge)&&await this._editToolbar.addAltText(c(this,Ge)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=c(this,Ge))==null||e.destroy())}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Ge)||(vf.initialize(Te._l10n),x(this,Ge,new vf(this)),c(this,Ma)&&(c(this,Ge).data=c(this,Ma),x(this,Ma,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=c(this,Ge))==null?void 0:e.data}set altTextData(e){c(this,Ge)&&(c(this,Ge).data=e)}get guessedAltText(){var e;return(e=c(this,Ge))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=c(this,Ge))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=c(this,Ge))==null?void 0:t.serialize(e)}hasAltText(){return!!c(this,Ge)&&!c(this,Ge).isEmpty()}hasAltTextData(){var e;return((e=c(this,Ge))==null?void 0:e.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Pl)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),w(this,ve,Ry).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),yf(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=rn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(x(this,Fa,!0),this._isDraggable){w(this,ve,fS).call(this,e);return}w(this,ve,Iy).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){c(this,Ki)&&clearTimeout(c(this,Ki)),x(this,Ki,setTimeout(()=>{var e;x(this,Ki,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition()}getRect(e,t,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/r,d=t/r,h=this.x*s,p=this.y*a,f=this.width*s,m=this.height*a;switch(i){case 0:return[h+u+o,a-p-d-m+l,h+u+f+o,a-p-d+l];case 90:return[h+d+o,a-p+u+l,h+d+m+o,a-p+u+f+l];case 180:return[h-u-f+o,a-p+d+l,h-u+o,a-p+d+m+l];case 270:return[h-d-m+o,a-p-u-f+l,h-d+o,a-p-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,r,s,a]=e,o=s-i,l=a-r;switch(this.rotation){case 0:return[i,t-a,o,l];case 90:return[i,t-r,l,o];case 180:return[s,t-r,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){x(this,Oa,!0)}disableEditMode(){x(this,Oa,!1)}isInEditMode(){return c(this,Oa)}shouldGetKeyboardEvents(){return c(this,Sr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){w(this,ve,Ry).call(this)}rotate(e){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){He("An editor must be serializable")}static async deserialize(e,t,i){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});r.rotation=e.rotation,x(r,Ma,e.accessibilityData);const[s,a]=r.pageDimensions,[o,l,u,d]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/s,r.y=l/a,r.width=u/s,r.height=d/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e;if((e=c(this,As))==null||e.abort(),x(this,As,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,Ki)&&(clearTimeout(c(this,Ki)),x(this,Ki,null)),w(this,ve,tu).call(this),this.removeEditToolbar(),c(this,Xn)){for(const t of c(this,Xn).values())clearTimeout(t);x(this,Xn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(w(this,ve,hS).call(this),c(this,Rt).classList.remove("hidden"),yf(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),x(this,Da,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=c(this,Rt).children;if(!c(this,xi)){x(this,xi,Array.from(t));const a=w(this,ve,mS).bind(this),o=w(this,ve,gS).bind(this),l=this._uiManager._signal;for(const u of c(this,xi)){const d=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",w(this,ve,yS).bind(this,d),{signal:l}),u.setAttribute("data-l10n-id",Te._l10nResizer[d])}}const i=c(this,xi)[0];let r=0;for(const a of t){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(c(this,xi).length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)c(this,Rt).append(c(this,Rt).firstChild);else if(s>r)for(let o=0;o<s-r;o++)c(this,Rt).firstChild.before(c(this,Rt).lastChild);let a=0;for(const o of t){const u=c(this,xi)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Te._l10nResizer[u])}}w(this,ve,My).call(this,0),x(this,Sr,!0),c(this,Rt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){c(this,Sr)&&w(this,ve,Ly).call(this,c(this,dd),{movementX:e,movementY:t})}_stopResizingWithKeyboard(){w(this,ve,tu).call(this),this.div.focus()}select(){var e,t,i;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(i=c(this,Ge))==null||i.toggleAltTextBadge(!1)}unselect(){var e,t,i,r,s;(e=c(this,Rt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=c(this,Ge))==null||s.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,hd)}set isEditing(e){x(this,hd,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){x(this,Na,!0);const i=e/t,{style:r}=this.div;r.aspectRatio=i,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){c(this,Xn)||x(this,Xn,new Map);const{action:i}=e;let r=c(this,Xn).get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),c(this,Xn).delete(i),c(this,Xn).size===0&&x(this,Xn,null)},Te._telemetryTimeout),c(this,Xn).set(i,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),x(this,Pl,!1)}disable(){this.div&&(this.div.tabIndex=-1),x(this,Pl,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};Ma=new WeakMap,xi=new WeakMap,Ge=new WeakMap,Pl=new WeakMap,Na=new WeakMap,Rt=new WeakMap,Da=new WeakMap,As=new WeakMap,dd=new WeakMap,Fa=new WeakMap,Ss=new WeakMap,hd=new WeakMap,Oa=new WeakMap,Sr=new WeakMap,Ki=new WeakMap,Ll=new WeakMap,Il=new WeakMap,Xn=new WeakMap,pd=new WeakMap,Pf=new WeakMap,ve=new WeakSet,_y=function([e,t],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/t,this.fixAndSetPosition()},fd=new WeakSet,Cy=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Ty=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},hS=function(){if(c(this,Rt))return;x(this,Rt,document.createElement("div")),c(this,Rt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const r=document.createElement("div");c(this,Rt).append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",w(this,ve,pS).bind(this,i),{signal:t}),r.addEventListener("contextmenu",li,{signal:t}),r.tabIndex=-1}this.div.prepend(c(this,Rt))},pS=function(e,t){var m;t.preventDefault();const{isMac:i}=rn.platform;if(t.button!==0||t.ctrlKey&&i)return;(m=c(this,Ge))==null||m.toggle(!1);const r=this._isDraggable;this._isDraggable=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",w(this,ve,Ly).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",li,{signal:a});const o=this.x,l=this.y,u=this.width,d=this.height,h=this.parent.div.style.cursor,p=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const f=()=>{var y;s.abort(),this.parent.togglePointerEvents(!0),(y=c(this,Ge))==null||y.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=h,this.div.style.cursor=p,w(this,ve,Py).call(this,o,l,u,d)};window.addEventListener("pointerup",f,{signal:a}),window.addEventListener("blur",f,{signal:a})},Py=function(e,t,i,r){const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===i&&l===r||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=s,this.y=a;const[u,d]=this.parentDimensions;this.setDims(u*o,d*l),this.fixAndSetPosition()},undo:()=>{this.width=i,this.height=r,this.x=e,this.y=t;const[u,d]=this.parentDimensions;this.setDims(u*i,d*r),this.fixAndSetPosition()},mustExec:!0})},Ly=function(e,t){const[i,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,u=Te.MIN_SIZE/i,d=Te.MIN_SIZE/r,h=X=>Math.round(X*1e4)/1e4,p=w(this,ve,Ty).call(this,this.rotation),f=(X,N)=>[p[0]*X+p[2]*N,p[1]*X+p[3]*N],m=w(this,ve,Ty).call(this,360-this.rotation),y=(X,N)=>[m[0]*X+m[2]*N,m[1]*X+m[3]*N];let E,g,v=!1,b=!1;switch(e){case"topLeft":v=!0,E=(X,N)=>[0,0],g=(X,N)=>[X,N];break;case"topMiddle":E=(X,N)=>[X/2,0],g=(X,N)=>[X/2,N];break;case"topRight":v=!0,E=(X,N)=>[X,0],g=(X,N)=>[0,N];break;case"middleRight":b=!0,E=(X,N)=>[X,N/2],g=(X,N)=>[0,N/2];break;case"bottomRight":v=!0,E=(X,N)=>[X,N],g=(X,N)=>[0,0];break;case"bottomMiddle":E=(X,N)=>[X/2,N],g=(X,N)=>[X/2,0];break;case"bottomLeft":v=!0,E=(X,N)=>[0,N],g=(X,N)=>[X,0];break;case"middleLeft":b=!0,E=(X,N)=>[0,N/2],g=(X,N)=>[X,N/2];break}const C=E(o,l),T=g(o,l);let _=f(...T);const L=h(s+_[0]),R=h(a+_[1]);let O=1,j=1,[F,H]=this.screenToPageTranslation(t.movementX,t.movementY);if([F,H]=y(F/i,H/r),v){const X=Math.hypot(o,l);O=j=Math.max(Math.min(Math.hypot(T[0]-C[0]-F,T[1]-C[1]-H)/X,1/o,1/l),u/o,d/l)}else b?O=Math.max(u,Math.min(1,Math.abs(T[0]-C[0]-F)))/o:j=Math.max(d,Math.min(1,Math.abs(T[1]-C[1]-H)))/l;const K=h(o*O),Q=h(l*j);_=f(...g(K,Q));const W=L-_[0],ae=R-_[1];this.width=K,this.height=Q,this.x=W,this.y=ae,this.setDims(i*K,r*Q),this.fixAndSetPosition()},Iy=function(e){const{isMac:t}=rn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},fS=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();const i=new AbortController,r=this._uiManager.combinedSignal(i);if(t){this.div.classList.add("moving"),x(this,Ll,e.clientX),x(this,Il,e.clientY);const a=o=>{const{clientX:l,clientY:u}=o,[d,h]=this.screenToPageTranslation(l-c(this,Ll),u-c(this,Il));x(this,Ll,l),x(this,Il,u),this._uiManager.dragSelectedEditors(d,h)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:r})}const s=()=>{i.abort(),t&&this.div.classList.remove("moving"),x(this,Fa,!1),this._uiManager.endDragSession()||w(this,ve,Iy).call(this,e)};window.addEventListener("pointerup",s,{signal:r}),window.addEventListener("blur",s,{signal:r})},Ry=function(){if(c(this,As)||!this.div)return;x(this,As,new AbortController);const e=this._uiManager.combinedSignal(c(this,As));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},mS=function(e){Te._resizerKeyboardManager.exec(this,e)},gS=function(e){var t;c(this,Sr)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==c(this,Rt)&&w(this,ve,tu).call(this)},yS=function(e){x(this,dd,c(this,Sr)?e:"")},My=function(e){if(c(this,xi))for(const t of c(this,xi))t.tabIndex=e},tu=function(){if(x(this,Sr,!1),w(this,ve,My).call(this,-1),c(this,Da)){const{savedX:e,savedY:t,savedWidth:i,savedHeight:r}=c(this,Da);w(this,ve,Py).call(this,e,t,i,r),x(this,Da,null)}},A(Te,fd),ue(Te,"_l10n",null),ue(Te,"_l10nResizer",null),ue(Te,"_borderLineWidth",-1),ue(Te,"_colorManager",new xy),ue(Te,"_zIndex",1),ue(Te,"_telemetryTimeout",1e3);let Ie=Te;class NI extends Ie{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Gw=3285377520,qn=4294901760,zi=65535;class vS{constructor(e){this.h1=e?e&4294967295:Gw,this.h2=e?e&4294967295:Gw}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let y=0,E=e.length;y<E;y++){const g=e.charCodeAt(y);g<=255?t[i++]=g:(t[i++]=g>>>8,t[i++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,a=new Uint32Array(t.buffer,0,r);let o=0,l=0,u=this.h1,d=this.h2;const h=3432918353,p=461845907,f=h&zi,m=p&zi;for(let y=0;y<r;y++)y&1?(o=a[y],o=o*h&qn|o*f&zi,o=o<<15|o>>>17,o=o*p&qn|o*m&zi,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[y],l=l*h&qn|l*f&zi,l=l<<15|l>>>17,l=l*p&qn|l*m&zi,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(o=0,s){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*h&qn|o*f&zi,o=o<<15|o>>>17,o=o*p&qn|o*m&zi,r&1?u^=o:d^=o}this.h1=u,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&qn|e*36045&zi,t=t*4283543511&qn|((t<<16|e>>>16)*2950163797&qn)>>>16,e^=t>>>1,e=e*444984403&qn|e*60499&zi,t=t*3301882366&qn|((t<<16|e>>>16)*3120437893&qn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ny=Object.freeze({map:null,hash:"",transfer:void 0});var ja,za,_t,Lf,xS;class U0{constructor(){A(this,Lf);A(this,ja,!1);A(this,za,null);A(this,_t,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=c(this,_t).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return c(this,_t).get(e)}remove(e){if(c(this,_t).delete(e),c(this,_t).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of c(this,_t).values())if(t instanceof Ie)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=c(this,_t).get(e);let r=!1;if(i!==void 0)for(const[s,a]of Object.entries(t))i[s]!==a&&(r=!0,i[s]=a);else r=!0,c(this,_t).set(e,t);r&&w(this,Lf,xS).call(this),t instanceof Ie&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return c(this,_t).has(e)}getAll(){return c(this,_t).size>0?O0(c(this,_t)):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return c(this,_t).size}resetModified(){c(this,ja)&&(x(this,ja,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new wS(this)}get serializable(){if(c(this,_t).size===0)return Ny;const e=new Map,t=new vS,i=[],r=Object.create(null);let s=!1;for(const[a,o]of c(this,_t)){const l=o instanceof Ie?o.serialize(!1,r):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Ny}get editorStats(){let e=null;const t=new Map;for(const i of c(this,_t).values()){if(!(i instanceof Ie))continue;const r=i.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(i).constructor),e||(e=Object.create(null));const a=e[s]||(e[s]=new Map);for(const[o,l]of Object.entries(r)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const d=u.get(l)??0;u.set(l,d+1)}}for(const[i,r]of t)e[i]=r.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){x(this,za,null)}get modifiedIds(){if(c(this,za))return c(this,za);const e=[];for(const t of c(this,_t).values())!(t instanceof Ie)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return x(this,za,{ids:new Set(e),hash:e.join(",")})}}ja=new WeakMap,za=new WeakMap,_t=new WeakMap,Lf=new WeakSet,xS=function(){c(this,ja)||(x(this,ja,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var md;class wS extends U0{constructor(t){super();A(this,md);const{map:i,hash:r,transfer:s}=t.serializable,a=structuredClone(i,s?{transfer:s}:null);x(this,md,{map:a,hash:r,transfer:s})}get print(){He("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,md)}get modifiedIds(){return Ae(this,"modifiedIds",{ids:new Set,hash:""})}}md=new WeakMap;var Rl;class DI{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){A(this,Rl,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),c(this,Rl).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||c(this,Rl).has(e.loadedName))){if(xt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:s}=e,a=new FontFace(i,r,s);this.addNativeFontFace(a);try{await a.load(),c(this,Rl).add(i),t==null||t(e)}catch{xe(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}He("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw xe(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return Ae(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(Gt||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),Ae(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(xt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:t,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Ae(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(C,T){return C.charCodeAt(T)<<24|C.charCodeAt(T+1)<<16|C.charCodeAt(T+2)<<8|C.charCodeAt(T+3)&255}function r(C,T,_,L){const R=C.substring(0,T),O=C.substring(T+_);return R+L+O}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function d(C,T){if(++u>30){xe("Load test font never loaded."),T();return}if(l.font="30px "+C,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(d.bind(null,C,T))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=r(p,976,h.length,h);const m=16,y=1482184792;let E=i(p,m);for(s=0,a=h.length-3;s<a;s+=4)E=E-y+i(h,s)|0;s<h.length&&(E=E-y+i(h+"XXX",s)|0),p=r(p,m,4,xI(E));const g=`url(data:font/opentype;base64,${btoa(p)});`,v=`@font-face {font-family:"${h}";src:${g}}`;this.insertRule(v);const b=this._document.createElement("div");b.style.visibility="hidden",b.style.width=b.style.height="10px",b.style.position="absolute",b.style.top=b.style.left="0px";for(const C of[e.loadedName,h]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=C,b.append(T)}this._document.body.append(b),d(h,()=>{b.remove(),t.complete()})}}Rl=new WeakMap;class FI{constructor(e,{disableFontFace:t=!1,inspectFont:i=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this._inspectFont=i}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${EI(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];let i;try{i=e.get(this.loadedName+"_path_"+t)}catch(s){xe(`getPathGenerator - ignoring character: "${s}".`)}if(!Array.isArray(i)||i.length===0)return this.compiledGlyphs[t]=function(s,a){};const r=[];for(let s=0,a=i.length;s<a;)switch(i[s++]){case pr.BEZIER_CURVE_TO:{const[o,l,u,d,h,p]=i.slice(s,s+6);r.push(f=>f.bezierCurveTo(o,l,u,d,h,p)),s+=6}break;case pr.MOVE_TO:{const[o,l]=i.slice(s,s+2);r.push(u=>u.moveTo(o,l)),s+=2}break;case pr.LINE_TO:{const[o,l]=i.slice(s,s+2);r.push(u=>u.lineTo(o,l)),s+=2}break;case pr.QUADRATIC_CURVE_TO:{const[o,l,u,d]=i.slice(s,s+4);r.push(h=>h.quadraticCurveTo(o,l,u,d)),s+=4}break;case pr.RESTORE:r.push(o=>o.restore());break;case pr.SAVE:r.push(o=>o.save());break;case pr.SCALE:xt(r.length===2,"Scale command is only valid at the third position.");break;case pr.TRANSFORM:{const[o,l,u,d,h,p]=i.slice(s,s+6);r.push(f=>f.transform(o,l,u,d,h,p)),s+=6}break;case pr.TRANSLATE:{const[o,l]=i.slice(s,s+2);r.push(u=>u.translate(o,l)),s+=2}break}return this.compiledGlyphs[t]=function(a,o){r[0](a),r[1](a),a.scale(o,-o);for(let l=2,u=r.length;l<u;l++)r[l](a)}}}var gd;class bS{constructor({enableHWA:e=!1}){A(this,gd,!1);x(this,gd,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!c(this,gd)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){He("Abstract method `_createCanvas` called.")}}gd=new WeakMap;class OI extends bS{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class kS{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){He("Abstract method `_fetch` called.")}}class AS extends kS{async _fetch(e){const t=await cm(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):lm(t)}}class SS{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,r,s){return"none"}destroy(e=!1){}}var Ba,Ha,Qi,Er,Ut,If,$a,J,Ht,$o,Uo,yp,Vo,ES,Dy,Wo,nu,iu,Fy,ru;class jI extends SS{constructor({docId:t,ownerDocument:i=globalThis.document}){super();A(this,J);A(this,Ba);A(this,Ha);A(this,Qi);A(this,Er);A(this,Ut);A(this,If);A(this,$a,0);x(this,Er,t),x(this,Ut,i)}addFilter(t){if(!t)return"none";let i=c(this,J,Ht).get(t);if(i)return i;const[r,s,a]=w(this,J,yp).call(this,t),o=t.length===1?r:`${r}${s}${a}`;if(i=c(this,J,Ht).get(o),i)return c(this,J,Ht).set(t,i),i;const l=`g_${c(this,Er)}_transfer_map_${Qt(this,$a)._++}`,u=w(this,J,Vo).call(this,l);c(this,J,Ht).set(t,u),c(this,J,Ht).set(o,u);const d=w(this,J,Wo).call(this,l);return w(this,J,iu).call(this,r,s,a,d),u}addHCMFilter(t,i){var m;const r=`${t}-${i}`,s="base";let a=c(this,J,$o).get(s);if((a==null?void 0:a.key)===r||(a?((m=a.filter)==null||m.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},c(this,J,$o).set(s,a)),!t||!i))return a.url;const o=w(this,J,ru).call(this,t);t=ne.makeHexColor(...o);const l=w(this,J,ru).call(this,i);if(i=ne.makeHexColor(...l),c(this,J,Uo).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return a.url;const u=new Array(256);for(let y=0;y<=255;y++){const E=y/255;u[y]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const d=u.join(","),h=`g_${c(this,Er)}_hcm_filter`,p=a.filter=w(this,J,Wo).call(this,h);w(this,J,iu).call(this,d,d,d,p),w(this,J,Dy).call(this,p);const f=(y,E)=>{const g=o[y]/255,v=l[y]/255,b=new Array(E+1);for(let C=0;C<=E;C++)b[C]=g+C/E*(v-g);return b.join(",")};return w(this,J,iu).call(this,f(0,5),f(1,5),f(2,5),p),a.url=w(this,J,Vo).call(this,h),a.url}addAlphaFilter(t){let i=c(this,J,Ht).get(t);if(i)return i;const[r]=w(this,J,yp).call(this,[t]),s=`alpha_${r}`;if(i=c(this,J,Ht).get(s),i)return c(this,J,Ht).set(t,i),i;const a=`g_${c(this,Er)}_alpha_map_${Qt(this,$a)._++}`,o=w(this,J,Vo).call(this,a);c(this,J,Ht).set(t,o),c(this,J,Ht).set(s,o);const l=w(this,J,Wo).call(this,a);return w(this,J,Fy).call(this,r,l),o}addLuminosityFilter(t){let i=c(this,J,Ht).get(t||"luminosity");if(i)return i;let r,s;if(t?([r]=w(this,J,yp).call(this,[t]),s=`luminosity_${r}`):s="luminosity",i=c(this,J,Ht).get(s),i)return c(this,J,Ht).set(t,i),i;const a=`g_${c(this,Er)}_luminosity_map_${Qt(this,$a)._++}`,o=w(this,J,Vo).call(this,a);c(this,J,Ht).set(t,o),c(this,J,Ht).set(s,o);const l=w(this,J,Wo).call(this,a);return w(this,J,ES).call(this,l),t&&w(this,J,Fy).call(this,r,l),o}addHighlightHCMFilter(t,i,r,s,a){var v;const o=`${i}-${r}-${s}-${a}`;let l=c(this,J,$o).get(t);if((l==null?void 0:l.key)===o||(l?((v=l.filter)==null||v.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},c(this,J,$o).set(t,l)),!i||!r))return l.url;const[u,d]=[i,r].map(w(this,J,ru).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),p=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[f,m]=[s,a].map(w(this,J,ru).bind(this));p<h&&([h,p,f,m]=[p,h,m,f]),c(this,J,Uo).style.color="";const y=(b,C,T)=>{const _=new Array(256),L=(p-h)/T,R=b/255,O=(C-b)/(255*T);let j=0;for(let F=0;F<=T;F++){const H=Math.round(h+F*L),K=R+F*O;for(let Q=j;Q<=H;Q++)_[Q]=K;j=H+1}for(let F=j;F<256;F++)_[F]=_[j-1];return _.join(",")},E=`g_${c(this,Er)}_hcm_${t}_filter`,g=l.filter=w(this,J,Wo).call(this,E);return w(this,J,Dy).call(this,g),w(this,J,iu).call(this,y(f[0],m[0],5),y(f[1],m[1],5),y(f[2],m[2],5),g),l.url=w(this,J,Vo).call(this,E),l.url}destroy(t=!1){t&&c(this,J,$o).size!==0||(c(this,Qi)&&(c(this,Qi).parentNode.parentNode.remove(),x(this,Qi,null)),c(this,Ha)&&(c(this,Ha).clear(),x(this,Ha,null)),x(this,$a,0))}}Ba=new WeakMap,Ha=new WeakMap,Qi=new WeakMap,Er=new WeakMap,Ut=new WeakMap,If=new WeakMap,$a=new WeakMap,J=new WeakSet,Ht=function(){return c(this,Ha)||x(this,Ha,new Map)},$o=function(){return c(this,If)||x(this,If,new Map)},Uo=function(){if(!c(this,Qi)){const t=c(this,Ut).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const r=c(this,Ut).createElementNS(mr,"svg");r.setAttribute("width",0),r.setAttribute("height",0),x(this,Qi,c(this,Ut).createElementNS(mr,"defs")),t.append(r),r.append(c(this,Qi)),c(this,Ut).body.append(t)}return c(this,Qi)},yp=function(t){if(t.length===1){const u=t[0],d=new Array(256);for(let p=0;p<256;p++)d[p]=u[p]/255;const h=d.join(",");return[h,h,h]}const[i,r,s]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=i[u]/255,o[u]=r[u]/255,l[u]=s[u]/255;return[a.join(","),o.join(","),l.join(",")]},Vo=function(t){if(c(this,Ba)===void 0){x(this,Ba,"");const i=c(this,Ut).URL;i!==c(this,Ut).baseURI&&(um(i)?xe('#createUrl: ignore "data:"-URL for performance reasons.'):x(this,Ba,i.split("#",1)[0]))}return`url(${c(this,Ba)}#${t})`},ES=function(t){const i=c(this,Ut).createElementNS(mr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},Dy=function(t){const i=c(this,Ut).createElementNS(mr,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},Wo=function(t){const i=c(this,Ut).createElementNS(mr,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),c(this,J,Uo).append(i),i},nu=function(t,i,r){const s=c(this,Ut).createElementNS(mr,i);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},iu=function(t,i,r,s){const a=c(this,Ut).createElementNS(mr,"feComponentTransfer");s.append(a),w(this,J,nu).call(this,a,"feFuncR",t),w(this,J,nu).call(this,a,"feFuncG",i),w(this,J,nu).call(this,a,"feFuncB",r)},Fy=function(t,i){const r=c(this,Ut).createElementNS(mr,"feComponentTransfer");i.append(r),w(this,J,nu).call(this,r,"feFuncA",t)},ru=function(t){return c(this,J,Uo).style.color=t,$0(getComputedStyle(c(this,J,Uo)).getPropertyValue("color"))};class _S{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){He("Abstract method `_fetch` called.")}}class CS extends _S{async _fetch(e){const t=await cm(e,"arraybuffer");return new Uint8Array(t)}}if(Gt){var Oy=Promise.withResolvers(),Su=null;(async()=>{const e=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),t=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),i=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),r=await Uh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let s,a;return new Map(Object.entries({fs:e,http:t,https:i,url:r,canvas:s,path2d:a}))})().then(e=>{Su=e,Oy.resolve()},e=>{xe(`loadPackages: ${e}`),Su=new Map,Oy.resolve()})}class ea{static get promise(){return Oy.promise}static get(e){return Su==null?void 0:Su.get(e)}}async function TS(n){const t=await ea.get("fs").promises.readFile(n);return new Uint8Array(t)}class zI extends SS{}class BI extends bS{_createCanvas(e,t){return ea.get("canvas").createCanvas(e,t)}}class HI extends kS{async _fetch(e){return TS(e)}}class $I extends _S{async _fetch(e){return TS(e)}}const tn={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function jy(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,i),n.clip(r)}class V0{getPattern(){He("Abstract method `getPattern` called.")}}class UI extends V0{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,r){let s;if(r===tn.STROKE||r===tn.FILL){const a=t.current.getClippedPathBoundingBox(r,Ye(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-a[0],-a[1]),i=ne.transform(i,[1,0,0,1,a[0],a[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),jy(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),s=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(i);s.setTransform(h)}else jy(e,this._bbox),s=this._createGradient(e);return s}}function Jm(n,e,t,i,r,s,a,o){const l=e.coords,u=e.colors,d=n.data,h=n.width*4;let p;l[t+1]>l[i+1]&&(p=t,t=i,i=p,p=s,s=a,a=p),l[i+1]>l[r+1]&&(p=i,i=r,r=p,p=a,a=o,o=p),l[t+1]>l[i+1]&&(p=t,t=i,i=p,p=s,s=a,a=p);const f=(l[t]+e.offsetX)*e.scaleX,m=(l[t+1]+e.offsetY)*e.scaleY,y=(l[i]+e.offsetX)*e.scaleX,E=(l[i+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY;if(m>=v)return;const b=u[s],C=u[s+1],T=u[s+2],_=u[a],L=u[a+1],R=u[a+2],O=u[o],j=u[o+1],F=u[o+2],H=Math.round(m),K=Math.round(v);let Q,W,ae,X,N,I,k,D;for(let U=H;U<=K;U++){if(U<E){const ee=U<m?0:(m-U)/(m-E);Q=f-(f-y)*ee,W=b-(b-_)*ee,ae=C-(C-L)*ee,X=T-(T-R)*ee}else{let ee;U>v?ee=1:E===v?ee=0:ee=(E-U)/(E-v),Q=y-(y-g)*ee,W=_-(_-O)*ee,ae=L-(L-j)*ee,X=R-(R-F)*ee}let S;U<m?S=0:U>v?S=1:S=(m-U)/(m-v),N=f-(f-g)*S,I=b-(b-O)*S,k=C-(C-j)*S,D=T-(T-F)*S;const z=Math.round(Math.min(Q,N)),oe=Math.round(Math.max(Q,N));let G=h*U+z*4;for(let ee=z;ee<=oe;ee++)S=(Q-ee)/(Q-N),S<0?S=0:S>1&&(S=1),d[G++]=W-(W-I)*S|0,d[G++]=ae-(ae-k)*S|0,d[G++]=X-(X-D)*S|0,d[G++]=255}}function VI(n,e,t){const i=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,u=o-1;for(s=0;s<l;s++){let d=s*o;for(let h=0;h<u;h++,d++)Jm(n,t,i[d],i[d+1],i[d+o],r[d],r[d+1],r[d+o]),Jm(n,t,i[d+o+1],i[d+1],i[d+o],r[d+o+1],r[d+1],r[d+o])}break;case"triangles":for(s=0,a=i.length;s<a;s+=3)Jm(n,t,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class WI extends V0{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,d=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),f=u/h,m=d/p,y={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/f,scaleY:1/m},E=h+2*2,g=p+2*2,v=i.getCanvas("mesh",E,g),b=v.context,C=b.createImageData(h,p);if(t){const _=C.data;for(let L=0,R=_.length;L<R;L+=4)_[L]=t[0],_[L+1]=t[1],_[L+2]=t[2],_[L+3]=255}for(const _ of this._figures)VI(C,_,y);return b.putImageData(C,2,2),{canvas:v.canvas,offsetX:o-2*f,offsetY:l-2*m,scaleX:f,scaleY:m}}getPattern(e,t,i,r){jy(e,this._bbox);let s;if(r===tn.SHADING)s=ne.singularValueDecompose2dScale(Ye(e));else if(s=ne.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=ne.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}const a=this._createMeshCanvas(s,r===tn.SHADING?null:this._background,t.cachedCanvases);return r!==tn.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class qI extends V0{getPattern(){return"hotpink"}}function GI(n){switch(n[0]){case"RadialAxial":return new UI(n);case"Mesh":return new WI(n);case"Dummy":return new qI}throw new Error(`Unknown IR type: ${n[0]}`)}const Xw={COLORED:1,UNCOLORED:2},Rf=class Rf{constructor(e,t,i,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:r,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),am("TilingType: "+s);const d=t[0],h=t[1],p=t[2],f=t[3],m=p-d,y=f-h,E=ne.singularValueDecompose2dScale(this.matrix),g=ne.singularValueDecompose2dScale(this.baseTransform),v=E[0]*g[0],b=E[1]*g[1];let C=m,T=y,_=!1,L=!1;const R=Math.ceil(l*v),O=Math.ceil(u*b),j=Math.ceil(m*v),F=Math.ceil(y*b);R>=j?C=l:_=!0,O>=F?T=u:L=!0;const H=this.getSizeAndScale(C,this.ctx.canvas.width,v),K=this.getSizeAndScale(T,this.ctx.canvas.height,b),Q=e.cachedCanvases.getCanvas("pattern",H.size,K.size),W=Q.context,ae=o.createCanvasGraphics(W);if(ae.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(ae,r,a),W.translate(-H.scale*d,-K.scale*h),ae.transform(H.scale,0,0,K.scale,0,0),W.save(),this.clipBbox(ae,d,h,p,f),ae.baseTransform=Ye(ae.ctx),ae.executeOperatorList(i),ae.endDrawing(),W.restore(),_||L){const X=Q.canvas;_&&(C=l),L&&(T=u);const N=this.getSizeAndScale(C,this.ctx.canvas.width,v),I=this.getSizeAndScale(T,this.ctx.canvas.height,b),k=N.size,D=I.size,U=e.cachedCanvases.getCanvas("pattern-workaround",k,D),S=U.context,z=_?Math.floor(m/l):0,oe=L?Math.floor(y/u):0;for(let G=0;G<=z;G++)for(let ee=0;ee<=oe;ee++)S.drawImage(X,k*G,D*ee,k,D,0,0,k,D);return{canvas:U.canvas,scaleX:N.scale,scaleY:I.scale,offsetX:d,offsetY:h}}return{canvas:Q.canvas,scaleX:H.scale,scaleY:K.scale,offsetX:d,offsetY:h}}getSizeAndScale(e,t,i){const r=Math.max(Rf.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,t,i,r,s){const a=r-t,o=s-i;e.ctx.rect(t,i,a,o),e.current.updateRectMinMax(Ye(e.ctx),[t,i,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const r=e.ctx,s=e.current;switch(t){case Xw.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,s.fillColor=a.fillStyle,s.strokeColor=a.strokeStyle;break;case Xw.UNCOLORED:const o=ne.makeHexColor(i[0],i[1],i[2]);r.fillStyle=o,r.strokeStyle=o,s.fillColor=o,s.strokeColor=o;break;default:throw new vI(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,r){let s=i;r!==tn.SHADING&&(s=ne.transform(s,t.baseTransform),this.matrix&&(s=ne.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};ue(Rf,"MAX_PATTERN_SIZE",3e3);let zy=Rf;function XI({src:n,srcPos:e=0,dest:t,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=rn.isLittleEndian?4278190080:255,[l,u]=a?[s,o]:[o,s],d=i>>3,h=i&7,p=n.length;t=new Uint32Array(t.buffer);let f=0;for(let m=0;m<r;m++){for(const E=e+d;e<E;e++){const g=e<p?n[e]:255;t[f++]=g&128?u:l,t[f++]=g&64?u:l,t[f++]=g&32?u:l,t[f++]=g&16?u:l,t[f++]=g&8?u:l,t[f++]=g&4?u:l,t[f++]=g&2?u:l,t[f++]=g&1?u:l}if(h===0)continue;const y=e<p?n[e++]:255;for(let E=0;E<h;E++)t[f++]=y&1<<7-E?u:l}return{srcPos:e,destPos:f}}const Yw=16,Kw=100,YI=15,Qw=10,Zw=1e3,mn=16;function KI(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,r){e.translate(i,r),this.__originalTranslate(i,r)},n.scale=function(i,r){e.scale(i,r),this.__originalScale(i,r)},n.transform=function(i,r,s,a,o,l){e.transform(i,r,s,a,o,l),this.__originalTransform(i,r,s,a,o,l)},n.setTransform=function(i,r,s,a,o,l){e.setTransform(i,r,s,a,o,l),this.__originalSetTransform(i,r,s,a,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,r,s,a,o){e.bezierCurveTo(t,i,r,s,a,o),this.__originalBezierCurveTo(t,i,r,s,a,o)},n.rect=function(t,i,r,s){e.rect(t,i,r,s),this.__originalRect(t,i,r,s)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class QI{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,i)):(r=this.canvasFactory.create(t,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Vh(n,e,t,i,r,s,a,o,l,u){const[d,h,p,f,m,y]=Ye(n);if(h===0&&p===0){const v=a*d+m,b=Math.round(v),C=o*f+y,T=Math.round(C),_=(a+l)*d+m,L=Math.abs(Math.round(_)-b)||1,R=(o+u)*f+y,O=Math.abs(Math.round(R)-T)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(f),b,T),n.drawImage(e,t,i,r,s,0,0,L,O),n.setTransform(d,h,p,f,m,y),[L,O]}if(d===0&&f===0){const v=o*p+m,b=Math.round(v),C=a*h+y,T=Math.round(C),_=(o+u)*p+m,L=Math.abs(Math.round(_)-b)||1,R=(a+l)*h+y,O=Math.abs(Math.round(R)-T)||1;return n.setTransform(0,Math.sign(h),Math.sign(p),0,b,T),n.drawImage(e,t,i,r,s,0,0,O,L),n.setTransform(d,h,p,f,m,y),[O,L]}n.drawImage(e,t,i,r,s,a,o,l,u);const E=Math.hypot(d,h),g=Math.hypot(p,f);return[E*l,g*u]}function ZI(n){const{width:e,height:t}=n;if(e>Zw||t>Zw)return null;const i=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a=new Uint8Array(s*(t+1)),o,l,u;const d=e+7&-8;let h=new Uint8Array(d*t),p=0;for(const g of n.data){let v=128;for(;v>0;)h[p++]=g&v?0:255,v>>=1}let f=0;for(p=0,h[p]!==0&&(a[0]=1,++f),l=1;l<e;l++)h[p]!==h[p+1]&&(a[l]=h[p]?2:1,++f),p++;for(h[p]!==0&&(a[l]=2,++f),o=1;o<t;o++){p=o*d,u=o*s,h[p-d]!==h[p]&&(a[u]=h[p]?1:8,++f);let g=(h[p]?4:0)+(h[p-d]?8:0);for(l=1;l<e;l++)g=(g>>2)+(h[p+1]?4:0)+(h[p-d+1]?8:0),r[g]&&(a[u+l]=r[g],++f),p++;if(h[p-d]!==h[p]&&(a[u+l]=h[p]?2:4,++f),f>i)return null}for(p=d*(t-1),u=o*s,h[p]!==0&&(a[u]=8,++f),l=1;l<e;l++)h[p]!==h[p+1]&&(a[u+l]=h[p]?4:8,++f),p++;if(h[p]!==0&&(a[u+l]=4,++f),f>i)return null;const m=new Int32Array([0,s,-1,0,-s,0,0,0,1]),y=new Path2D;for(o=0;f&&o<=t;o++){let g=o*s;const v=g+e;for(;g<v&&!a[g];)g++;if(g===v)continue;y.moveTo(g%s,o);const b=g;let C=a[g];do{const T=m[C];do g+=T;while(!a[g]);const _=a[g];_!==5&&_!==10?(C=_,a[g]=0):(C=_&51*C>>4,a[g]&=C>>2|C<<2),y.lineTo(g%s,g/s|0),a[g]||--f}while(b!==g);--o}return h=null,a=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(y),g.beginPath(),g.restore()}}class Jw{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=WA,this.textMatrixScale=1,this.fontMatrix=dy,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Bt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=ne.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=ne.applyTransform(t,e),r=ne.applyTransform(t.slice(2),e),s=ne.applyTransform([t[0],t[3]],e),a=ne.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],r[0],s[0],a[0]),this.minY=Math.min(this.minY,i[1],r[1],s[1],a[1]),this.maxX=Math.max(this.maxX,i[0],r[0],s[0],a[0]),this.maxY=Math.max(this.maxY,i[1],r[1],s[1],a[1])}updateScalingPathMinMax(e,t){ne.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,r,s,a,o,l,u,d){const h=ne.bezierBoundingBox(t,i,r,s,a,o,l,u,d);d||this.updateRectMinMax(e,h)}getPathBoundingBox(e=tn.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===tn.STROKE){t||He("Stroke bounding box must include transform.");const r=ne.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;i[0]-=s,i[1]-=a,i[2]+=s,i[3]+=a}return i}updateClipFromPath(){const e=ne.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=tn.FILL,t=null){return ne.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function eb(n,e){if(typeof ImageData<"u"&&e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,r=t%mn,s=(t-r)/mn,a=r===0?s:s+1,o=n.createImageData(i,mn);let l=0,u;const d=e.data,h=o.data;let p,f,m,y;if(e.kind===up.GRAYSCALE_1BPP){const E=d.byteLength,g=new Uint32Array(h.buffer,0,h.byteLength>>2),v=g.length,b=i+7>>3,C=4294967295,T=rn.isLittleEndian?4278190080:255;for(p=0;p<a;p++){for(m=p<s?mn:r,u=0,f=0;f<m;f++){const _=E-l;let L=0;const R=_>b?i:_*8-7,O=R&-8;let j=0,F=0;for(;L<O;L+=8)F=d[l++],g[u++]=F&128?C:T,g[u++]=F&64?C:T,g[u++]=F&32?C:T,g[u++]=F&16?C:T,g[u++]=F&8?C:T,g[u++]=F&4?C:T,g[u++]=F&2?C:T,g[u++]=F&1?C:T;for(;L<R;L++)j===0&&(F=d[l++],j=128),g[u++]=F&j?C:T,j>>=1}for(;u<v;)g[u++]=0;n.putImageData(o,0,p*mn)}}else if(e.kind===up.RGBA_32BPP){for(f=0,y=i*mn*4,p=0;p<s;p++)h.set(d.subarray(l,l+y)),l+=y,n.putImageData(o,0,f),f+=mn;p<a&&(y=i*r*4,h.set(d.subarray(l,l+y)),n.putImageData(o,0,f))}else if(e.kind===up.RGB_24BPP)for(m=mn,y=i*m,p=0;p<a;p++){for(p>=s&&(m=r,y=i*m),u=0,f=y;f--;)h[u++]=d[l++],h[u++]=d[l++],h[u++]=d[l++],h[u++]=255;n.putImageData(o,0,p*mn)}else throw new Error(`bad image kind: ${e.kind}`)}function tb(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,r=t%mn,s=(t-r)/mn,a=r===0?s:s+1,o=n.createImageData(i,mn);let l=0;const u=e.data,d=o.data;for(let h=0;h<a;h++){const p=h<s?mn:r;({srcPos:l}=XI({src:u,srcPos:l,dest:d,width:i,height:p,nonBlackColor:0})),n.putImageData(o,0,h*mn)}}function Vc(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Wh(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!Gt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function nb(n,e){if(e)return!0;const t=ne.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*Js.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const JI=["butt","round","square"],eR=["miter","round","bevel"],tR={},ib={};var na,By,Hy;const hx=class hx{constructor(e,t,i,r,s,{optionalContentConfig:a,markedContentStack:o=null},l,u){A(this,na);this.ctx=e,this.current=new Jw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new QI(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ye(this.compositeCtx))}this.ctx.save(),Wh(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ye(this.ctx)}executeOperatorList(e,t,i,r){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const u=l-o>Qw&&typeof i=="function",d=u?Date.now()+YI:0;let h=0;const p=this.commonObjs,f=this.objs;let m;for(;;){if(r!==void 0&&o===r.nextBreakPoint)return r.breakIt(o,i),o;if(m=a[o],m!==fi.dependency)this[m].apply(this,s[o]);else for(const y of s[o]){const E=y.startsWith("g_")?p:f;if(!E.has(y))return E.get(y,i),o}if(o++,o===l)return o;if(u&&++h>Qw){if(Date.now()>d)return i(),o;h=0}}}endDrawing(){w(this,na,By).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),w(this,na,Hy).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=i,l=r,u="prescale1",d,h;for(;s>2&&o>1||a>2&&l>1;){let p=o,f=l;s>2&&o>1&&(p=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/p),a>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/f),d=this.cachedCanvases.getCanvas(u,p,f),h=d.context,h.clearRect(0,0,p,f),h.drawImage(e,0,0,o,l,0,0,p,f),e=d.canvas,o=p,l=f,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:r}=e,s=this.current.fillColor,a=this.current.patternFill,o=Ye(t);let l,u,d,h;if((e.bitmap||e.data)&&e.count>1){const R=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(R),l||(l=new Map,this._cachedBitmapsMap.set(R,l));const O=l.get(u);if(O&&!a){const j=Math.round(Math.min(o[0],o[2])+o[4]),F=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:O,offsetX:j,offsetY:F}}d=O}d||(h=this.cachedCanvases.getCanvas("maskCanvas",i,r),tb(h.context,e));let p=ne.transform(o,[1/i,0,0,-1/r,0,0]);p=ne.transform(p,[1,0,0,1,0,-r]);const[f,m,y,E]=ne.getAxialAlignedBoundingBox([0,0,i,r],p),g=Math.round(y-f)||1,v=Math.round(E-m)||1,b=this.cachedCanvases.getCanvas("fillCanvas",g,v),C=b.context,T=f,_=m;C.translate(-T,-_),C.transform(...p),d||(d=this._scaleImage(h.canvas,fr(C)),d=d.img,l&&a&&l.set(u,d)),C.imageSmoothingEnabled=nb(Ye(C),e.interpolate),Vh(C,d,0,0,d.width,d.height,0,0,i,r),C.globalCompositeOperation="source-in";const L=ne.transform(fr(C),[1,0,0,1,-T,-_]);return C.fillStyle=a?s.getPattern(t,this,L,tn.FILL):s,C.fillRect(0,0,i,r),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,b.canvas)),{canvas:b.canvas,offsetX:Math.round(T),offsetY:Math.round(_)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=JI[e]}setLineJoin(e){this.ctx.lineJoin=eR[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...Ye(this.suspendedCtx)),Vc(this.suspendedCtx,s),KI(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Vc(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,r){const s=r[0],a=r[1],o=r[2]-s,l=r[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,i,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,r,s,a,o,l,u,d,h){let p=e.canvas,f=l-d,m=u-h;if(a){const E=ne.makeHexColor(...a);if(f<0||m<0||f+i>p.width||m+r>p.height){const g=this.cachedCanvases.getCanvas("maskExtension",i,r),v=g.context;v.drawImage(p,-f,-m),v.globalCompositeOperation="destination-atop",v.fillStyle=E,v.fillRect(0,0,i,r),v.globalCompositeOperation="source-over",p=g.canvas,f=m=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(f,m,i,r),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=E,e.fillRect(f,m,i,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const y=new Path2D;y.rect(l,u,i,r),t.clip(y),t.globalCompositeOperation="destination-in",t.drawImage(p,f,m,i,r,l,u,i,r),t.restore()}save(){this.inSMaskMode?(Vc(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Vc(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,r,s,a){this.ctx.transform(e,t,i,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const r=this.ctx,s=this.current;let a=s.x,o=s.y,l,u;const d=Ye(r),h=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,p=h?i.slice(0):null;for(let f=0,m=0,y=e.length;f<y;f++)switch(e[f]|0){case fi.rectangle:a=t[m++],o=t[m++];const E=t[m++],g=t[m++],v=a+E,b=o+g;r.moveTo(a,o),E===0||g===0?r.lineTo(v,b):(r.lineTo(v,o),r.lineTo(v,b),r.lineTo(a,b)),h||s.updateRectMinMax(d,[a,o,v,b]),r.closePath();break;case fi.moveTo:a=t[m++],o=t[m++],r.moveTo(a,o),h||s.updatePathMinMax(d,a,o);break;case fi.lineTo:a=t[m++],o=t[m++],r.lineTo(a,o),h||s.updatePathMinMax(d,a,o);break;case fi.curveTo:l=a,u=o,a=t[m+4],o=t[m+5],r.bezierCurveTo(t[m],t[m+1],t[m+2],t[m+3],a,o),s.updateCurvePathMinMax(d,l,u,t[m],t[m+1],t[m+2],t[m+3],a,o,p),m+=6;break;case fi.curveTo2:l=a,u=o,r.bezierCurveTo(a,o,t[m],t[m+1],t[m+2],t[m+3]),s.updateCurvePathMinMax(d,l,u,a,o,t[m],t[m+1],t[m+2],t[m+3],p),a=t[m+2],o=t[m+3],m+=4;break;case fi.curveTo3:l=a,u=o,a=t[m+2],o=t[m+3],r.bezierCurveTo(t[m],t[m+1],a,o,a,o),s.updateCurvePathMinMax(d,l,u,t[m],t[m+1],a,o,a,o,p),m+=4;break;case fi.closePath:r.closePath();break}h&&s.updateScalingPathMinMax(d,p),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&(i!=null&&i.getPattern)?(t.save(),t.strokeStyle=i.getPattern(t,this,fr(t),tn.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(t.save(),t.fillStyle=i.getPattern(t,this,fr(t),tn.FILL),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=tR}eoClip(){this.pendingClip=ib}beginText(){this.current.textMatrix=WA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}t.save(),t.beginPath();for(const i of e)t.setTransform(...i.transform),t.translate(i.x,i.y),i.addToPath(t,i.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var d;const i=this.commonObjs.get(e),r=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=i.fontMatrix||dy,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&xe("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const s=i.loadedName||"sans-serif",a=((d=i.systemFontInfo)==null?void 0:d.css)||`"${s}", ${i.fallbackName}`;let o="normal";i.black?o="900":i.bold&&(o="bold");const l=i.italic?"italic":"normal";let u=t;t<Yw?u=Yw:t>Kw&&(u=Kw),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,r,s,a){this.current.textMatrix=[e,t,i,r,s,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,i,r){const s=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,d=l&Bt.FILL_STROKE_MASK,h=!!(l&Bt.ADD_TO_PATH_FLAG),p=a.patternFill&&!o.missingFile;let f;(o.disableFontFace||h||p)&&(f=o.getPathGenerator(this.commonObjs,e)),o.disableFontFace||p?(s.save(),s.translate(t,i),s.beginPath(),f(s,u),r&&s.setTransform(...r),(d===Bt.FILL||d===Bt.FILL_STROKE)&&s.fill(),(d===Bt.STROKE||d===Bt.FILL_STROKE)&&s.stroke(),s.restore()):((d===Bt.FILL||d===Bt.FILL_STROKE)&&s.fillText(e,t,i),(d===Bt.STROKE||d===Bt.FILL_STROKE)&&s.strokeText(e,t,i)),h&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ye(s),x:t,y:i,fontSize:u,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){i=!0;break}return Ae(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,d=t.textHScale*u,h=e.length,p=i.vertical,f=p?1:-1,m=i.defaultVMetrics,y=r*t.fontMatrix[0],E=t.textRenderingMode===Bt.FILL&&!i.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),u>0?s.scale(d,-1):s.scale(d,1);let g;if(t.patternFill){s.save();const _=t.fillColor.getPattern(s,this,fr(s),tn.FILL);g=Ye(s),s.restore(),s.fillStyle=_}let v=t.lineWidth;const b=t.textMatrixScale;if(b===0||v===0){const _=t.textRenderingMode&Bt.FILL_STROKE_MASK;(_===Bt.STROKE||_===Bt.FILL_STROKE)&&(v=this.getSinglePixelWidth())}else v/=b;if(a!==1&&(s.scale(a,a),v/=a),s.lineWidth=v,i.isInvalidPDFjsFont){const _=[];let L=0;for(const R of e)_.push(R.unicode),L+=R.width;s.fillText(_.join(""),0,0),t.x+=L*y*d,s.restore(),this.compose();return}let C=0,T;for(T=0;T<h;++T){const _=e[T];if(typeof _=="number"){C+=f*_*r/1e3;continue}let L=!1;const R=(_.isSpace?l:0)+o,O=_.fontChar,j=_.accent;let F,H,K=_.width;if(p){const W=_.vmetric||m,ae=-(_.vmetric?W[1]:K*.5)*y,X=W[2]*y;K=W?-W[0]:K,F=ae/a,H=(C+X)/a}else F=C/a,H=0;if(i.remeasure&&K>0){const W=s.measureText(O).width*1e3/r*a;if(K<W&&this.isFontSubpixelAAEnabled){const ae=K/W;L=!0,s.save(),s.scale(ae,1),F/=ae}else K!==W&&(F+=(K-W)/2e3*r/a)}if(this.contentVisible&&(_.isInFont||i.missingFile)){if(E&&!j)s.fillText(O,F,H);else if(this.paintChar(O,F,H,g),j){const W=F+r*j.offset.x/a,ae=H-r*j.offset.y/a;this.paintChar(j.fontChar,W,ae,g)}}const Q=p?K*y-R*u:K*y+R*u;C+=Q,L&&s.restore()}p?t.y-=C:t.x+=C*d,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,r=i.font,s=i.fontSize,a=i.fontDirection,o=r.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,d=i.textHScale*a,h=i.fontMatrix||dy,p=e.length,f=i.textRenderingMode===Bt.INVISIBLE;let m,y,E,g;if(!(f||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,a),m=0;m<p;++m){if(y=e[m],typeof y=="number"){g=o*y*s/1e3,this.ctx.translate(g,0),i.x+=g*d;continue}const v=(y.isSpace?u:0)+l,b=r.charProcOperatorList[y.operatorListId];if(!b){xe(`Type3 character "${y.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=y,this.save(),t.scale(s,s),t.transform(...h),this.executeOperatorList(b),this.restore()),E=ne.applyTransform([y.width,0],h)[0]*s+v,t.translate(E,0),i.x+=E*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,r,s,a){this.ctx.rect(i,r,s-i,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],r=this.baseTransform||Ye(this.ctx),s={createCanvasGraphics:a=>new hx(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new zy(e,i,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=ne.makeHexColor(e,t,i)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=ne.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=GI(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,fr(t),tn.SHADING);const r=fr(t);if(r){const{width:s,height:a}=t.canvas,[o,l,u,d]=ne.getAxialAlignedBoundingBox([0,0,s,a],r);this.ctx.fillRect(o,l,u-o,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){He("Should not call beginInlineImage")}beginImageData(){He("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ye(this.ctx),t)){const i=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],i,r),this.current.updateRectMinMax(Ye(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||am("TODO: Support non-isolated groups."),e.knockout&&xe("Knockout groups not supported.");const i=Ye(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=ne.getAxialAlignedBoundingBox(e.bbox,Ye(t));const s=[0,0,t.canvas.width,t.canvas.height];r=ne.intersect(r,s)||[0,0,0,0];const a=Math.floor(r[0]),o=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-a,1),u=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(d,l,u),p=h.context;p.translate(-a,-o),p.transform(...i),e.smask?this.smaskStack.push({canvas:h.canvas,context:p,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),Vc(t,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=Ye(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=ne.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,i,r,s){if(w(this,na,By).call(this),Wh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,u]=ne.singularValueDecompose2dScale(Ye(this.ctx)),{viewportScale:d}=this,h=Math.ceil(a*this.outputScaleX*d),p=Math.ceil(o*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(h,p);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,o*u),Wh(this.ctx)}else Wh(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new Jw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),w(this,na,Hy).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=ZI(e)),r.compiled)){r.compiled(i);return}const s=this._createMaskCanvas(e),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,r=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=Ye(o);o.transform(t,i,r,s,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let d=0,h=a.length;d<h;d+=2){const p=ne.transform(l,[t,i,r,s,a[d],a[d+1]]),[f,m]=ne.applyTransform([0,0],p);o.drawImage(u.canvas,f,m)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:a,width:o,height:l,transform:u}=s,d=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=d.context;h.save();const p=this.getObject(a,s);tb(h,p),h.globalCompositeOperation="source-in",h.fillStyle=r?i.getPattern(h,this,fr(t),tn.FILL):i,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...u),t.scale(1,-1),Vh(t,d.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){xe("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){xe("Dependent image isn't ready yet");return}const a=s.width,o=s.height,l=[];for(let u=0,d=r.length;u<d;u+=2)l.push({transform:[t,0,0,i,r[u],r[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,r=this.ctx;if(this.save(),!Gt){const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none")}r.scale(1/t,-1/i);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;eb(l,e),s=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(s,fr(r));r.imageSmoothingEnabled=nb(Ye(r),e.interpolate),Vh(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;eb(l,e),r=this.applyTransferMapsToCanvas(l)}for(const s of t)i.save(),i.transform(...s.transform),i.scale(1,-1),Vh(i,r,s.x,s.y,s.w,s.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===ib?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ye(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:r,d:s}=this.ctx.getTransform();let a,o;if(i===0&&r===0){const l=Math.abs(t),u=Math.abs(s);if(l===u)if(e===0)a=o=1/l;else{const d=l*e;a=o=d<1?1/d:1}else if(e===0)a=1/l,o=1/u;else{const d=l*e,h=u*e;a=d<1?1/d:1,o=h<1?1/h:1}}else{const l=Math.abs(t*s-i*r),u=Math.hypot(t,i),d=Math.hypot(r,s);if(e===0)a=d/l,o=u/l;else{const h=e*l;a=d>h?d/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=i||1,r===1&&s===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(r,s),a.length>0){const o=Math.max(r,s);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};na=new WeakSet,By=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Hy=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}};let ml=hx;for(const n in fi)ml.prototype[n]!==void 0&&(ml.prototype[fi[n]]=ml.prototype[n]);var yd,vd;class Vr{static get workerPort(){return c(this,yd)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");x(this,yd,e)}static get workerSrc(){return c(this,vd)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");x(this,vd,e)}}yd=new WeakMap,vd=new WeakMap,A(Vr,yd,null),A(Vr,vd,"");const qh={UNKNOWN:0,DATA:1,ERROR:2},at={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _n(n){switch(n instanceof Error||typeof n=="object"&&n!==null||He('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Oo(n.message);case"MissingPDFException":return new Fo(n.message);case"PasswordException":return new hy(n.message,n.code);case"UnexpectedResponseException":return new om(n.message,n.status);case"UnknownErrorException":return new py(n.message,n.details);default:return new py(n.message,n.toString())}}var Ml,si,PS,LS,IS,vp;class su{constructor(e,t,i){A(this,si);A(this,Ml,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",w(this,si,PS).bind(this),{signal:c(this,Ml).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,i,r){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const d=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:u.desiredSize},r),d.promise},pull:u=>{const d=Promise.withResolvers();return this.streamControllers[s].pullCall=d,l.postMessage({sourceName:a,targetName:o,stream:at.PULL,streamId:s,desiredSize:u.desiredSize}),d.promise},cancel:u=>{xt(u instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[s].cancelCall=d,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:at.CANCEL,streamId:s,reason:_n(u)}),d.promise}},i)}destroy(){var e;(e=c(this,Ml))==null||e.abort(),x(this,Ml,null)}}Ml=new WeakMap,si=new WeakSet,PS=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){w(this,si,IS).call(this,e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===qh.DATA)r.resolve(e.data);else if(e.callback===qh.ERROR)r.reject(_n(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;new Promise(function(a){a(t(e.data))}).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:qh.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:qh.ERROR,callbackId:e.callbackId,reason:_n(a)})});return}if(e.streamId){w(this,si,LS).call(this,e);return}t(e.data)},LS=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,d=1,h){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=d,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:at.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:at.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){xt(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:at.ERROR,streamId:t,reason:_n(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,new Promise(function(u){u(o(e.data,l))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:at.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:at.START_COMPLETE,streamId:t,reason:_n(u)})})},IS=function(e){const t=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case at.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(_n(e.reason));break;case at.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(_n(e.reason));break;case at.PULL:if(!o){s.postMessage({sourceName:i,targetName:r,stream:at.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,new Promise(function(l){var u;l((u=o.onPull)==null?void 0:u.call(o))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:at.PULL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:at.PULL_COMPLETE,streamId:t,reason:_n(l)})});break;case at.ENQUEUE:if(xt(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case at.CLOSE:if(xt(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),w(this,si,vp).call(this,a,t);break;case at.ERROR:xt(a,"error should have stream controller"),a.controller.error(_n(e.reason)),w(this,si,vp).call(this,a,t);break;case at.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(_n(e.reason)),w(this,si,vp).call(this,a,t);break;case at.CANCEL:if(!o)break;new Promise(function(l){var u;l((u=o.onCancel)==null?void 0:u.call(o,_n(e.reason)))}).then(function(){s.postMessage({sourceName:i,targetName:r,stream:at.CANCEL_COMPLETE,streamId:t,success:!0})},function(l){s.postMessage({sourceName:i,targetName:r,stream:at.CANCEL_COMPLETE,streamId:t,reason:_n(l)})}),o.sinkCapability.reject(_n(e.reason)),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},vp=async function(e,t){var i,r,s;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Ua,xd;class nR{constructor({parsedData:e,rawData:t}){A(this,Ua);A(this,xd);x(this,Ua,e),x(this,xd,t)}getRaw(){return c(this,xd)}get(e){return c(this,Ua).get(e)??null}getAll(){return O0(c(this,Ua))}has(e){return c(this,Ua).has(e)}}Ua=new WeakMap,xd=new WeakMap;const qo=Symbol("INTERNAL");var wd,bd,kd,Nl;class iR{constructor(e,{name:t,intent:i,usage:r,rbGroups:s}){A(this,wd,!1);A(this,bd,!1);A(this,kd,!1);A(this,Nl,!0);x(this,wd,!!(e&Fn.DISPLAY)),x(this,bd,!!(e&Fn.PRINT)),this.name=t,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(c(this,kd))return c(this,Nl);if(!c(this,Nl))return!1;const{print:e,view:t}=this.usage;return c(this,wd)?(t==null?void 0:t.viewState)!=="OFF":c(this,bd)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==qo&&He("Internal method `_setVisible` called."),x(this,kd,i),x(this,Nl,t)}}wd=new WeakMap,bd=new WeakMap,kd=new WeakMap,Nl=new WeakMap;var Es,Le,Dl,Fl,Ad,$y;class rR{constructor(e,t=Fn.DISPLAY){A(this,Ad);A(this,Es,null);A(this,Le,new Map);A(this,Dl,null);A(this,Fl,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,x(this,Fl,e.order);for(const i of e.groups)c(this,Le).set(i.id,new iR(t,i));if(e.baseState==="OFF")for(const i of c(this,Le).values())i._setVisible(qo,!1);for(const i of e.on)c(this,Le).get(i)._setVisible(qo,!0);for(const i of e.off)c(this,Le).get(i)._setVisible(qo,!1);x(this,Dl,this.getHash())}}isVisible(e){if(c(this,Le).size===0)return!0;if(!e)return am("Optional content group not defined."),!0;if(e.type==="OCG")return c(this,Le).has(e.id)?c(this,Le).get(e.id).visible:(xe(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return w(this,Ad,$y).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!c(this,Le).has(t))return xe(`Optional content group not found: ${t}`),!0;if(c(this,Le).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!c(this,Le).has(t))return xe(`Optional content group not found: ${t}`),!0;if(!c(this,Le).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!c(this,Le).has(t))return xe(`Optional content group not found: ${t}`),!0;if(!c(this,Le).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!c(this,Le).has(t))return xe(`Optional content group not found: ${t}`),!0;if(c(this,Le).get(t).visible)return!1}return!0}return xe(`Unknown optional content policy ${e.policy}.`),!0}return xe(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var s;const r=c(this,Le).get(e);if(!r){xe(`Optional content group not found: ${e}`);return}if(i&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const o of a)o!==e&&((s=c(this,Le).get(o))==null||s._setVisible(qo,!1,!0));r._setVisible(qo,!!t,!0),x(this,Es,null)}setOCGState({state:e,preserveRB:t}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=c(this,Le).get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}x(this,Es,null)}get hasInitialVisibility(){return c(this,Dl)===null||this.getHash()===c(this,Dl)}getOrder(){return c(this,Le).size?c(this,Fl)?c(this,Fl).slice():[...c(this,Le).keys()]:null}getGroups(){return c(this,Le).size>0?O0(c(this,Le)):null}getGroup(e){return c(this,Le).get(e)||null}getHash(){if(c(this,Es)!==null)return c(this,Es);const e=new vS;for(const[t,i]of c(this,Le))e.update(`${t}:${i.visible}`);return x(this,Es,e.hexdigest())}}Es=new WeakMap,Le=new WeakMap,Dl=new WeakMap,Fl=new WeakMap,Ad=new WeakSet,$y=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let r=1;r<t;r++){const s=e[r];let a;if(Array.isArray(s))a=w(this,Ad,$y).call(this,s);else if(c(this,Le).has(s))a=c(this,Le).get(s).visible;else return xe(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"};class sR{constructor(e,{disableRange:t=!1,disableStream:i=!1}){xt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(i),!0)});xt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,r,s;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){xt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new aR(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new oR(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class aR{constructor(e,t,i=!1,r=null){this._stream=e,this._done=i||!1,this._filename=B0(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class oR{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function lR(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let d=o(t);return d=unescape(d),d=l(d),d=u(d),s(d)}if(t=a(n),t){const d=u(t);return s(d)}if(t=i("filename","i").exec(n),t){t=t[1];let d=o(t);return d=u(d),s(d)}function i(d,h){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(d,h){if(d){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const p=new TextDecoder(d,{fatal:!0}),f=lm(h);h=p.decode(f),e=!1}catch{}}return h}function s(d){return e&&/[\x80-\xff]/.test(d)&&(d=r("utf-8",d),e&&(d=r("iso-8859-1",d))),d}function a(d){const h=[];let p;const f=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=f.exec(d))!==null;){let[,y,E,g]=p;if(y=parseInt(y,10),y in h){if(y===0)break;continue}h[y]=[E,g]}const m=[];for(let y=0;y<h.length&&y in h;++y){let[E,g]=h[y];g=o(g),E&&(g=unescape(g),y===0&&(g=l(g))),m.push(g)}return m.join("")}function o(d){if(d.startsWith('"')){const h=d.slice(1).split('\\"');for(let p=0;p<h.length;++p){const f=h[p].indexOf('"');f!==-1&&(h[p]=h[p].slice(0,f),h.length=p+1),h[p]=h[p].replaceAll(/\\(.)/g,"$1")}d=h.join('"')}return d}function l(d){const h=d.indexOf("'");if(h===-1)return d;const p=d.slice(0,h),m=d.slice(h+1).replace(/^[^']*'/,"");return r(p,m)}function u(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,p,f,m){if(f==="q"||f==="Q")return m=m.replaceAll("_"," "),m=m.replaceAll(/=([0-9a-fA-F]{2})/g,function(y,E){return String.fromCharCode(parseInt(E,16))}),r(p,m);try{m=atob(m)}catch{}return r(p,m)})}return""}function W0(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const r=e[i];r!==void 0&&t.append(i,r)}return t}function q0({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(n.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function G0(n){const e=n.get("Content-Disposition");if(e){let t=lR(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(B0(t))return t}return null}function dm(n,e){return n===404||n===0&&e.startsWith("file:")?new Fo('Missing PDF "'+e+'".'):new om(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function RS(n){return n===200||n===206}function MS(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function NS(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(xe(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class rb{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=W0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return xt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new cR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new uR(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class cR{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),r=t.url;fetch(r,MS(i,this._withCredentials,this._abortController)).then(s=>{if(!RS(s.status))throw dm(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=q0({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=G0(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Oo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:NS(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class uR{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${i-1}`);const a=r.url;fetch(a,MS(s,this._withCredentials,this._abortController)).then(o=>{if(!RS(o.status))throw dm(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:NS(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const eg=200,tg=206;function dR(n){const e=n.response;return typeof e!="string"?e:lm(e).buffer}class hR{constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=W0(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,i){const r={begin:e,end:t};for(const s in i)r[s]=i[s];return this.request(r)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=tg):r.expectedStatus=eg,t.responseType="arraybuffer",e.onError&&(t.onerror=function(s){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var r;const i=this.pendingRequests[e];i&&((r=i.onProgress)==null||r.call(i,t))}onStateChange(e,t){var l,u,d;const i=this.pendingRequests[e];if(!i)return;const r=i.xhr;if(r.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){(l=i.onError)==null||l.call(i,r.status);return}const s=r.status||eg;if(!(s===eg&&i.expectedStatus===tg)&&s!==i.expectedStatus){(u=i.onError)==null||u.call(i,r.status);return}const o=dR(r);if(s===tg){const h=r.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);i.onDone({begin:parseInt(p[1],10),chunk:o})}else o?i.onDone({begin:0,chunk:o}):(d=i.onError)==null||d.call(i,r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class pR{constructor(e){this._source=e,this._manager=new hR(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return xt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new fR(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new mR(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class fR{constructor(e,t){this._manager=e;const i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(i),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),i=new Headers(t.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...l]=a.split(": ");return[o,l.join(": ")]})),{allowRangeRequests:r,suggestedLength:s}=q0({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=G0(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=dm(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mR{constructor(e,t,i){this._manager=e;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=dm(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const gR=/^[a-z][a-z0-9\-+.]+:/i;function yR(n){if(gR.test(n))return new URL(n);const e=ea.get("url");return new URL(e.pathToFileURL(n))}function DS(n,e,t){return n.protocol==="http:"?ea.get("http").request(n,{headers:e},t):ea.get("https").request(n,{headers:e},t)}class vR{constructor(e){this.source=e,this.url=yR(e.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=W0(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return xt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new bR(this):new xR(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=this.isFsUrl?new kR(this,e,t):new wR(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class FS{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Oo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class OS{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class xR extends FS{constructor(e){super(e);const t=Object.fromEntries(e.headers),i=r=>{if(r.statusCode===404){const l=new Fo(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(r);const s=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=q0({responseHeaders:s,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=G0(s)};this._request=DS(this._url,t,i),this._request.on("error",r=>{this._storedError=r,this._headersCapability.reject(r)}),this._request.end()}}class wR extends OS{constructor(e,t,i){super(e);const r=Object.fromEntries(e.headers);r.Range=`bytes=${t}-${i-1}`;const s=a=>{if(a.statusCode===404){const o=new Fo(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=DS(this._url,r,s),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class bR extends FS{constructor(e){super(e);const t=ea.get("fs");t.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(t.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=new Fo(`Missing PDF "${this._url}".`)),this._storedError=i,this._headersCapability.reject(i)})}}class kR extends OS{constructor(e,t,i){super(e);const r=ea.get("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}}const AR=1e5,cn=30,SR=.8;var Jb,_s,pn,Sd,Ed,Va,_r,_d,Cd,Wa,Ol,jl,Cs,zl,Td,Bl,qa,Pd,Ld,Ga,Xa,Id,Ts,Hl,ts,jS,zS,Uy,$n,xp,Vy,BS,HS;const ft=class ft{constructor({textContentSource:e,container:t,viewport:i}){A(this,ts);A(this,_s,Promise.withResolvers());A(this,pn,null);A(this,Sd,!1);A(this,Ed,!!((Jb=globalThis.FontInspector)!=null&&Jb.enabled));A(this,Va,null);A(this,_r,null);A(this,_d,0);A(this,Cd,0);A(this,Wa,null);A(this,Ol,null);A(this,jl,0);A(this,Cs,0);A(this,zl,Object.create(null));A(this,Td,[]);A(this,Bl,null);A(this,qa,[]);A(this,Pd,new WeakMap);A(this,Ld,null);var l;if(e instanceof ReadableStream)x(this,Bl,e);else if(typeof e=="object")x(this,Bl,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');x(this,pn,x(this,Ol,t)),x(this,Cs,i.scale*(globalThis.devicePixelRatio||1)),x(this,jl,i.rotation),x(this,_r,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=i.rawDims;x(this,Ld,[1,0,0,-1,-a,o+s]),x(this,Cd,r),x(this,_d,s),w(l=ft,$n,BS).call(l),To(t,i),c(this,_s).promise.finally(()=>{c(ft,Hl).delete(this),x(this,_r,null),x(this,zl,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=rn.platform;return Ae(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{c(this,Wa).read().then(({value:t,done:i})=>{if(i){c(this,_s).resolve();return}c(this,Va)??x(this,Va,t.lang),Object.assign(c(this,zl),t.styles),w(this,ts,jS).call(this,t.items),e()},c(this,_s).reject)};return x(this,Wa,c(this,Bl).getReader()),c(ft,Hl).add(this),e(),c(this,_s).promise}update({viewport:e,onBefore:t=null}){var s;const i=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==c(this,jl)&&(t==null||t(),x(this,jl,r),To(c(this,Ol),{rotation:r})),i!==c(this,Cs)){t==null||t(),x(this,Cs,i);const a={div:null,properties:null,ctx:w(s=ft,$n,xp).call(s,c(this,Va))};for(const o of c(this,qa))a.properties=c(this,Pd).get(o),a.div=o,w(this,ts,Uy).call(this,a)}}cancel(){var t;const e=new Oo("TextLayer task cancelled.");(t=c(this,Wa))==null||t.cancel(e).catch(()=>{}),x(this,Wa,null),c(this,_s).reject(e)}get textDivs(){return c(this,qa)}get textContentItemsStr(){return c(this,Td)}static cleanup(){if(!(c(this,Hl).size>0)){c(this,Ga).clear();for(const{canvas:e}of c(this,Xa).values())e.remove();c(this,Xa).clear()}}};_s=new WeakMap,pn=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,Va=new WeakMap,_r=new WeakMap,_d=new WeakMap,Cd=new WeakMap,Wa=new WeakMap,Ol=new WeakMap,jl=new WeakMap,Cs=new WeakMap,zl=new WeakMap,Td=new WeakMap,Bl=new WeakMap,qa=new WeakMap,Pd=new WeakMap,Ld=new WeakMap,Ga=new WeakMap,Xa=new WeakMap,Id=new WeakMap,Ts=new WeakMap,Hl=new WeakMap,ts=new WeakSet,jS=function(e){var r,s;if(c(this,Sd))return;(s=c(this,_r)).ctx??(s.ctx=w(r=ft,$n,xp).call(r,c(this,Va)));const t=c(this,qa),i=c(this,Td);for(const a of e){if(t.length>AR){xe("Ignoring additional textDivs for performance reasons."),x(this,Sd,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=c(this,pn);x(this,pn,document.createElement("span")),c(this,pn).classList.add("markedContent"),a.id!==null&&c(this,pn).setAttribute("id",`${a.id}`),o.append(c(this,pn))}else a.type==="endMarkedContent"&&x(this,pn,c(this,pn).parentNode);continue}i.push(a.str),w(this,ts,zS).call(this,a)}},zS=function(e){var y;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};c(this,qa).push(t);const r=ne.transform(c(this,Ld),e.transform);let s=Math.atan2(r[1],r[0]);const a=c(this,zl)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=c(this,Ed)&&a.fontSubstitution||a.fontFamily;o=ft.fontFamilyMap.get(o)||o;const l=Math.hypot(r[2],r[3]),u=l*w(y=ft,$n,HS).call(y,o,c(this,Va));let d,h;s===0?(d=r[4],h=r[5]-u):(d=r[4]+u*Math.sin(s),h=r[5]-u*Math.cos(s));const p="calc(var(--scale-factor)*",f=t.style;c(this,pn)===c(this,Ol)?(f.left=`${(100*d/c(this,Cd)).toFixed(2)}%`,f.top=`${(100*h/c(this,_d)).toFixed(2)}%`):(f.left=`${p}${d.toFixed(2)}px)`,f.top=`${p}${h.toFixed(2)}px)`),f.fontSize=`${p}${(c(ft,Ts)*l).toFixed(2)}px)`,f.fontFamily=o,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,c(this,Ed)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let m=!1;if(e.str.length>1)m=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const E=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);E!==g&&Math.max(E,g)/Math.min(E,g)>1.5&&(m=!0)}if(m&&(i.canvasWidth=a.vertical?e.height:e.width),c(this,Pd).set(t,i),c(this,_r).div=t,c(this,_r).properties=i,w(this,ts,Uy).call(this,c(this,_r)),i.hasText&&c(this,pn).append(t),i.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),c(this,pn).append(E)}},Uy=function(e){var o;const{div:t,properties:i,ctx:r}=e,{style:s}=t;let a="";if(c(ft,Ts)>1&&(a=`scale(${1/c(ft,Ts)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:d}=i;w(o=ft,$n,Vy).call(o,r,d*c(this,Cs),l);const{width:h}=r.measureText(t.textContent);h>0&&(a=`scaleX(${u*c(this,Cs)/h}) ${a}`)}i.angle!==0&&(a=`rotate(${i.angle}deg) ${a}`),a.length>0&&(s.transform=a)},$n=new WeakSet,xp=function(e=null){let t=c(this,Xa).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Xa).set(e,t),c(this,Id).set(t,{size:0,family:""})}return t},Vy=function(e,t,i){const r=c(this,Id).get(e);t===r.size&&i===r.family||(e.font=`${t}px ${i}`,r.size=t,r.family=i)},BS=function(){if(c(this,Ts)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),x(this,Ts,e.getBoundingClientRect().height),e.remove()},HS=function(e,t){const i=c(this,Ga).get(e);if(i)return i;const r=w(this,$n,xp).call(this,t);r.canvas.width=r.canvas.height=cn,w(this,$n,Vy).call(this,r,cn,e);const s=r.measureText("");let a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){const d=a/(a+o);return c(this,Ga).set(e,d),r.canvas.width=r.canvas.height=0,d}r.strokeStyle="red",r.clearRect(0,0,cn,cn),r.strokeText("g",0,0);let l=r.getImageData(0,0,cn,cn).data;o=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){o=Math.ceil(d/4/cn);break}r.clearRect(0,0,cn,cn),r.strokeText("A",0,cn),l=r.getImageData(0,0,cn,cn).data,a=0;for(let d=0,h=l.length;d<h;d+=4)if(l[d]>0){a=cn-Math.floor(d/4/cn);break}r.canvas.width=r.canvas.height=0;const u=a?a/(a+o):SR;return c(this,Ga).set(e,u),u},A(ft,$n),A(ft,Ga,new Map),A(ft,Xa,new Map),A(ft,Id,new WeakMap),A(ft,Ts,null),A(ft,Hl,new Set);let Gu=ft;class Xu{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function r(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(Xu.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const u of s.children)r(u)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const ER=65536,_R=100,CR=5e3,TR=Gt?BI:OI,PR=Gt?HI:AS,LR=Gt?zI:jI,IR=Gt?$I:CS;function RR(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new Wy,{docId:t}=e,i=n.url?MR(n.url):null,r=n.data?NR(n.data):null,s=n.httpHeaders||null,a=n.withCredentials===!0,o=n.password??null,l=n.range instanceof $S?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:ER;let d=n.worker instanceof gl?n.worker:null;const h=n.verbosity,p=typeof n.docBaseUrl=="string"&&!um(n.docBaseUrl)?n.docBaseUrl:null,f=typeof n.cMapUrl=="string"?n.cMapUrl:null,m=n.cMapPacked!==!1,y=n.CMapReaderFactory||PR,E=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,g=n.StandardFontDataFactory||IR,v=n.stopAtErrors!==!0,b=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,C=n.isEvalSupported!==!1,T=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Gt,_=typeof n.isChrome=="boolean"?n.isChrome:!rn.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),L=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,R=typeof n.disableFontFace=="boolean"?n.disableFontFace:Gt,O=n.fontExtraProperties===!0,j=n.enableXfa===!0,F=n.ownerDocument||globalThis.document,H=n.disableRange===!0,K=n.disableStream===!0,Q=n.disableAutoFetch===!0,W=n.pdfBug===!0,ae=n.CanvasFactory||TR,X=n.FilterFactory||LR,N=n.enableHWA===!0,I=l?l.length:n.length??NaN,k=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Gt&&!R,D=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:y===AS&&g===CS&&f&&E&&Zc(f,document.baseURI)&&Zc(E,document.baseURI);n.canvasFactory&&qw("`canvasFactory`-instance option, please use `CanvasFactory` instead."),n.filterFactory&&qw("`filterFactory`-instance option, please use `FilterFactory` instead.");const U=null;fI(h);const S={canvasFactory:new ae({ownerDocument:F,enableHWA:N}),filterFactory:new X({docId:t,ownerDocument:F}),cMapReaderFactory:D?null:new y({baseUrl:f,isCompressed:m}),standardFontDataFactory:D?null:new g({baseUrl:E})};if(!d){const G={verbosity:h,port:Vr.workerPort};d=G.port?gl.fromPort(G):new gl(G),e._worker=d}const z={docId:t,apiVersion:"4.8.69",data:r,password:o,disableAutoFetch:Q,rangeChunkSize:u,length:I,docBaseUrl:p,enableXfa:j,evaluatorOptions:{maxImageSize:b,disableFontFace:R,ignoreErrors:v,isEvalSupported:C,isOffscreenCanvasSupported:T,isChrome:_,canvasMaxAreaInBytes:L,fontExtraProperties:O,useSystemFonts:k,cMapUrl:D?f:null,standardFontDataUrl:D?E:null}},oe={disableFontFace:R,fontExtraProperties:O,ownerDocument:F,pdfBug:W,styleElement:U,loadingParams:{disableAutoFetch:Q,enableXfa:j}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const G=d.messageHandler.sendWithPromise("GetDocRequest",z,r?[r.buffer]:null);let ee;if(l)ee=new sR(l,{disableRange:H,disableStream:K});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");let pe;Gt?pe=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&Zc(i)?rb:vR:pe=Zc(i)?rb:pR,ee=new pe({url:i,length:I,httpHeaders:s,withCredentials:a,rangeChunkSize:u,disableRange:H,disableStream:K})}return G.then(pe=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const et=new su(t,pe,d.port),We=new jR(et,e,ee,oe,S);e._transport=We,et.send("Ready",null)})}).catch(e._capability.reject),e}function MR(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(Gt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function NR(n){if(Gt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return lm(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function sb(n){return typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0}var Mf;const Nf=class Nf{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${Qt(Nf,Mf)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,i;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};Mf=new WeakMap,A(Nf,Mf,0);let Wy=Nf;class $S{constructor(e,t,i=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){He("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class DR{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Ae(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ps,Cr,ti,Go,wp;class FR{constructor(e,t,i,r=!1){A(this,ti);A(this,Ps,null);A(this,Cr,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=r?new Ww:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new US,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new yh({viewBox:this.view,scale:e,rotation:t,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Ae(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:r=ps.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:h=!1}){var C,T;(C=this._stats)==null||C.time("Overall");const p=this._transport.getRenderingIntent(i,r,d,h),{renderingIntent:f,cacheKey:m}=p;x(this,Cr,!1),w(this,ti,wp).call(this),o||(o=this._transport.getOptionalContentConfig(f));let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const E=!!(f&Fn.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(p));const g=_=>{var L;y.renderTasks.delete(v),(this._maybeCleanupAfterRender||E)&&x(this,Cr,!0),w(this,ti,Go).call(this,!E),_?(v.capability.reject(_),this._abortOperatorList({intentState:y,reason:_ instanceof Error?_:new Error(_)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(L=globalThis.Stats)!=null&&L.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},v=new Gy({callback:g,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:u});(y.renderTasks||(y.renderTasks=new Set)).add(v);const b=v.task;return Promise.all([y.displayReadyCapability.promise,o]).then(([_,L])=>{var R;if(this.destroyed){g();return}if((R=this._stats)==null||R.time("Rendering"),!(L.renderingIntent&f))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");v.initializeGraphics({transparency:_,optionalContentConfig:L}),v.operatorListChanged()}).catch(g),b}getOperatorList({intent:e="display",annotationMode:t=ps.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){var u;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,i,r,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Xu.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,r){function s(){a.read().then(function({value:l,done:u}){if(u){i(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},r)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),x(this,Cr,!1),w(this,ti,wp).call(this),Promise.all(e)}cleanup(e=!1){x(this,Cr,!0);const t=w(this,ti,Go).call(this,!1);return e&&t&&this._stats&&(this._stats=new Ww),t}_startRenderPage(e,t){var r,s;const i=this._intentStates.get(t);i&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=i.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let i=0,r=e.length;i<r;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&w(this,ti,Go).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const d=()=>{l.read().then(({value:h,done:p})=>{if(p){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),d())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const p of u.renderTasks)p.operatorListChanged();w(this,ti,Go).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};d()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof z0){let r=_R;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Oo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}Ps=new WeakMap,Cr=new WeakMap,ti=new WeakSet,Go=function(e=!1){if(w(this,ti,wp).call(this),!c(this,Cr)||this.destroyed)return!1;if(e)return x(this,Ps,setTimeout(()=>{x(this,Ps,null),w(this,ti,Go).call(this,!1)},CR)),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),x(this,Cr,!1),!0},wp=function(){c(this,Ps)&&(clearTimeout(c(this,Ps)),x(this,Ps,null))};var Tr,Df;class OR{constructor(){A(this,Tr,new Map);A(this,Df,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};c(this,Df).then(()=>{for(const[r]of c(this,Tr))r.call(this,i)})}addEventListener(e,t,i=null){let r=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:s}=i;if(s.aborted){xe("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}c(this,Tr).set(t,r)}removeEventListener(e,t){const i=c(this,Tr).get(t);i==null||i(),c(this,Tr).delete(t)}terminate(){for(const[,e]of c(this,Tr))e==null||e();c(this,Tr).clear()}}Tr=new WeakMap,Df=new WeakMap;var Ff,Ya,Ka,$l,bp,Ul,kp;const Ue=class Ue{constructor({name:e=null,port:t=null,verbosity:i=mI()}={}){A(this,$l);var r;if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=c(Ue,Ka))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(c(Ue,Ka)||x(Ue,Ka,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return Gt?Promise.all([ea.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new su("main","worker",e),this._messageHandler.on("ready",function(){}),w(this,$l,bp).call(this)}_initialize(){if(c(Ue,Ya)||c(Ue,Ul,kp)){this._setupFakeWorker();return}let{workerSrc:e}=Ue;try{Ue._isSameOrigin(window.location.href,e)||(e=Ue._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new su("main","worker",t),r=()=>{s.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){r();return}this._messageHandler=i,this._port=t,this._webWorker=t,w(this,$l,bp).call(this)}),i.on("ready",o=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{am("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Ue,Ya)||(xe("Setting up fake worker."),x(Ue,Ya,!0)),Ue._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new OR;this._port=t;const i=`fake${Qt(Ue,Ff)._++}`,r=new su(i+"_worker",i,t);e.setup(r,t),this._messageHandler=new su(i,i+"_worker",t),w(this,$l,bp).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(e=c(Ue,Ka))==null||e.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){var i;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(i=c(this,Ka))==null?void 0:i.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ue(e)}static get workerSrc(){if(Vr.workerSrc)return Vr.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Ae(this,"_setupFakeWorkerGlobal",(async()=>c(this,Ul,kp)?c(this,Ul,kp):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ff=new WeakMap,Ya=new WeakMap,Ka=new WeakMap,$l=new WeakSet,bp=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Ul=new WeakSet,kp=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},A(Ue,Ul),A(Ue,Ff,0),A(Ue,Ya,!1),A(Ue,Ka),Gt&&(x(Ue,Ya,!0),Vr.workerSrc||(Vr.workerSrc="./pdf.worker.mjs")),Ue._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const r=new URL(t,i);return i.origin===r.origin},Ue._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let gl=Ue;var Pr,Zi,Vl,Wl,Ji,Qa,au;class jR{constructor(e,t,i,r,s){A(this,Qa);A(this,Pr,new Map);A(this,Zi,new Map);A(this,Vl,new Map);A(this,Wl,new Map);A(this,Ji,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new US,this.fontLoader=new DI({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Ae(this,"annotationStorage",new U0)}getRenderingIntent(e,t=ps.ENABLE,i=null,r=!1,s=!1){let a=Fn.DISPLAY,o=Ny;switch(e){case"any":a=Fn.ANY;break;case"display":break;case"print":a=Fn.PRINT;break;default:xe(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Fn.PRINT&&i instanceof wS?i:this.annotationStorage;switch(t){case ps.DISABLE:a+=Fn.ANNOTATIONS_DISABLE;break;case ps.ENABLE:break;case ps.ENABLE_FORMS:a+=Fn.ANNOTATIONS_FORMS;break;case ps.ENABLE_STORAGE:a+=Fn.ANNOTATIONS_STORAGE,o=l.serializable;break;default:xe(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Fn.IS_EDITING),s&&(a+=Fn.OPLIST);const{ids:u,hash:d}=l.modifiedIds,h=[a,o.hash,d];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=c(this,Ji))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of c(this,Zi).values())e.push(r._destroy());c(this,Zi).clear(),c(this,Vl).clear(),c(this,Wl).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Pr).clear(),this.filterFactory.destroy(),Gu.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Oo("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,r)=>{xt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}xt(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(i,r)=>{xt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){r.close();return}xt(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new DR(i,this))}),e.on("DocException",function(i){let r;switch(i.name){case"PasswordException":r=new hy(i.message,i.code);break;case"InvalidPDFException":r=new qA(i.message);break;case"MissingPDFException":r=new Fo(i.message);break;case"UnexpectedResponseException":r=new om(i.message,i.status);break;case"UnknownErrorException":r=new py(i.message,i.details);break;default:He("DocException - expected a valid Error.")}t._capability.reject(r)}),e.on("PasswordRequest",i=>{if(x(this,Ji,Promise.withResolvers()),t.onPassword){const r=s=>{s instanceof Error?c(this,Ji).reject(s):c(this,Ji).resolve({password:s})};try{t.onPassword(r,i.code)}catch(s){c(this,Ji).reject(s)}}else c(this,Ji).reject(new hy(i.message,i.code));return c(this,Ji).promise}),e.on("DataLoaded",i=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;c(this,Zi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{var a;if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in s){const f=s.error;xe(`Error during font loading: ${f}`),this.commonObjs.resolve(i,f);break}const d=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(f,m)=>globalThis.FontInspector.fontAdded(f,m):null,h=new FI(s,{disableFontFace:o,inspectFont:d});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(i,h)});break;case"CopyLocalImage":const{imageRef:p}=s;xt(p,"The imageRef must be defined.");for(const f of c(this,Zi).values())for(const[,m]of f.objs)if((m==null?void 0:m.ref)===p)return m.dataLen?(this.commonObjs.resolve(i,structuredClone(m)),m.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,a])=>{var l;if(this.destroyed)return;const o=c(this,Zi).get(r);if(!o.objs.has(i)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":o.objs.resolve(i,a),(a==null?void 0:a.dataLen)>uI&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&xe("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=c(this,Vl).get(t);if(i)return i;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&c(this,Wl).set(s.refStr,e);const a=new FR(t,s,this,this._params.pdfBug);return c(this,Zi).set(t,a),a});return c(this,Vl).set(t,r),r}getPageIndex(e){return sb(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return w(this,Qa,au).call(this,"GetFieldObjects")}hasJSActions(){return w(this,Qa,au).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return w(this,Qa,au).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return w(this,Qa,au).call(this,"GetOptionalContentConfig").then(t=>new rR(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=c(this,Pr).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,a;return{info:r[0],metadata:r[1]?new nR(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return c(this,Pr).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of c(this,Zi).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),c(this,Pr).clear(),this.filterFactory.destroy(!0),Gu.cleanup()}}cachedPageNumber(e){if(!sb(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return c(this,Wl).get(t)??null}}Pr=new WeakMap,Zi=new WeakMap,Vl=new WeakMap,Wl=new WeakMap,Ji=new WeakMap,Qa=new WeakSet,au=function(e,t=null){const i=c(this,Pr).get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,t);return c(this,Pr).set(e,r),r};const Gh=Symbol("INITIAL_DATA");var wi,Rd,qy;class US{constructor(){A(this,Rd);A(this,wi,Object.create(null))}get(e,t=null){if(t){const r=w(this,Rd,qy).call(this,e);return r.promise.then(()=>t(r.data)),null}const i=c(this,wi)[e];if(!i||i.data===Gh)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=c(this,wi)[e];return!!t&&t.data!==Gh}resolve(e,t=null){const i=w(this,Rd,qy).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in c(this,wi)){const{data:i}=c(this,wi)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}x(this,wi,Object.create(null))}*[Symbol.iterator](){for(const e in c(this,wi)){const{data:t}=c(this,wi)[e];t!==Gh&&(yield[e,t])}}}wi=new WeakMap,Rd=new WeakSet,qy=function(e){var t;return(t=c(this,wi))[e]||(t[e]={...Promise.withResolvers(),data:Gh})};var Ls;class zR{constructor(e){A(this,Ls,null);x(this,Ls,e),this.onContinue=null}get promise(){return c(this,Ls).capability.promise}cancel(e=0){c(this,Ls).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=c(this,Ls).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=c(this,Ls);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}Ls=new WeakMap;var Is,Za;const wa=class wa{constructor({callback:e,params:t,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:d=!1,pdfBug:h=!1,pageColors:p=null}){A(this,Is,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new zR(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(c(wa,Za).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(wa,Za).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:r,transform:s,background:a}=this.params;this.gfx=new ml(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var i;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),c(this,Is)&&(window.cancelAnimationFrame(c(this,Is)),x(this,Is,null)),c(wa,Za).delete(this._canvas),this.callback(e||new z0(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?x(this,Is,window.requestAnimationFrame(()=>{x(this,Is,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(wa,Za).delete(this._canvas),this.callback())))}};Is=new WeakMap,Za=new WeakMap,A(wa,Za,new WeakSet);let Gy=wa;const BR="4.8.69",HR="3634dab10";function ab(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Wc(n){return Math.max(0,Math.min(255,255*n))}class ob{static CMYK_G([e,t,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Wc(e),[e,e,e]}static G_HTML([e]){const t=ab(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Wc)}static RGB_HTML(e){return`#${e.map(ab).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,i,r]){return[Wc(1-Math.min(1,e+r)),Wc(1-Math.min(1,i+r)),Wc(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const r=1-e,s=1-t,a=1-i,o=Math.min(r,s,a);return["CMYK",r,s,a,o]}}class $R{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){He("Abstract method `_createSVG` called.")}}class X0 extends $R{_createSVG(e){return document.createElementNS(mr,e)}}class VS{static setupStorage(e,t,i,r,s){const a=r.getValue(t,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:r,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,t,i)}static render(e){var h,p;const t=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const f=document.createTextNode(r.value);a.append(f),o&&Xu.shouldBuildText(r.name)&&u.push(f)}return{textDivs:u}}const d=[[r,-1,a]];for(;d.length>0;){const[f,m,y]=d.at(-1);if(m+1===f.children.length){d.pop();continue}const E=f.children[++d.at(-1)[1]];if(E===null)continue;const{name:g}=E;if(g==="#text"){const b=document.createTextNode(E.value);u.push(b),y.append(b);continue}const v=(h=E==null?void 0:E.attributes)!=null&&h.xmlns?document.createElementNS(E.attributes.xmlns,g):document.createElement(g);if(y.append(v),E.attributes&&this.setAttributes({html:v,element:E,storage:t,intent:s,linkService:i}),((p=E.children)==null?void 0:p.length)>0)d.push([E,-1,v]);else if(E.value){const b=document.createTextNode(E.value);o&&Xu.shouldBuildText(g)&&u.push(b),v.append(b)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const xh=1e3,UR=9,Lo=new WeakSet;function Xr(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class VR{static create(e){switch(e.data.annotationType){case pt.LINK:return new WS(e);case pt.TEXT:return new WR(e);case pt.WIDGET:switch(e.data.fieldType){case"Tx":return new qR(e);case"Btn":return e.data.radioButton?new XS(e):e.data.checkBox?new XR(e):new YR(e);case"Ch":return new KR(e);case"Sig":return new GR(e)}return new jo(e);case pt.POPUP:return new Yy(e);case pt.FREETEXT:return new JS(e);case pt.LINE:return new ZR(e);case pt.SQUARE:return new JR(e);case pt.CIRCLE:return new eM(e);case pt.POLYLINE:return new eE(e);case pt.CARET:return new nM(e);case pt.INK:return new Y0(e);case pt.POLYGON:return new tM(e);case pt.HIGHLIGHT:return new tE(e);case pt.UNDERLINE:return new iM(e);case pt.SQUIGGLY:return new rM(e);case pt.STRIKEOUT:return new sM(e);case pt.STAMP:return new nE(e);case pt.FILEATTACHMENT:return new aM(e);default:return new st(e)}}}var Ja,ql,Gl,Md,Xy;const px=class px{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){A(this,Md);A(this,Ja,null);A(this,ql,!1);A(this,Gl,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e!=null&&e.str||t!=null&&t.str||i!=null&&i.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return px._hasPopupData(this.data)}updateEdited(e){var i;if(!this.container)return;c(this,Ja)||x(this,Ja,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&w(this,Md,Xy).call(this,t),(i=c(this,Gl))==null||i.popup.updateEdited(e)}resetEdited(){var e;c(this,Ja)&&(w(this,Md,Xy).call(this,c(this,Ja).rect),(e=c(this,Gl))==null||e.popup.resetEdited(),x(this,Ja,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof jo||(s.tabIndex=xh);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof Yy){const{rotation:y}=t;return!t.hasOwnCanvas&&y!==0&&this.setRotation(y,s),s}const{width:o,height:l}=Xr(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const y=t.borderStyle.horizontalCornerRadius,E=t.borderStyle.verticalCornerRadius;if(y>0||E>0){const v=`calc(${y}px * var(--scale-factor)) / calc(${E}px * var(--scale-factor))`;a.borderRadius=v}else if(this instanceof XS){const v=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=v}switch(t.borderStyle.style){case Uc.SOLID:a.borderStyle="solid";break;case Uc.DASHED:a.borderStyle="dashed";break;case Uc.BEVELED:xe("Unimplemented border style: beveled");break;case Uc.INSET:xe("Unimplemented border style: inset");break;case Uc.UNDERLINE:a.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(x(this,ql,!0),a.borderColor=ne.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const u=ne.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:h,pageX:p,pageY:f}=r.rawDims;a.left=`${100*(u[0]-p)/d}%`,a.top=`${100*(u[1]-f)/h}%`;const{rotation:m}=t;return t.hasOwnCanvas||m===0?(a.width=`${100*o/d}%`,a.height=`${100*l/h}%`):this.setRotation(m,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:a}=Xr(this.data.rect);let o,l;e%180===0?(o=100*s/i,l=100*a/r):(o=100*a/i,l=100*s/r),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,r)=>{const s=r.detail[t],a=s[0],o=s.slice(1);r.target.style[i]=ob[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:ob[`${a}_rgb`](o)})};return Ae(this,"_commonActions",{display:t=>{const{display:i}=t.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||i[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[r,s]of Object.entries(t)){const a=i[r];if(a){const o={detail:{[r]:s},target:e};a(o),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,r,s]=this.data.rect.map(y=>Math.fround(y));if(e.length===8){const[y,E,g,v]=e.subarray(2,6);if(r===y&&s===E&&t===g&&i===v)return}const{style:a}=this.container;let o;if(c(this,ql)){const{borderColor:y,borderWidth:E}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${y}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const l=r-t,u=s-i,{svgFactory:d}=this,h=d.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const p=d.createElement("defs");h.append(p);const f=d.createElement("clipPath"),m=`clippath_${this.data.id}`;f.setAttribute("id",m),f.setAttribute("clipPathUnits","objectBoundingBox"),p.append(f);for(let y=2,E=e.length;y<E;y+=8){const g=e[y],v=e[y+1],b=e[y+2],C=e[y+3],T=d.createElement("rect"),_=(b-t)/l,L=(s-v)/u,R=(g-b)/l,O=(v-C)/u;T.setAttribute("x",_),T.setAttribute("y",L),T.setAttribute("width",R),T.setAttribute("height",O),f.append(T),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${L}" width="${R}" height="${O}"/>`)}c(this,ql)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${m})`}_createPopup(){const{data:e}=this,t=x(this,Gl,new Yy({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){He("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:o}of r){if(s===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Lo.has(u)){xe(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:u})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&Lo.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Ja=new WeakMap,ql=new WeakMap,Gl=new WeakMap,Md=new WeakSet,Xy=function(e){const{container:{style:t},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;i==null||i.splice(0,4,...e);const{width:u,height:d}=Xr(e);t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,r===0?(t.width=`${100*u/s}%`,t.height=`${100*d/a}%`):this.setRotation(r)};let st=px;var jn,pa,qS,GS;class WS extends st{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});A(this,jn);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(i.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(w(this,jn,qS).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(w(this,jn,GS).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,i){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&w(this,jn,pa).call(this)}_bindNamedAction(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),w(this,jn,pa).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(i.actions)){const a=r.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),w(this,jn,pa).call(this)}_bindResetFormAction(t,i){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),w(this,jn,pa).call(this),!this._fieldObjects){xe('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var h;r==null||r();const{fields:s,refs:a,include:o}=i,l=[];if(s.length!==0||a.length!==0){const p=new Set(a);for(const f of s){const m=this._fieldObjects[f]||[];for(const{id:y}of m)p.add(y)}for(const f of Object.values(this._fieldObjects))for(const m of f)p.has(m.id)===o&&l.push(m)}else for(const p of Object.values(this._fieldObjects))l.push(...p);const u=this.annotationStorage,d=[];for(const p of l){const{id:f}=p;switch(d.push(f),p.type){case"text":{const y=p.defaultValue||"";u.setValue(f,{value:y});break}case"checkbox":case"radiobutton":{const y=p.defaultValue===p.exportValues;u.setValue(f,{value:y});break}case"combobox":case"listbox":{const y=p.defaultValue||"";u.setValue(f,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${f}"]`);if(m){if(!Lo.has(m)){xe(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}})),!1}}}jn=new WeakSet,pa=function(){this.container.setAttribute("data-internal-link","")},qS=function(t,i,r=null){t.href=this.linkService.getAnchorUrl(""),i.description&&(t.title=i.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(i.content,i.filename,r),!1},w(this,jn,pa).call(this)},GS=function(t,i){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),w(this,jn,pa).call(this)};class WR extends st{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class jo extends st{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return rn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,r,s){i.includes("mouse")?e.addEventListener(i,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{var o;if(i==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}}))})}_setEventListeners(e,t,i,r){var s,a,o;for(const[l,u]of i)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,r),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ne.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||UR,s=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),d=Math.round(u/(Km*r))||1,h=u/d;a=Math.min(r,l(h/Km))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,l(u/Km))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=ne.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class qR extends jo{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=i),s.setValue(a.id,{[r]:i})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const d={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",u??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Lo.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=xh,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",p=>{e.setValue(t,{value:p.target.value}),this.setPropertyOnSiblings(i,"value",p.target.value,"value"),d.formattedValue=null}),i.addEventListener("resetform",p=>{const f=this.data.defaultFieldValue??"";i.value=d.userValue=f,d.formattedValue=null});let h=p=>{const{formattedValue:f}=d;f!=null&&(p.target.value=f),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",f=>{var y;if(d.focused)return;const{target:m}=f;d.userValue&&(m.value=d.userValue),d.lastCommittedValue=m.value,d.commitKey=1,(y=this.data.actions)!=null&&y.Focus||(d.focused=!0)}),i.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const m={value(y){d.userValue=y.detail.value??"",e.setValue(t,{value:d.userValue.toString()}),y.target.value=d.userValue},formattedValue(y){const{formattedValue:E}=y.detail;d.formattedValue=E,E!=null&&y.target!==document.activeElement&&(y.target.value=E),e.setValue(t,{formattedValue:E})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{var b;const{charLimit:E}=y.detail,{target:g}=y;if(E===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",E);let v=d.userValue;!v||v.length<=E||(v=v.slice(0,E),g.value=d.userValue=v,e.setValue(t,{value:v}),(b=this.linkService.eventBus)==null||b.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(m,f)}),i.addEventListener("keydown",f=>{var E;d.commitKey=1;let m=-1;if(f.key==="Escape"?m=0:f.key==="Enter"&&!this.data.multiLine?m=2:f.key==="Tab"&&(d.commitKey=3),m===-1)return;const{value:y}=f.target;d.lastCommittedValue!==y&&(d.lastCommittedValue=y,d.userValue=y,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:m,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const p=h;h=null,i.addEventListener("blur",f=>{var y,E;if(!d.focused||!f.relatedTarget)return;(y=this.data.actions)!=null&&y.Blur||(d.focused=!1);const{value:m}=f.target;d.userValue=m,d.lastCommittedValue!==m&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:d.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}})),p(f)}),(s=this.data.actions)!=null&&s.Keystroke&&i.addEventListener("beforeinput",f=>{var T;d.lastCommittedValue=null;const{data:m,target:y}=f,{value:E,selectionStart:g,selectionEnd:v}=y;let b=g,C=v;switch(f.inputType){case"deleteWordBackward":{const _=E.substring(0,g).match(/\w*[^\w]*$/);_&&(b-=_[0].length);break}case"deleteWordForward":{const _=E.substring(g).match(/^[^\w]*\w*/);_&&(C+=_[0].length);break}case"deleteContentBackward":g===v&&(b-=1);break;case"deleteContentForward":g===v&&(C+=1);break}f.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:m||"",willCommit:!1,selStart:b,selEnd:C}})}),this._setEventListeners(i,d,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(h&&i.addEventListener("blur",h),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class GR extends jo{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class XR extends jo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Lo.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=xh,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,i)){const d=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=d),e.setValue(u.id,{value:d})}e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class XS extends jo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let r=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(i,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Lo.add(s),s.setAttribute("data-element-id",i),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=xh,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const d=a===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const p=d&&h.id===i;h.domElement&&(h.domElement.checked=p),e.setValue(h.id,{value:p})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class YR extends WS{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class KR extends jo{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");Lo.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=xh;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",d=>{const h=this.data.defaultFieldValue;for(const p of r.options)p.selected=p.value===h});for(const d of this.data.options){const h=document.createElement("option");h.textContent=d.displayValue,h.value=d.exportValue,i.value.includes(d.exportValue)&&(h.setAttribute("selected",!0),s=!1),r.append(h)}let a=null;if(s){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),r.prepend(d),a=()=>{d.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=d=>{const h=d?"value":"textContent",{options:p,multiple:f}=r;return f?Array.prototype.filter.call(p,m=>m.selected).map(m=>m[h]):p.selectedIndex===-1?null:p[p.selectedIndex][h]};let l=o(!1);const u=d=>{const h=d.target.options;return Array.prototype.map.call(h,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",d=>{const h={value(p){a==null||a();const f=p.detail.value,m=new Set(Array.isArray(f)?f:[f]);for(const y of r.options)y.selected=m.has(y.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(p){r.multiple=!0},remove(p){const f=r.options,m=p.detail.remove;f[m].selected=!1,r.remove(m),f.length>0&&Array.prototype.findIndex.call(f,E=>E.selected)===-1&&(f[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},clear(p){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(p){const{index:f,displayValue:m,exportValue:y}=p.detail.insert,E=r.children[f],g=document.createElement("option");g.textContent=m,g.value=y,E?E.before(g):r.append(g),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},items(p){const{items:f}=p.detail;for(;r.length!==0;)r.remove(0);for(const m of f){const{displayValue:y,exportValue:E}=m,g=document.createElement("option");g.textContent=y,g.value=E,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(p)}),l=o(!1)},indices(p){const f=new Set(p.detail.indices);for(const m of p.target.options)m.selected=f.has(m.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(h,d)}),r.addEventListener("input",d=>{var f;const h=o(!0),p=o(!1);e.setValue(t,{value:h}),d.preventDefault(),(f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:p,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):r.addEventListener("input",function(d){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Yy extends st{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:st._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new QR({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${j0}${i}`).join(",")),this.container}}var Xl,Of,jf,Yl,eo,tt,Lr,Kl,Nd,Dd,Ql,Ir,bi,Rr,Fd,Mr,Od,to,no,Ne,Ap,Ky,YS,KS,QS,ZS,Sp,Ep,Qy;class QR{constructor({container:e,color:t,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:u,parentRect:d,open:h}){A(this,Ne);A(this,Xl,w(this,Ne,QS).bind(this));A(this,Of,w(this,Ne,Qy).bind(this));A(this,jf,w(this,Ne,Ep).bind(this));A(this,Yl,w(this,Ne,Sp).bind(this));A(this,eo,null);A(this,tt,null);A(this,Lr,null);A(this,Kl,null);A(this,Nd,null);A(this,Dd,null);A(this,Ql,null);A(this,Ir,!1);A(this,bi,null);A(this,Rr,null);A(this,Fd,null);A(this,Mr,null);A(this,Od,null);A(this,to,null);A(this,no,!1);var p;x(this,tt,e),x(this,Od,r),x(this,Lr,a),x(this,Mr,o),x(this,Dd,l),x(this,eo,t),x(this,Fd,u),x(this,Ql,d),x(this,Nd,i),x(this,Kl,H0.toDateObject(s)),this.trigger=i.flatMap(f=>f.getElementsToTriggerPopup());for(const f of this.trigger)f.addEventListener("click",c(this,Yl)),f.addEventListener("mouseenter",c(this,jf)),f.addEventListener("mouseleave",c(this,Of)),f.classList.add("popupTriggerArea");for(const f of i)(p=f.container)==null||p.addEventListener("keydown",c(this,Xl));c(this,tt).hidden=!0,h&&w(this,Ne,Sp).call(this)}render(){if(c(this,bi))return;const e=x(this,bi,document.createElement("div"));if(e.className="popup",c(this,eo)){const s=e.style.outlineColor=ne.makeHexColor(...c(this,eo));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=ne.makeHexColor(...c(this,eo).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=c(this,Od),e.append(t),c(this,Kl)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Kl).valueOf()})),t.append(s)}const r=c(this,Ne,Ap);if(r)VS.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(c(this,Lr));e.append(s)}c(this,tt).append(e)}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const o=r[s];i.append(document.createTextNode(o)),s<a-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:e,popupContent:t}){var i;c(this,to)||x(this,to,{contentsObj:c(this,Lr),richText:c(this,Mr)}),e&&x(this,Rr,null),t&&(x(this,Mr,w(this,Ne,KS).call(this,t)),x(this,Lr,null)),(i=c(this,bi))==null||i.remove(),x(this,bi,null)}resetEdited(){var e;c(this,to)&&({contentsObj:Qt(this,Lr)._,richText:Qt(this,Mr)._}=c(this,to),x(this,to,null),(e=c(this,bi))==null||e.remove(),x(this,bi,null),x(this,Rr,null))}forceHide(){x(this,no,this.isVisible),c(this,no)&&(c(this,tt).hidden=!0)}maybeShow(){c(this,no)&&(c(this,bi)||w(this,Ne,Ep).call(this),x(this,no,!1),c(this,tt).hidden=!1)}get isVisible(){return c(this,tt).hidden===!1}}Xl=new WeakMap,Of=new WeakMap,jf=new WeakMap,Yl=new WeakMap,eo=new WeakMap,tt=new WeakMap,Lr=new WeakMap,Kl=new WeakMap,Nd=new WeakMap,Dd=new WeakMap,Ql=new WeakMap,Ir=new WeakMap,bi=new WeakMap,Rr=new WeakMap,Fd=new WeakMap,Mr=new WeakMap,Od=new WeakMap,to=new WeakMap,no=new WeakMap,Ne=new WeakSet,Ap=function(){const e=c(this,Mr),t=c(this,Lr);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&c(this,Mr).html||null},Ky=function(){var e,t,i;return((i=(t=(e=c(this,Ne,Ap))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},YS=function(){var e,t,i;return((i=(t=(e=c(this,Ne,Ap))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},KS=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:c(this,Ne,YS),fontSize:c(this,Ne,Ky)?`calc(${c(this,Ne,Ky)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return i},QS=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&c(this,Ir))&&w(this,Ne,Sp).call(this)},ZS=function(){if(c(this,Rr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:r,pageY:s}}}=c(this,Dd);let a=!!c(this,Ql),o=a?c(this,Ql):c(this,Fd);for(const m of c(this,Nd))if(!o||ne.intersect(m.data.rect,o)!==null){o=m.data.rect,a=!0;break}const l=ne.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),d=a?o[2]-o[0]+5:0,h=l[0]+d,p=l[1];x(this,Rr,[100*(h-r)/t,100*(p-s)/i]);const{style:f}=c(this,tt);f.left=`${c(this,Rr)[0]}%`,f.top=`${c(this,Rr)[1]}%`},Sp=function(){x(this,Ir,!c(this,Ir)),c(this,Ir)?(w(this,Ne,Ep).call(this),c(this,tt).addEventListener("click",c(this,Yl)),c(this,tt).addEventListener("keydown",c(this,Xl))):(w(this,Ne,Qy).call(this),c(this,tt).removeEventListener("click",c(this,Yl)),c(this,tt).removeEventListener("keydown",c(this,Xl)))},Ep=function(){c(this,bi)||this.render(),this.isVisible?c(this,Ir)&&c(this,tt).classList.add("focused"):(w(this,Ne,ZS).call(this),c(this,tt).hidden=!1,c(this,tt).style.zIndex=parseInt(c(this,tt).style.zIndex)+1e3)},Qy=function(){c(this,tt).classList.remove("focused"),!(c(this,Ir)||!this.isVisible)&&(c(this,tt).hidden=!0,c(this,tt).style.zIndex=parseInt(c(this,tt).style.zIndex)-1e3)};class JS extends st{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ye.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var jd;class ZR extends st{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,jd,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:i,height:r}=Xr(t.rect),s=this.svgFactory.create(i,r,!0),a=x(this,jd,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,jd)}addHighlightArea(){this.container.classList.add("highlightArea")}}jd=new WeakMap;var zd;class JR extends st{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,zd,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:i,height:r}=Xr(t.rect),s=this.svgFactory.create(i,r,!0),a=t.borderStyle.width,o=x(this,zd,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",i-a),o.setAttribute("height",r-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,zd)}addHighlightArea(){this.container.classList.add("highlightArea")}}zd=new WeakMap;var Bd;class eM extends st{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Bd,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:i,height:r}=Xr(t.rect),s=this.svgFactory.create(i,r,!0),a=t.borderStyle.width,o=x(this,Bd,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",i/2),o.setAttribute("cy",r/2),o.setAttribute("rx",i/2-a/2),o.setAttribute("ry",r/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Bd=new WeakMap;var Hd;class eE extends st{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,Hd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:r,popupRef:s}}=this;if(!i)return this.container;const{width:a,height:o}=Xr(t),l=this.svgFactory.create(a,o,!0);let u=[];for(let h=0,p=i.length;h<p;h+=2){const f=i[h]-t[0],m=t[3]-i[h+1];u.push(`${f},${m}`)}u=u.join(" ");const d=x(this,Hd,this.svgFactory.createElement(this.svgElementName));return d.setAttribute("points",u),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Hd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Hd=new WeakMap;class tM extends eE{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class nM extends st{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var $d;class Y0 extends st{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});A(this,$d,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ye.HIGHLIGHT:ye.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,inkLists:i,borderStyle:r,popupRef:s}}=this,{width:a,height:o}=Xr(t),l=this.svgFactory.create(a,o,!0);for(const u of i){let d=[];for(let p=0,f=u.length;p<f;p+=2){const m=u[p]-t[0],y=t[3]-u[p+1];d.push(`${m},${y}`)}d=d.join(" ");const h=this.svgFactory.createElement(this.svgElementName);c(this,$d).push(h),h.setAttribute("points",d),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h)}return!s&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return c(this,$d)}addHighlightArea(){this.container.classList.add("highlightArea")}}$d=new WeakMap;class tE extends st{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ye.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class iM extends st{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class rM extends st{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class sM extends st{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class nE extends st{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ye.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ud,Vd,Zy;class aM extends st{constructor(t){var r;super(t,{isRenderable:!0});A(this,Vd);A(this,Ud,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let r;i.hasAppearance||i.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),r.addEventListener("dblclick",w(this,Vd,Zy).bind(this)),x(this,Ud,r);const{isMac:s}=rn.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&w(this,Vd,Zy).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return c(this,Ud)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ud=new WeakMap,Vd=new WeakSet,Zy=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var Wd,io,ro,qd,Io,iE,Jy;class oM{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}){A(this,Io);A(this,Wd,null);A(this,io,null);A(this,ro,new Map);A(this,qd,null);this.div=e,x(this,Wd,t),x(this,io,i),x(this,qd,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return c(this,ro).size>0}async render(e){var a;const{annotations:t}=e,i=this.div;To(i,this.viewport);const r=new Map,s={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new X0,annotationStorage:e.annotationStorage||new U0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===pt.POPUP;if(l){const h=r.get(o.id);if(!h)continue;s.elements=h}else{const{width:h,height:p}=Xr(o.rect);if(h<=0||p<=0)continue}s.data=o;const u=VR.create(s);if(!u.isRenderable)continue;if(!l&&o.popupRef){const h=r.get(o.popupRef);h?h.push(u):r.set(o.popupRef,[u])}const d=u.render();o.hidden&&(d.style.visibility="hidden"),await w(this,Io,iE).call(this,d,o.id),u._isEditable&&(c(this,ro).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}w(this,Io,Jy).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,To(t,{rotation:e.rotation}),w(this,Io,Jy).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(c(this,ro).values())}getEditableAnnotation(e){return c(this,ro).get(e)}}Wd=new WeakMap,io=new WeakMap,ro=new WeakMap,qd=new WeakMap,Io=new WeakSet,iE=async function(e,t){var a,o;const i=e.firstChild||e,r=i.id=`${j0}${t}`,s=await((a=c(this,qd))==null?void 0:a.getAriaAttributes(r));if(s)for(const[l,u]of s)i.setAttribute(l,u);this.div.append(e),(o=c(this,Wd))==null||o.moveElementInDOM(this.div,e,i,!1)},Jy=function(){if(!c(this,io))return;const e=this.div;for(const[t,i]of c(this,io)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i)}c(this,io).clear()};const Xh=/\r\n?|\n/g;var ki,Ln,Gd,so,In,ut,rE,sE,aE,_p,Kr,Cp,Tp,oE,tv,lE;const Fe=class Fe extends Ie{constructor(t){super({...t,name:"freeTextEditor"});A(this,ut);A(this,ki);A(this,Ln,"");A(this,Gd,`${this.id}-editor`);A(this,so,null);A(this,In);x(this,ki,t.color||Fe._defaultColor||Ie._defaultLineColor),x(this,In,t.fontSize||Fe._defaultFontSize)}static get _keyboardManager(){const t=Fe.prototype,i=a=>a.isEmpty(),r=Po.TRANSLATE_SMALL,s=Po.TRANSLATE_BIG;return Ae(this,"_keyboardManager",new vh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}]]))}static initialize(t,i){Ie.initialize(t,i);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case de.FREETEXT_SIZE:Fe._defaultFontSize=i;break;case de.FREETEXT_COLOR:Fe._defaultColor=i;break}}updateParams(t,i){switch(t){case de.FREETEXT_SIZE:w(this,ut,rE).call(this,i);break;case de.FREETEXT_COLOR:w(this,ut,sE).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[de.FREETEXT_SIZE,Fe._defaultFontSize],[de.FREETEXT_COLOR,Fe._defaultColor||Ie._defaultLineColor]]}get propertiesToUpdate(){return[[de.FREETEXT_SIZE,c(this,In)],[de.FREETEXT_COLOR,c(this,ki)]]}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Fe._internalPadding*t,-(Fe._internalPadding+c(this,In))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ye.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),x(this,so,new AbortController);const t=this._uiManager.combinedSignal(c(this,so));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,Gd)),this._isDraggable=!0,(t=c(this,so))==null||t.abort(),x(this,so,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var t;this.width||(this.enableEditMode(),this.editorDiv.focus(),(t=this._initialOptions)!=null&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=c(this,Ln),i=x(this,Ln,w(this,ut,aE).call(this).trimEnd());if(t===i)return;const r=s=>{if(x(this,Ln,s),!s){this.remove();return}w(this,ut,Tp).call(this),this._uiManager.rebuild(this),w(this,ut,_p).call(this)};this.addCommands({cmd:()=>{r(i)},undo:()=>{r(t)},mustExec:!1}),w(this,ut,_p).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Fe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,Gd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${c(this,In)}px * var(--scale-factor))`,r.color=c(this,ki),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),yf(this,this.div,["dblclick","keydown"]),this.width){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[d,h]=this.pageDimensions,[p,f]=this.pageTranslation;let m,y;switch(this.rotation){case 0:m=t+(o[0]-p)/d,y=i+this.height-(o[1]-f)/h;break;case 90:m=t+(o[0]-p)/d,y=i-(o[1]-f)/h,[l,u]=[u,-l];break;case 180:m=t-this.width+(o[0]-p)/d,y=i-(o[1]-f)/h,[l,u]=[-l,-u];break;case 270:m=t+(o[0]-p-this.height*h)/d,y=i+(o[1]-f-this.width*d)/h,[l,u]=[-u,l];break}this.setAt(m*s,y*a,l,u)}else this.setAt(t*s,i*a,this.width*s,this.height*a);w(this,ut,Tp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var m,y,E;const i=t.clipboardData||window.clipboardData,{types:r}=i;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=w(m=Fe,Kr,tv).call(m,i.getData("text")||"").replaceAll(Xh,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,d=[],h=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(Xh,"")),g!==this.editorDiv){let v=d;for(const b of this.editorDiv.childNodes){if(b===g){v=h;continue}v.push(w(y=Fe,Kr,Cp).call(y,b))}}d.push(l.nodeValue.slice(0,u).replaceAll(Xh,""))}else if(l===this.editorDiv){let g=d,v=0;for(const b of this.editorDiv.childNodes)v++===u&&(g=h),g.push(w(E=Fe,Kr,Cp).call(E,b))}x(this,Ln,`${d.join(`
`)}${s}${h.join(`
`)}`),w(this,ut,Tp).call(this);const p=new Range;let f=d.reduce((g,v)=>g+v.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const v=g.nodeValue.length;if(f<=v){p.setStart(g,f),p.setEnd(g,f);break}f-=v}a.removeAllRanges(),a.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(t,i,r){var o;let s=null;if(t instanceof JS){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:d,rotation:h,id:p,popupRef:f},textContent:m,textPosition:y,parent:{page:{pageNumber:E}}}=t;if(!m||m.length===0)return null;s=t={annotationType:ye.FREETEXT,color:Array.from(u),fontSize:l,value:m.join(`
`),position:y,pageIndex:E-1,rect:d.slice(0),rotation:h,id:p,deleted:!1,popupRef:f}}const a=await super.deserialize(t,i,r);return x(a,In,t.fontSize),x(a,ki,ne.makeHexColor(...t.color)),x(a,Ln,w(o=Fe,Kr,tv).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Fe._internalPadding*this.parentScale,r=this.getRect(i,i),s=Ie._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,ki)),a={annotationType:ye.FREETEXT,color:s,fontSize:c(this,In),value:w(this,ut,oE).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!w(this,ut,lE).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(this.deleted)return i;const{style:r}=i;r.fontSize=`calc(${c(this,In)}px * var(--scale-factor))`,r.color=c(this,ki),i.replaceChildren();for(const a of c(this,Ln).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),i.append(o)}const s=Fe._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:c(this,Ln)}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};ki=new WeakMap,Ln=new WeakMap,Gd=new WeakMap,so=new WeakMap,In=new WeakMap,ut=new WeakSet,rE=function(t){const i=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-c(this,In))*this.parentScale),x(this,In,s),w(this,ut,_p).call(this)},r=c(this,In);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:de.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},sE=function(t){const i=s=>{x(this,ki,this.editorDiv.style.color=s)},r=c(this,ki);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:de.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},aE=function(){var r;const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(w(r=Fe,Kr,Cp).call(r,s)),i=s);return t.join(`
`)},_p=function(){const[t,i]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/i):(this.width=r.height/t,this.height=r.width/i),this.fixAndSetPosition()},Kr=new WeakSet,Cp=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Xh,"")},Tp=function(){if(this.editorDiv.replaceChildren(),!!c(this,Ln))for(const t of c(this,Ln).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},oE=function(){return c(this,Ln).replaceAll(""," ")},tv=function(t){return t.replaceAll(" ","")},lE=function(t){const{value:i,fontSize:r,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==i||t.fontSize!==r||t.color.some((o,l)=>o!==s[l])||t.pageIndex!==a},A(Fe,Kr),ue(Fe,"_freeTextDefaultContent",""),ue(Fe,"_internalPadding",0),ue(Fe,"_defaultColor",null),ue(Fe,"_defaultFontSize",10),ue(Fe,"_type","freetext"),ue(Fe,"_editorType",ye.FREETEXT);let ev=Fe;class cE{toSVGPath(){He("Abstract method `toSVGPath` must be implemented.")}get box(){He("Abstract getter `box` must be implemented.")}serialize(e,t){He("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){He("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){He("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var Rn,Ai,Zl,Jl,er,we,ao,oo,Xd,Yd,ec,tc,Rs,Kd,zf,Bf,bt,ou,uE,dE,hE,pE,fE,mE;const vr=class vr{constructor({x:e,y:t},i,r,s,a,o=0){A(this,bt);A(this,Rn);A(this,Ai,[]);A(this,Zl);A(this,Jl);A(this,er,[]);A(this,we,new Float64Array(18));A(this,ao);A(this,oo);A(this,Xd);A(this,Yd);A(this,ec);A(this,tc);A(this,Rs,[]);x(this,Rn,i),x(this,tc,s*r),x(this,Jl,a),c(this,we).set([NaN,NaN,NaN,NaN,e,t],6),x(this,Zl,o),x(this,Yd,c(vr,Kd)*r),x(this,Xd,c(vr,Bf)*r),x(this,ec,r),c(this,Rs).push(e,t)}isEmpty(){return isNaN(c(this,we)[8])}add({x:e,y:t}){var O;x(this,ao,e),x(this,oo,t);const[i,r,s,a]=c(this,Rn);let[o,l,u,d]=c(this,we).subarray(8,12);const h=e-u,p=t-d,f=Math.hypot(h,p);if(f<c(this,Xd))return!1;const m=f-c(this,Yd),y=m/f,E=y*h,g=y*p;let v=o,b=l;o=u,l=d,u+=E,d+=g,(O=c(this,Rs))==null||O.push(e,t);const C=-g/m,T=E/m,_=C*c(this,tc),L=T*c(this,tc);return c(this,we).set(c(this,we).subarray(2,8),0),c(this,we).set([u+_,d+L],4),c(this,we).set(c(this,we).subarray(14,18),12),c(this,we).set([u-_,d-L],16),isNaN(c(this,we)[6])?(c(this,er).length===0&&(c(this,we).set([o+_,l+L],2),c(this,er).push(NaN,NaN,NaN,NaN,(o+_-i)/s,(l+L-r)/a),c(this,we).set([o-_,l-L],14),c(this,Ai).push(NaN,NaN,NaN,NaN,(o-_-i)/s,(l-L-r)/a)),c(this,we).set([v,b,o,l,u,d],6),!this.isEmpty()):(c(this,we).set([v,b,o,l,u,d],6),Math.abs(Math.atan2(b-l,v-o)-Math.atan2(g,E))<Math.PI/2?([o,l,u,d]=c(this,we).subarray(2,6),c(this,er).push(NaN,NaN,NaN,NaN,((o+u)/2-i)/s,((l+d)/2-r)/a),[o,l,v,b]=c(this,we).subarray(14,18),c(this,Ai).push(NaN,NaN,NaN,NaN,((v+o)/2-i)/s,((b+l)/2-r)/a),!0):([v,b,o,l,u,d]=c(this,we).subarray(0,6),c(this,er).push(((v+5*o)/6-i)/s,((b+5*l)/6-r)/a,((5*o+u)/6-i)/s,((5*l+d)/6-r)/a,((o+u)/2-i)/s,((l+d)/2-r)/a),[u,d,o,l,v,b]=c(this,we).subarray(12,18),c(this,Ai).push(((v+5*o)/6-i)/s,((b+5*l)/6-r)/a,((5*o+u)/6-i)/s,((5*l+d)/6-r)/a,((o+u)/2-i)/s,((l+d)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=c(this,er),t=c(this,Ai);if(isNaN(c(this,we)[6])&&!this.isEmpty())return w(this,bt,uE).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);w(this,bt,hE).call(this,i);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?i.push(`L${t[r+4]} ${t[r+5]}`):i.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return w(this,bt,dE).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,r,s,a){return new gE(e,t,i,r,s,a)}getOutlines(){var h;const e=c(this,er),t=c(this,Ai),i=c(this,we),[r,s,a,o]=c(this,Rn),l=new Float64Array((((h=c(this,Rs))==null?void 0:h.length)??0)+2);for(let p=0,f=l.length-2;p<f;p+=2)l[p]=(c(this,Rs)[p]-r)/a,l[p+1]=(c(this,Rs)[p+1]-s)/o;if(l[l.length-2]=(c(this,ao)-r)/a,l[l.length-1]=(c(this,oo)-s)/o,isNaN(i[6])&&!this.isEmpty())return w(this,bt,pE).call(this,l);const u=new Float64Array(c(this,er).length+24+c(this,Ai).length);let d=e.length;for(let p=0;p<d;p+=2){if(isNaN(e[p])){u[p]=u[p+1]=NaN;continue}u[p]=e[p],u[p+1]=e[p+1]}d=w(this,bt,mE).call(this,u,d);for(let p=t.length-6;p>=6;p-=6)for(let f=0;f<6;f+=2){if(isNaN(t[p+f])){u[d]=u[d+1]=NaN,d+=2;continue}u[d]=t[p+f],u[d+1]=t[p+f+1],d+=2}return w(this,bt,fE).call(this,u,d),this.newFreeDrawOutline(u,l,c(this,Rn),c(this,ec),c(this,Zl),c(this,Jl))}};Rn=new WeakMap,Ai=new WeakMap,Zl=new WeakMap,Jl=new WeakMap,er=new WeakMap,we=new WeakMap,ao=new WeakMap,oo=new WeakMap,Xd=new WeakMap,Yd=new WeakMap,ec=new WeakMap,tc=new WeakMap,Rs=new WeakMap,Kd=new WeakMap,zf=new WeakMap,Bf=new WeakMap,bt=new WeakSet,ou=function(){const e=c(this,we).subarray(4,6),t=c(this,we).subarray(16,18),[i,r,s,a]=c(this,Rn);return[(c(this,ao)+(e[0]-t[0])/2-i)/s,(c(this,oo)+(e[1]-t[1])/2-r)/a,(c(this,ao)+(t[0]-e[0])/2-i)/s,(c(this,oo)+(t[1]-e[1])/2-r)/a]},uE=function(){const[e,t,i,r]=c(this,Rn),[s,a,o,l]=w(this,bt,ou).call(this);return`M${(c(this,we)[2]-e)/i} ${(c(this,we)[3]-t)/r} L${(c(this,we)[4]-e)/i} ${(c(this,we)[5]-t)/r} L${s} ${a} L${o} ${l} L${(c(this,we)[16]-e)/i} ${(c(this,we)[17]-t)/r} L${(c(this,we)[14]-e)/i} ${(c(this,we)[15]-t)/r} Z`},dE=function(e){const t=c(this,Ai);e.push(`L${t[4]} ${t[5]} Z`)},hE=function(e){const[t,i,r,s]=c(this,Rn),a=c(this,we).subarray(4,6),o=c(this,we).subarray(16,18),[l,u,d,h]=w(this,bt,ou).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-i)/s} L${l} ${u} L${d} ${h} L${(o[0]-t)/r} ${(o[1]-i)/s}`)},pE=function(e){const t=c(this,we),[i,r,s,a]=c(this,Rn),[o,l,u,d]=w(this,bt,ou).call(this),h=new Float64Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-i)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-i)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,(t[16]-i)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-i)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(h,e,c(this,Rn),c(this,ec),c(this,Zl),c(this,Jl))},fE=function(e,t){const i=c(this,Ai);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},mE=function(e,t){const i=c(this,we).subarray(4,6),r=c(this,we).subarray(16,18),[s,a,o,l]=c(this,Rn),[u,d,h,p]=w(this,bt,ou).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,u,d,NaN,NaN,NaN,NaN,h,p,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l],t),t+=24},A(vr,Kd,8),A(vr,zf,2),A(vr,Bf,c(vr,Kd)+c(vr,zf));let xf=vr;var nc,lo,Nr,Qd,Mn,Zd,it,vn,lu,cu,yE;class gE extends cE{constructor(t,i,r,s,a,o){super();A(this,vn);A(this,nc);A(this,lo,null);A(this,Nr);A(this,Qd);A(this,Mn);A(this,Zd);A(this,it);x(this,it,t),x(this,Mn,i),x(this,nc,r),x(this,Zd,s),x(this,Nr,a),x(this,Qd,o),w(this,vn,yE).call(this,o);const{x:l,y:u,width:d,height:h}=c(this,lo);for(let p=0,f=t.length;p<f;p+=2)t[p]=(t[p]-l)/d,t[p+1]=(t[p+1]-u)/h;for(let p=0,f=i.length;p<f;p+=2)i[p]=(i[p]-l)/d,i[p+1]=(i[p+1]-u)/h}toSVGPath(){const t=[`M${c(this,it)[4]} ${c(this,it)[5]}`];for(let i=6,r=c(this,it).length;i<r;i+=6){if(isNaN(c(this,it)[i])){t.push(`L${c(this,it)[i+4]} ${c(this,it)[i+5]}`);continue}t.push(`C${c(this,it)[i]} ${c(this,it)[i+1]} ${c(this,it)[i+2]} ${c(this,it)[i+3]} ${c(this,it)[i+4]} ${c(this,it)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,r,s],a){const o=r-t,l=s-i;let u,d;switch(a){case 0:u=w(this,vn,lu).call(this,c(this,it),t,s,o,-l),d=w(this,vn,lu).call(this,c(this,Mn),t,s,o,-l);break;case 90:u=w(this,vn,cu).call(this,c(this,it),t,i,o,l),d=w(this,vn,cu).call(this,c(this,Mn),t,i,o,l);break;case 180:u=w(this,vn,lu).call(this,c(this,it),r,i,-o,l),d=w(this,vn,lu).call(this,c(this,Mn),r,i,-o,l);break;case 270:u=w(this,vn,cu).call(this,c(this,it),r,s,-o,-l),d=w(this,vn,cu).call(this,c(this,Mn),r,s,-o,-l);break}return{outline:Array.from(u),points:[Array.from(d)]}}get box(){return c(this,lo)}newOutliner(t,i,r,s,a,o=0){return new xf(t,i,r,s,a,o)}getNewOutline(t,i){const{x:r,y:s,width:a,height:o}=c(this,lo),[l,u,d,h]=c(this,nc),p=a*d,f=o*h,m=r*d+l,y=s*h+u,E=this.newOutliner({x:c(this,Mn)[0]*p+m,y:c(this,Mn)[1]*f+y},c(this,nc),c(this,Zd),t,c(this,Qd),i??c(this,Nr));for(let g=2;g<c(this,Mn).length;g+=2)E.add({x:c(this,Mn)[g]*p+m,y:c(this,Mn)[g+1]*f+y});return E.getOutlines()}get mustRemoveSelfIntersections(){return!0}}nc=new WeakMap,lo=new WeakMap,Nr=new WeakMap,Qd=new WeakMap,Mn=new WeakMap,Zd=new WeakMap,it=new WeakMap,vn=new WeakSet,lu=function(t,i,r,s,a){const o=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)o[l]=i+t[l]*s,o[l+1]=r+t[l+1]*a;return o},cu=function(t,i,r,s,a){const o=new Float64Array(t.length);for(let l=0,u=t.length;l<u;l+=2)o[l]=i+t[l+1]*s,o[l+1]=r+t[l]*a;return o},yE=function(t){const i=c(this,it);let r=i[4],s=i[5],a=r,o=s,l=r,u=s,d=r,h=s;const p=t?Math.max:Math.min;for(let g=6,v=i.length;g<v;g+=6){if(isNaN(i[g]))a=Math.min(a,i[g+4]),o=Math.min(o,i[g+5]),l=Math.max(l,i[g+4]),u=Math.max(u,i[g+5]),h<i[g+5]?(d=i[g+4],h=i[g+5]):h===i[g+5]&&(d=p(d,i[g+4]));else{const b=ne.bezierBoundingBox(r,s,...i.slice(g,g+6));a=Math.min(a,b[0]),o=Math.min(o,b[1]),l=Math.max(l,b[2]),u=Math.max(u,b[3]),h<b[3]?(d=b[2],h=b[3]):h===b[3]&&(d=p(d,b[2]))}r=i[g+4],s=i[g+5]}const f=a-c(this,Nr),m=o-c(this,Nr),y=l-a+2*c(this,Nr),E=u-o+2*c(this,Nr);x(this,lo,{x:f,y:m,width:y,height:E,lastPoint:[d,h]})};var Jd,Ms,Si,an,vE,Pp,xE,wE,nv;class lb{constructor(e,t=0,i=0,r=!0){A(this,an);A(this,Jd);A(this,Ms,[]);A(this,Si,[]);let s=1/0,a=-1/0,o=1/0,l=-1/0;const d=10**-4;for(const{x:g,y:v,width:b,height:C}of e){const T=Math.floor((g-t)/d)*d,_=Math.ceil((g+b+t)/d)*d,L=Math.floor((v-t)/d)*d,R=Math.ceil((v+C+t)/d)*d,O=[T,L,R,!0],j=[_,L,R,!1];c(this,Ms).push(O,j),s=Math.min(s,T),a=Math.max(a,_),o=Math.min(o,L),l=Math.max(l,R)}const h=a-s+2*i,p=l-o+2*i,f=s-i,m=o-i,y=c(this,Ms).at(r?-1:-2),E=[y[0],y[2]];for(const g of c(this,Ms)){const[v,b,C]=g;g[0]=(v-f)/h,g[1]=(b-m)/p,g[2]=(C-m)/p}x(this,Jd,{x:f,y:m,width:h,height:p,lastPoint:E})}getOutlines(){c(this,Ms).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of c(this,Ms))t[3]?(e.push(...w(this,an,nv).call(this,t)),w(this,an,xE).call(this,t)):(w(this,an,wE).call(this,t),e.push(...w(this,an,nv).call(this,t)));return w(this,an,vE).call(this,e)}}Jd=new WeakMap,Ms=new WeakMap,Si=new WeakMap,an=new WeakSet,vE=function(e){const t=[],i=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,l,u,d,h]=a;i.delete(a);let p=o,f=l;for(s=[o,u],r.push(s);;){let m;if(i.has(d))m=d;else if(i.has(h))m=h;else break;i.delete(m),[o,l,u,d,h]=m,p!==o&&(s.push(p,f,o,f===l?l:u),p=o),f=f===l?u:l}s.push(p,f)}return new lM(r,c(this,Jd))},Pp=function(e){const t=c(this,Si);let i=0,r=t.length-1;for(;i<=r;){const s=i+r>>1,a=t[s][0];if(a===e)return s;a<e?i=s+1:r=s-1}return r+1},xE=function([,e,t]){const i=w(this,an,Pp).call(this,e);c(this,Si).splice(i,0,[e,t])},wE=function([,e,t]){const i=w(this,an,Pp).call(this,e);for(let r=i;r<c(this,Si).length;r++){const[s,a]=c(this,Si)[r];if(s!==e)break;if(s===e&&a===t){c(this,Si).splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,a]=c(this,Si)[r];if(s!==e)break;if(s===e&&a===t){c(this,Si).splice(r,1);return}}},nv=function(e){const[t,i,r]=e,s=[[t,i,r]],a=w(this,an,Pp).call(this,r);for(let o=0;o<a;o++){const[l,u]=c(this,Si)[o];for(let d=0,h=s.length;d<h;d++){const[,p,f]=s[d];if(!(u<=p||f<=l)){if(p>=l){if(f>u)s[d][1]=u;else{if(h===1)return[];s.splice(d,1),d--,h--}continue}s[d][2]=l,f>u&&s.push([t,u,f])}}}return s};var eh,ic;class lM extends cE{constructor(t,i){super();A(this,eh);A(this,ic);x(this,ic,t),x(this,eh,i)}toSVGPath(){const t=[];for(const i of c(this,ic)){let[r,s]=i;t.push(`M${r} ${s}`);for(let a=2;a<i.length;a+=2){const o=i[a],l=i[a+1];o===r?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${o}`),r=o)}t.push("Z")}return t.join(" ")}serialize([t,i,r,s],a){const o=[],l=r-t,u=s-i;for(const d of c(this,ic)){const h=new Array(d.length);for(let p=0;p<d.length;p+=2)h[p]=t+d[p]*l,h[p+1]=s-d[p+1]*u;o.push(h)}return o}get box(){return c(this,eh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}eh=new WeakMap,ic=new WeakMap;class iv extends xf{newFreeDrawOutline(e,t,i,r,s,a){return new cM(e,t,i,r,s,a)}get classNamesForDrawing(){return["highlight","free"]}}class cM extends gE{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(e,t,i,r,s,a=0){return new iv(e,t,i,r,s,a)}}var Ei,co,rc,gt,th,sc,nh,ih,Ns,_i,ac,rh,Me,rv,sv,av,fa,bE,ls;const dn=class dn{constructor({editor:e=null,uiManager:t=null}){A(this,Me);A(this,Ei,null);A(this,co,null);A(this,rc);A(this,gt,null);A(this,th,!1);A(this,sc,!1);A(this,nh,null);A(this,ih);A(this,Ns,null);A(this,_i,null);A(this,ac);var i;e?(x(this,sc,!1),x(this,ac,de.HIGHLIGHT_COLOR),x(this,nh,e)):(x(this,sc,!0),x(this,ac,de.HIGHLIGHT_DEFAULT_COLOR)),x(this,_i,(e==null?void 0:e._uiManager)||t),x(this,ih,c(this,_i)._eventBus),x(this,rc,(e==null?void 0:e.color)||((i=c(this,_i))==null?void 0:i.highlightColors.values().next().value)||"#FFFF98"),c(dn,rh)||x(dn,rh,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Ae(this,"_keyboardManager",new vh([[["Escape","mac+Escape"],dn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],dn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],dn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],dn.prototype._moveToPrevious],[["Home","mac+Home"],dn.prototype._moveToBeginning],[["End","mac+End"],dn.prototype._moveToEnd]]))}renderButton(){const e=x(this,Ei,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=c(this,_i)._signal;e.addEventListener("click",w(this,Me,fa).bind(this),{signal:t}),e.addEventListener("keydown",w(this,Me,av).bind(this),{signal:t});const i=x(this,co,document.createElement("span"));return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=c(this,rc),e.append(i),e}renderMainDropdown(){const e=x(this,gt,w(this,Me,rv).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===c(this,Ei)){w(this,Me,fa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&w(this,Me,sv).call(this,t,e)}_moveToNext(e){var t,i;if(!c(this,Me,ls)){w(this,Me,fa).call(this,e);return}if(e.target===c(this,Ei)){(t=c(this,gt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=c(this,gt))==null?void 0:t.firstChild)||e.target===c(this,Ei)){c(this,Me,ls)&&this._hideDropdownFromKeyboard();return}c(this,Me,ls)||w(this,Me,fa).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!c(this,Me,ls)){w(this,Me,fa).call(this,e);return}(t=c(this,gt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!c(this,Me,ls)){w(this,Me,fa).call(this,e);return}(t=c(this,gt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=c(this,gt))==null||e.classList.add("hidden"),(t=c(this,Ns))==null||t.abort(),x(this,Ns,null)}_hideDropdownFromKeyboard(){var e;if(!c(this,sc)){if(!c(this,Me,ls)){(e=c(this,nh))==null||e.unselect();return}this.hideDropdown(),c(this,Ei).focus({preventScroll:!0,focusVisible:c(this,th)})}}updateColor(e){if(c(this,co)&&(c(this,co).style.backgroundColor=e),!c(this,gt))return;const t=c(this,_i).highlightColors.values();for(const i of c(this,gt).children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=c(this,Ei))==null||e.remove(),x(this,Ei,null),x(this,co,null),(t=c(this,gt))==null||t.remove(),x(this,gt,null)}};Ei=new WeakMap,co=new WeakMap,rc=new WeakMap,gt=new WeakMap,th=new WeakMap,sc=new WeakMap,nh=new WeakMap,ih=new WeakMap,Ns=new WeakMap,_i=new WeakMap,ac=new WeakMap,rh=new WeakMap,Me=new WeakSet,rv=function(){const e=document.createElement("div"),t=c(this,_i)._signal;e.addEventListener("contextmenu",li,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,r]of c(this,_i).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",c(dn,rh)[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.setAttribute("aria-selected",r===c(this,rc)),s.addEventListener("click",w(this,Me,sv).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",w(this,Me,av).bind(this),{signal:t}),e},sv=function(e,t){t.stopPropagation(),c(this,ih).dispatch("switchannotationeditorparams",{source:this,type:c(this,ac),value:e})},av=function(e){dn._keyboardManager.exec(this,e)},fa=function(e){if(c(this,Me,ls)){this.hideDropdown();return}if(x(this,th,e.detail===0),c(this,Ns)||(x(this,Ns,new AbortController),window.addEventListener("pointerdown",w(this,Me,bE).bind(this),{signal:c(this,_i).combinedSignal(c(this,Ns))})),c(this,gt)){c(this,gt).classList.remove("hidden");return}const t=x(this,gt,w(this,Me,rv).call(this));c(this,Ei).append(t)},bE=function(e){var t;(t=c(this,gt))!=null&&t.contains(e.target)||this.hideDropdown()},ls=function(){return c(this,gt)&&!c(this,gt).classList.contains("hidden")},A(dn,rh,null);let wf=dn;var oc,sh,Dr,uo,lc,Yn,ah,oh,ho,Ci,Vt,fn,cc,Fr,yt,uc,Kn,lh,me,ov,Lp,kE,AE,SE,lv,ma,ni,Xo,EE,Ip,uu,_E,CE,TE,PE,LE;const _e=class _e extends Ie{constructor(t){super({...t,name:"highlightEditor"});A(this,me);A(this,oc,null);A(this,sh,0);A(this,Dr);A(this,uo,null);A(this,lc,null);A(this,Yn,null);A(this,ah,null);A(this,oh,0);A(this,ho,null);A(this,Ci,null);A(this,Vt,null);A(this,fn,!1);A(this,cc,null);A(this,Fr);A(this,yt,null);A(this,uc,"");A(this,Kn);A(this,lh,"");this.color=t.color||_e._defaultColor,x(this,Kn,t.thickness||_e._defaultThickness),x(this,Fr,t.opacity||_e._defaultOpacity),x(this,Dr,t.boxes||null),x(this,lh,t.methodOfCreation||""),x(this,uc,t.text||""),this._isDraggable=!1,t.highlightId>-1?(x(this,fn,!0),w(this,me,Lp).call(this,t),w(this,me,ma).call(this)):c(this,Dr)&&(x(this,oc,t.anchorNode),x(this,sh,t.anchorOffset),x(this,ah,t.focusNode),x(this,oh,t.focusOffset),w(this,me,ov).call(this),w(this,me,ma).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=_e.prototype;return Ae(this,"_keyboardManager",new vh([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,fn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,Kn),methodOfCreation:c(this,lh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var r;Ie.initialize(t,i),_e._defaultColor||(_e._defaultColor=((r=i.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case de.HIGHLIGHT_DEFAULT_COLOR:_e._defaultColor=i;break;case de.HIGHLIGHT_THICKNESS:_e._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return c(this,cc)}updateParams(t,i){switch(t){case de.HIGHLIGHT_COLOR:w(this,me,kE).call(this,i);break;case de.HIGHLIGHT_THICKNESS:w(this,me,AE).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[de.HIGHLIGHT_DEFAULT_COLOR,_e._defaultColor],[de.HIGHLIGHT_THICKNESS,_e._defaultThickness]]}get propertiesToUpdate(){return[[de.HIGHLIGHT_COLOR,this.color||_e._defaultColor],[de.HIGHLIGHT_THICKNESS,c(this,Kn)||_e._defaultThickness],[de.HIGHLIGHT_FREE,c(this,fn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(x(this,lc,new wf({editor:this})),t.addColorPicker(c(this,lc))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(w(this,me,uu).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,w(this,me,uu).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){w(this,me,lv).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(w(this,me,ma).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let i=!1;this.parent&&!t?w(this,me,lv).call(this):t&&(w(this,me,ma).call(this,t),i=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var s,a,o;const{drawLayer:i}=this.parent;let r;c(this,fn)?(t=(t-this.rotation+360)%360,r=w(s=_e,ni,Xo).call(s,c(this,Ci).box,t)):r=w(a=_e,ni,Xo).call(a,this,t),i.rotate(c(this,Vt),t),i.rotate(c(this,yt),t),i.updateBox(c(this,Vt),r),i.updateBox(c(this,yt),w(o=_e,ni,Xo).call(o,c(this,Yn).box,t))}render(){if(this.div)return this.div;const t=super.render();c(this,uc)&&(t.setAttribute("aria-label",c(this,uc)),t.setAttribute("role","mark")),c(this,fn)?t.classList.add("free"):this.div.addEventListener("keydown",w(this,me,EE).bind(this),{signal:this._uiManager._signal});const i=x(this,ho,document.createElement("div"));t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=c(this,uo);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),yf(this,c(this,ho),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent.drawLayer.addClass(c(this,yt),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(c(this,yt),"hovered")}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:w(this,me,Ip).call(this,!0);break;case 1:case 3:w(this,me,Ip).call(this,!1);break}}select(){var t,i;super.select(),c(this,yt)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,yt),"hovered"),(i=this.parent)==null||i.drawLayer.addClass(c(this,yt),"selected"))}unselect(){var t;super.unselect(),c(this,yt)&&((t=this.parent)==null||t.drawLayer.removeClass(c(this,yt),"selected"),c(this,fn)||w(this,me,Ip).call(this,!1))}get _mustFixPosition(){return!c(this,fn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.show(c(this,Vt),t),this.parent.drawLayer.show(c(this,yt),t))}static startHighlighting(t,i,{target:r,x:s,y:a}){const{x:o,y:l,width:u,height:d}=r.getBoundingClientRect(),h=new AbortController,p=t.combinedSignal(h),f=y=>{y.preventDefault(),y.stopPropagation()},m=y=>{h.abort(),w(this,ni,PE).call(this,t,y)};window.addEventListener("blur",m,{signal:p}),window.addEventListener("pointerup",m,{signal:p}),window.addEventListener("pointerdown",f,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",li,{signal:p}),r.addEventListener("pointermove",w(this,ni,TE).bind(this,t),{signal:p}),this._freeHighlight=new iv({x:s,y:a},[o,l,u,d],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(t,i,r){var y,E,g,v;let s=null;if(t instanceof tE){const{data:{quadPoints:b,rect:C,rotation:T,id:_,color:L,opacity:R,popupRef:O},parent:{page:{pageNumber:j}}}=t;s=t={annotationType:ye.HIGHLIGHT,color:Array.from(L),opacity:R,quadPoints:b,boxes:null,pageIndex:j-1,rect:C.slice(0),rotation:T,id:_,deleted:!1,popupRef:O}}else if(t instanceof Y0){const{data:{inkLists:b,rect:C,rotation:T,id:_,color:L,borderStyle:{rawWidth:R},popupRef:O},parent:{page:{pageNumber:j}}}=t;s=t={annotationType:ye.HIGHLIGHT,color:Array.from(L),thickness:R,inkLists:b,boxes:null,pageIndex:j-1,rect:C.slice(0),rotation:T,id:_,deleted:!1,popupRef:O}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,d=await super.deserialize(t,i,r);d.color=ne.makeHexColor(...a),x(d,Fr,u||1),l&&x(d,Kn,t.thickness),d.annotationElementId=t.id||null,d._initialData=s;const[h,p]=d.pageDimensions,[f,m]=d.pageTranslation;if(o){const b=x(d,Dr,[]);for(let C=0;C<o.length;C+=8)b.push({x:(o[C]-f)/h,y:1-(o[C+1]-m)/p,width:(o[C+2]-o[C])/h,height:(o[C+1]-o[C+5])/p});w(y=d,me,ov).call(y),w(E=d,me,ma).call(E),d.rotate(d.rotation)}else if(l){x(d,fn,!0);const b=l[0],C={x:b[0]-f,y:p-(b[1]-m)},T=new iv(C,[0,0,h,p],1,c(d,Kn)/2,!0,.001);for(let R=0,O=b.length;R<O;R+=2)C.x=b[R]-f,C.y=p-(b[R+1]-m),T.add(C);const{id:_,clipPathId:L}=i.drawLayer.draw(T,d.color,d._defaultOpacity,!0);w(g=d,me,Lp).call(g,{highlightOutlines:T.getOutlines(),highlightId:_,clipPathId:L}),w(v=d,me,ma).call(v)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),r=Ie._colorManager.convert(this.color),s={annotationType:ye.HIGHLIGHT,color:r,opacity:c(this,Fr),thickness:c(this,Kn),quadPoints:w(this,me,_E).call(this),outlines:w(this,me,CE).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:w(this,me,uu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!w(this,me,LE).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};oc=new WeakMap,sh=new WeakMap,Dr=new WeakMap,uo=new WeakMap,lc=new WeakMap,Yn=new WeakMap,ah=new WeakMap,oh=new WeakMap,ho=new WeakMap,Ci=new WeakMap,Vt=new WeakMap,fn=new WeakMap,cc=new WeakMap,Fr=new WeakMap,yt=new WeakMap,uc=new WeakMap,Kn=new WeakMap,lh=new WeakMap,me=new WeakSet,ov=function(){const t=new lb(c(this,Dr),.001);x(this,Ci,t.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,Ci).box;const i=new lb(c(this,Dr),.0025,.001,this._uiManager.direction==="ltr");x(this,Yn,i.getOutlines());const{lastPoint:r}=c(this,Yn).box;x(this,cc,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},Lp=function({highlightOutlines:t,highlightId:i,clipPathId:r}){var h,p;if(x(this,Ci,t),x(this,Yn,t.getNewOutline(c(this,Kn)/2+1.5,.0025)),i>=0)x(this,Vt,i),x(this,uo,r),this.parent.drawLayer.finalizeLine(i,t),x(this,yt,this.parent.drawLayer.drawOutline(c(this,Yn)));else if(this.parent){const f=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,Vt),t),this.parent.drawLayer.updateBox(c(this,Vt),w(h=_e,ni,Xo).call(h,c(this,Ci).box,(f-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,yt),c(this,Yn)),this.parent.drawLayer.updateBox(c(this,yt),w(p=_e,ni,Xo).call(p,c(this,Yn).box,f))}const{x:a,y:o,width:l,height:u}=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[f,m]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*m/f,this.height=u*f/m;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[f,m]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*m/f,this.height=u*f/m;break}}const{lastPoint:d}=c(this,Yn).box;x(this,cc,[(d[0]-a)/l,(d[1]-o)/u])},kE=function(t){const i=(a,o)=>{var l,u,d;this.color=a,(l=this.parent)==null||l.drawLayer.changeColor(c(this,Vt),a),(u=c(this,lc))==null||u.updateColor(a),x(this,Fr,o),(d=this.parent)==null||d.drawLayer.changeOpacity(c(this,Vt),o)},r=this.color,s=c(this,Fr);this.addCommands({cmd:i.bind(this,t,_e._defaultOpacity),undo:i.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:de.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},AE=function(t){const i=c(this,Kn),r=s=>{x(this,Kn,s),w(this,me,SE).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:de.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},SE=function(t){if(!c(this,fn))return;w(this,me,Lp).call(this,{highlightOutlines:c(this,Ci).getNewOutline(t/2)}),this.fixAndSetPosition();const[i,r]=this.parentDimensions;this.setDims(this.width*i,this.height*r)},lv=function(){c(this,Vt)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Vt)),x(this,Vt,null),this.parent.drawLayer.remove(c(this,yt)),x(this,yt,null))},ma=function(t=this.parent){c(this,Vt)===null&&({id:Qt(this,Vt)._,clipPathId:Qt(this,uo)._}=t.drawLayer.draw(c(this,Ci),this.color,c(this,Fr)),x(this,yt,t.drawLayer.drawOutline(c(this,Yn))),c(this,ho)&&(c(this,ho).style.clipPath=c(this,uo)))},ni=new WeakSet,Xo=function({x:t,y:i,width:r,height:s},a){switch(a){case 90:return{x:1-i-s,y:t,width:s,height:r};case 180:return{x:1-t-r,y:1-i-s,width:r,height:s};case 270:return{x:i,y:1-t-r,width:s,height:r}}return{x:t,y:i,width:r,height:s}},EE=function(t){_e._keyboardManager.exec(this,t)},Ip=function(t){if(!c(this,oc))return;const i=window.getSelection();t?i.setPosition(c(this,oc),c(this,sh)):i.setPosition(c(this,ah),c(this,oh))},uu=function(){return c(this,fn)?this.rotation:0},_E=function(){if(c(this,fn))return null;const[t,i]=this.pageDimensions,[r,s]=this.pageTranslation,a=c(this,Dr),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:d,width:h,height:p}of a){const f=u*t+r,m=(1-d-p)*i+s;o[l]=o[l+4]=f,o[l+1]=o[l+3]=m,o[l+2]=o[l+6]=f+h*t,o[l+5]=o[l+7]=m+p*i,l+=8}return o},CE=function(t){return c(this,Ci).serialize(t,w(this,me,uu).call(this))},TE=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},PE=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},LE=function(t){const{color:i}=this._initialData;return t.color.some((r,s)=>r!==i[s])},A(_e,ni),ue(_e,"_defaultColor",null),ue(_e,"_defaultOpacity",1),ue(_e,"_defaultThickness",12),ue(_e,"_type","highlight"),ue(_e,"_editorType",ye.HIGHLIGHT),ue(_e,"_freeHighlightId",-1),ue(_e,"_freeHighlight",null),ue(_e,"_freeHighlightClipId","");let bf=_e;var po,fo,tr,Or,Qn,mo,go,yo,jr,dc,vo,xo,Ds,q,IE,RE,ME,NE,uv,DE,dv,FE,OE,jE,zE,BE,ga,hv,pv,fv,Rp,Mp,Yo,mv,Np,ns,HE,gv,$E,UE,yv,Dp,du;const qe=class qe extends Ie{constructor(t){super({...t,name:"inkEditor"});A(this,q);A(this,po,0);A(this,fo,0);A(this,tr,null);A(this,Or,new Path2D);A(this,Qn,!1);A(this,mo,null);A(this,go,!1);A(this,yo,!1);A(this,jr,null);A(this,dc,null);A(this,vo,0);A(this,xo,0);A(this,Ds,null);this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t,i){Ie.initialize(t,i)}static updateDefaultParams(t,i){switch(t){case de.INK_THICKNESS:qe._defaultThickness=i;break;case de.INK_COLOR:qe._defaultColor=i;break;case de.INK_OPACITY:qe._defaultOpacity=i/100;break}}updateParams(t,i){switch(t){case de.INK_THICKNESS:w(this,q,IE).call(this,i);break;case de.INK_COLOR:w(this,q,RE).call(this,i);break;case de.INK_OPACITY:w(this,q,ME).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[de.INK_THICKNESS,qe._defaultThickness],[de.INK_COLOR,qe._defaultColor||Ie._defaultLineColor],[de.INK_OPACITY,Math.round(qe._defaultOpacity*100)]]}get propertiesToUpdate(){return[[de.INK_THICKNESS,this.thickness||qe._defaultThickness],[de.INK_COLOR,this.color||qe._defaultColor||Ie._defaultLineColor],[de.INK_OPACITY,Math.round(100*(this.opacity??qe._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(w(this,q,Rp).call(this),w(this,q,Mp).call(this)),this.isAttachedToDOM||(this.parent.add(this),w(this,q,Yo).call(this)),w(this,q,du).call(this)))}remove(){var t;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,tr)&&(clearTimeout(c(this,tr)),x(this,tr,null)),(t=c(this,jr))==null||t.disconnect(),x(this,jr,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&t===null&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,i]=this.parentDimensions,r=this.width*t,s=this.height*i;this.setDimensions(r,s)}enableEditMode(){c(this,Qn)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,w(this,q,hv).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),w(this,q,pv).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,Qn)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),x(this,Qn,!0),this.div.classList.add("disabled"),w(this,q,du).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){t.button!==0||!this.isInEditMode()||c(this,Qn)||(this.setInForeground(),t.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),w(this,q,DE).call(this,t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),w(this,q,dv).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),w(this,q,fv).call(this,t)}canvasPointerleave(t){w(this,q,fv).call(this,t)}get isResizable(){return!this.isEmpty()&&c(this,Qn)}render(){if(this.div)return this.div;let t,i;this.width&&(t=this.x,i=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[r,s,a,o]=w(this,q,NE).call(this);if(this.setAt(r,s,0,0),this.setDims(a,o),w(this,q,Rp).call(this),this.width){const[l,u]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*u),this.setAt(t*l,i*u,this.width*l,this.height*u),x(this,yo,!0),w(this,q,Yo).call(this),this.setDims(this.width*l,this.height*u),w(this,q,ga).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return w(this,q,Mp).call(this),this.div}setDimensions(t,i){const r=Math.round(t),s=Math.round(i);if(c(this,vo)===r&&c(this,xo)===s)return;x(this,vo,r),x(this,xo,s),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=t/a,this.height=i/o,this.fixAndSetPosition(),c(this,Qn)&&w(this,q,mv).call(this,t,i),w(this,q,Yo).call(this),w(this,q,ga).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(t,i,r){var E,g,v;if(t instanceof Y0)return null;const s=await super.deserialize(t,i,r);s.thickness=t.thickness,s.color=ne.makeHexColor(...t.color),s.opacity=t.opacity;const[a,o]=s.pageDimensions,l=s.width*a,u=s.height*o,d=s.parentScale,h=t.thickness/2;x(s,Qn,!0),x(s,vo,Math.round(l)),x(s,xo,Math.round(u));const{paths:p,rect:f,rotation:m}=t;for(let{bezier:b}of p){b=w(E=qe,ns,$E).call(E,b,f,m);const C=[];s.paths.push(C);let T=d*(b[0]-h),_=d*(b[1]-h);for(let R=2,O=b.length;R<O;R+=6){const j=d*(b[R]-h),F=d*(b[R+1]-h),H=d*(b[R+2]-h),K=d*(b[R+3]-h),Q=d*(b[R+4]-h),W=d*(b[R+5]-h);C.push([[T,_],[j,F],[H,K],[Q,W]]),T=Q,_=W}const L=w(this,ns,HE).call(this,C);s.bezierPath2D.push(L)}const y=w(g=s,q,yv).call(g);return x(s,fo,Math.max(Ie.MIN_SIZE,y[2]-y[0])),x(s,po,Math.max(Ie.MIN_SIZE,y[3]-y[1])),w(v=s,q,mv).call(v,l,u),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),i=Ie._colorManager.convert(this.ctx.strokeStyle);return{annotationType:ye.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:w(this,q,UE).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};po=new WeakMap,fo=new WeakMap,tr=new WeakMap,Or=new WeakMap,Qn=new WeakMap,mo=new WeakMap,go=new WeakMap,yo=new WeakMap,jr=new WeakMap,dc=new WeakMap,vo=new WeakMap,xo=new WeakMap,Ds=new WeakMap,q=new WeakSet,IE=function(t){const i=s=>{this.thickness=s,w(this,q,du).call(this)},r=this.thickness;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:de.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},RE=function(t){const i=s=>{this.color=s,w(this,q,ga).call(this)},r=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:de.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},ME=function(t){const i=s=>{this.opacity=s,w(this,q,ga).call(this)};t/=100;const r=this.opacity;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:de.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},NE=function(){const{parentRotation:t,parentDimensions:[i,r]}=this;switch(t){case 90:return[0,r,r,i];case 180:return[i,r,i,r];case 270:return[i,0,r,i];default:return[0,0,i,r]}},uv=function(){const{ctx:t,color:i,opacity:r,thickness:s,parentScale:a,scaleFactor:o}=this;t.lineWidth=s*a/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${i}${II(r)}`},DE=function(t,i){this.canvas.addEventListener("contextmenu",li,{signal:this._uiManager._signal}),w(this,q,pv).call(this),x(this,mo,new AbortController);const r=this._uiManager.combinedSignal(c(this,mo));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:r}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:r}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:r}),this.isEditing=!0,c(this,yo)||(x(this,yo,!0),w(this,q,Yo).call(this),this.thickness||(this.thickness=qe._defaultThickness),this.color||(this.color=qe._defaultColor||Ie._defaultLineColor),this.opacity??(this.opacity=qe._defaultOpacity)),this.currentPath.push([t,i]),x(this,go,!1),w(this,q,uv).call(this),x(this,Ds,()=>{w(this,q,jE).call(this),c(this,Ds)&&window.requestAnimationFrame(c(this,Ds))}),window.requestAnimationFrame(c(this,Ds))},dv=function(t,i){const[r,s]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===r&&i===s)return;const a=this.currentPath;let o=c(this,Or);if(a.push([t,i]),x(this,go,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(t,i);return}a.length===3&&(x(this,Or,o=new Path2D),o.moveTo(...a[0])),w(this,q,zE).call(this,o,...a.at(-3),...a.at(-2),t,i)},FE=function(){if(this.currentPath.length===0)return;const t=this.currentPath.at(-1);c(this,Or).lineTo(...t)},OE=function(t,i){x(this,Ds,null),t=Math.min(Math.max(t,0),this.canvas.width),i=Math.min(Math.max(i,0),this.canvas.height),w(this,q,dv).call(this,t,i),w(this,q,FE).call(this);let r;if(this.currentPath.length!==1)r=w(this,q,BE).call(this);else{const u=[t,i];r=[[u,u.slice(),u.slice(),u]]}const s=c(this,Or),a=this.currentPath;this.currentPath=[],x(this,Or,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(r),this.bezierPath2D.push(s),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(w(this,q,Rp).call(this),w(this,q,Mp).call(this)),w(this,q,du).call(this))};this.addCommands({cmd:o,undo:l,mustExec:!0})},jE=function(){if(!c(this,go))return;x(this,go,!1);const t=Math.ceil(this.thickness*this.parentScale),i=this.currentPath.slice(-3),r=i.map(o=>o[0]),s=i.map(o=>o[1]);Math.min(...r)-t,Math.max(...r)+t,Math.min(...s)-t,Math.max(...s)+t;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(c(this,Or)),a.restore()},zE=function(t,i,r,s,a,o,l){const u=(i+s)/2,d=(r+a)/2,h=(s+o)/2,p=(a+l)/2;t.bezierCurveTo(u+2*(s-u)/3,d+2*(a-d)/3,h+2*(s-h)/3,p+2*(a-p)/3,h,p)},BE=function(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const i=[];let r,[s,a]=t[0];for(r=1;r<t.length-2;r++){const[f,m]=t[r],[y,E]=t[r+1],g=(f+y)/2,v=(m+E)/2,b=[s+2*(f-s)/3,a+2*(m-a)/3],C=[g+2*(f-g)/3,v+2*(m-v)/3];i.push([[s,a],b,C,[g,v]]),[s,a]=[g,v]}const[o,l]=t[r],[u,d]=t[r+1],h=[s+2*(o-s)/3,a+2*(l-a)/3],p=[u+2*(o-u)/3,d+2*(l-d)/3];return i.push([[s,a],h,p,[u,d]]),i},ga=function(){if(this.isEmpty()){w(this,q,Np).call(this);return}w(this,q,uv).call(this);const{canvas:t,ctx:i}=this;i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height),w(this,q,Np).call(this);for(const r of this.bezierPath2D)i.stroke(r)},hv=function(){if(c(this,dc))return;x(this,dc,new AbortController);const t=this._uiManager.combinedSignal(c(this,dc));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:t})},pv=function(){var t;(t=this.pointerdownAC)==null||t.abort(),this.pointerdownAC=null},fv=function(t){var i;(i=c(this,mo))==null||i.abort(),x(this,mo,null),w(this,q,hv).call(this),c(this,tr)&&clearTimeout(c(this,tr)),x(this,tr,setTimeout(()=>{x(this,tr,null),this.canvas.removeEventListener("contextmenu",li)},10)),w(this,q,OE).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Rp=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Mp=function(){x(this,jr,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&this.setDimensions(i.width,i.height)})),c(this,jr).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,jr))==null||t.disconnect(),x(this,jr,null)},{once:!0})},Yo=function(){if(!c(this,yo))return;const[t,i]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*i),w(this,q,Np).call(this)},mv=function(t,i){const r=w(this,q,Dp).call(this),s=(t-r)/c(this,fo),a=(i-r)/c(this,po);this.scaleFactor=Math.min(s,a)},Np=function(){const t=w(this,q,Dp).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ns=new WeakSet,HE=function(t){const i=new Path2D;for(let r=0,s=t.length;r<s;r++){const[a,o,l,u]=t[r];r===0&&i.moveTo(...a),i.bezierCurveTo(o[0],o[1],l[0],l[1],u[0],u[1])}return i},gv=function(t,i,r){const[s,a,o,l]=i;switch(r){case 0:for(let u=0,d=t.length;u<d;u+=2)t[u]+=s,t[u+1]=l-t[u+1];break;case 90:for(let u=0,d=t.length;u<d;u+=2){const h=t[u];t[u]=t[u+1]+s,t[u+1]=h+a}break;case 180:for(let u=0,d=t.length;u<d;u+=2)t[u]=o-t[u],t[u+1]+=a;break;case 270:for(let u=0,d=t.length;u<d;u+=2){const h=t[u];t[u]=o-t[u+1],t[u+1]=l-h}break;default:throw new Error("Invalid rotation")}return t},$E=function(t,i,r){const[s,a,o,l]=i;switch(r){case 0:for(let u=0,d=t.length;u<d;u+=2)t[u]-=s,t[u+1]=l-t[u+1];break;case 90:for(let u=0,d=t.length;u<d;u+=2){const h=t[u];t[u]=t[u+1]-a,t[u+1]=h-s}break;case 180:for(let u=0,d=t.length;u<d;u+=2)t[u]=o-t[u],t[u+1]-=a;break;case 270:for(let u=0,d=t.length;u<d;u+=2){const h=t[u];t[u]=l-t[u+1],t[u+1]=o-h}break;default:throw new Error("Invalid rotation")}return t},UE=function(t,i,r,s){var d,h;const a=[],o=this.thickness/2,l=t*i+o,u=t*r+o;for(const p of this.paths){const f=[],m=[];for(let y=0,E=p.length;y<E;y++){const[g,v,b,C]=p[y];if(g[0]===C[0]&&g[1]===C[1]&&E===1){const K=t*g[0]+l,Q=t*g[1]+u;f.push(K,Q),m.push(K,Q);break}const T=t*g[0]+l,_=t*g[1]+u,L=t*v[0]+l,R=t*v[1]+u,O=t*b[0]+l,j=t*b[1]+u,F=t*C[0]+l,H=t*C[1]+u;y===0&&(f.push(T,_),m.push(T,_)),f.push(L,R,O,j,F,H),m.push(L,R),y===E-1&&m.push(F,H)}a.push({bezier:w(d=qe,ns,gv).call(d,f,s,this.rotation),points:w(h=qe,ns,gv).call(h,m,s,this.rotation)})}return a},yv=function(){let t=1/0,i=-1/0,r=1/0,s=-1/0;for(const a of this.paths)for(const[o,l,u,d]of a){const h=ne.bezierBoundingBox(...o,...l,...u,...d);t=Math.min(t,h[0]),r=Math.min(r,h[1]),i=Math.max(i,h[2]),s=Math.max(s,h[3])}return[t,r,i,s]},Dp=function(){return c(this,Qn)?Math.ceil(this.thickness*this.parentScale):0},du=function(t=!1){if(this.isEmpty())return;if(!c(this,Qn)){w(this,q,ga).call(this);return}const i=w(this,q,yv).call(this),r=w(this,q,Dp).call(this);x(this,fo,Math.max(Ie.MIN_SIZE,i[2]-i[0])),x(this,po,Math.max(Ie.MIN_SIZE,i[3]-i[1]));const s=Math.ceil(r+c(this,fo)*this.scaleFactor),a=Math.ceil(r+c(this,po)*this.scaleFactor),[o,l]=this.parentDimensions;this.width=s/o,this.height=a/l,this.setAspectRatio(s,a);const u=this.translationX,d=this.translationY;this.translationX=-i[0],this.translationY=-i[1],w(this,q,Yo).call(this),w(this,q,ga).call(this),x(this,vo,s),x(this,xo,a),this.setDims(s,a);const h=t?r/this.scaleFactor/2:0;this.translate(u-this.translationX-h,d-this.translationY-h)},A(qe,ns),ue(qe,"_defaultColor",null),ue(qe,"_defaultOpacity",1),ue(qe,"_defaultThickness",1),ue(qe,"_type","ink"),ue(qe,"_editorType",ye.INK);let cv=qe;var Xe,Mt,Fs,zr,Os,hc,nr,Br,ir,Nn,pc,ke,hu,pu,Fp,xv,VE,Op,wv,jp,WE,qE;const Tu=class Tu extends Ie{constructor(t){super({...t,name:"stampEditor"});A(this,ke);A(this,Xe,null);A(this,Mt,null);A(this,Fs,null);A(this,zr,null);A(this,Os,null);A(this,hc,"");A(this,nr,null);A(this,Br,null);A(this,ir,null);A(this,Nn,!1);A(this,pc,!1);x(this,zr,t.bitmapUrl),x(this,Os,t.bitmapFile)}static initialize(t,i){Ie.initialize(t,i)}static get supportedTypes(){return Ae(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(i=>`image/${i}`))}static get supportedTypesStr(){return Ae(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,i){i.pasteEditor(ye.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t,i;c(this,Mt)&&(x(this,Xe,null),this._uiManager.imageManager.deleteId(c(this,Mt)),(t=c(this,nr))==null||t.remove(),x(this,nr,null),(i=c(this,Br))==null||i.disconnect(),x(this,Br,null),c(this,ir)&&(clearTimeout(c(this,ir)),x(this,ir,null))),super.remove()}rebuild(){if(!this.parent){c(this,Mt)&&w(this,ke,Fp).call(this);return}super.rebuild(),this.div!==null&&(c(this,Mt)&&c(this,nr)===null&&w(this,ke,Fp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,Fs)||c(this,Xe)||c(this,zr)||c(this,Os)||c(this,Mt))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;if(this.width&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,Xe)?w(this,ke,xv).call(this):w(this,ke,Fp).call(this),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(t*r,i*s,this.width*r,this.height*s)}return this.div}copyCanvas(t,i,r=!1){var f;t||(t=224);const{width:s,height:a}=c(this,Xe),o=new my;let l=c(this,Xe),u=s,d=a,h=null;if(i){if(s>i||a>i){const R=Math.min(i/s,i/a);u=Math.floor(s*R),d=Math.floor(a*R)}h=document.createElement("canvas");const m=h.width=Math.ceil(u*o.sx),y=h.height=Math.ceil(d*o.sy);c(this,Nn)||(l=w(this,ke,Op).call(this,m,y));const E=h.getContext("2d");E.filter=this._uiManager.hcmFilter;let g="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":(f=window.matchMedia)!=null&&f.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",v="#42414d");const b=15,C=b*o.sx,T=b*o.sy,_=new OffscreenCanvas(C*2,T*2),L=_.getContext("2d");L.fillStyle=g,L.fillRect(0,0,C*2,T*2),L.fillStyle=v,L.fillRect(0,0,C,T),L.fillRect(C,T,C,T),E.fillStyle=E.createPattern(_,"repeat"),E.fillRect(0,0,m,y),E.drawImage(l,0,0,l.width,l.height,0,0,m,y)}let p=null;if(r){let m,y;if(o.symmetric&&l.width<t&&l.height<t)m=l.width,y=l.height;else if(l=c(this,Xe),s>t||a>t){const v=Math.min(t/s,t/a);m=Math.floor(s*v),y=Math.floor(a*v),c(this,Nn)||(l=w(this,ke,Op).call(this,m,y))}const g=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});g.drawImage(l,0,0,l.width,l.height,0,0,m,y),p={width:m,height:y,data:g.getImageData(0,0,m,y).data}}return{canvas:h,width:u,height:d,imageData:p}}getImageForAltText(){return c(this,nr)}static async deserialize(t,i,r){var y;let s=null;if(t instanceof nE){const{data:{rect:E,rotation:g,id:v,structParent:b,popupRef:C},container:T,parent:{page:{pageNumber:_}}}=t,L=T.querySelector("canvas"),R=r.imageManager.getFromCanvas(T.id,L);L.remove();const O=((y=await i._structTree.getAriaAttributes(`${j0}${v}`))==null?void 0:y.get("aria-label"))||"";s=t={annotationType:ye.STAMP,bitmapId:R.id,bitmap:R.bitmap,pageIndex:_-1,rect:E.slice(0),rotation:g,id:v,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:b,popupRef:C}}const a=await super.deserialize(t,i,r),{rect:o,bitmap:l,bitmapUrl:u,bitmapId:d,isSvg:h,accessibilityData:p}=t;d&&r.imageManager.isValidId(d)?(x(a,Mt,d),l&&x(a,Xe,l)):x(a,zr,u),x(a,Nn,h);const[f,m]=a.pageDimensions;return a.width=(o[2]-o[0])/f,a.height=(o[3]-o[1])/m,a.annotationElementId=t.id||null,p&&(a.altTextData=p),a._initialData=s,x(a,pc,!!s),a}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:ye.STAMP,bitmapId:c(this,Mt),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,Nn),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=w(this,ke,jp).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=w(this,ke,qE).call(this,r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,i===null)return r;i.stamps||(i.stamps=new Map);const o=c(this,Nn)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!i.stamps.has(c(this,Mt)))i.stamps.set(c(this,Mt),{area:o,serialized:r}),r.bitmap=w(this,ke,jp).call(this,!1);else if(c(this,Nn)){const l=i.stamps.get(c(this,Mt));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=w(this,ke,jp).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Xe=new WeakMap,Mt=new WeakMap,Fs=new WeakMap,zr=new WeakMap,Os=new WeakMap,hc=new WeakMap,nr=new WeakMap,Br=new WeakMap,ir=new WeakMap,Nn=new WeakMap,pc=new WeakMap,ke=new WeakSet,hu=function(t,i=!1){if(!t){this.remove();return}x(this,Xe,t.bitmap),i||(x(this,Mt,t.id),x(this,Nn,t.isSvg)),t.file&&x(this,hc,t.file.name),w(this,ke,xv).call(this)},pu=function(){if(x(this,Fs,null),this._uiManager.enableWaiting(!1),!!c(this,nr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Xe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Xe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Fp=function(){if(c(this,Mt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,Mt)).then(r=>w(this,ke,hu).call(this,r,!0)).finally(()=>w(this,ke,pu).call(this));return}if(c(this,zr)){const r=c(this,zr);x(this,zr,null),this._uiManager.enableWaiting(!0),x(this,Fs,this._uiManager.imageManager.getFromUrl(r).then(s=>w(this,ke,hu).call(this,s)).finally(()=>w(this,ke,pu).call(this)));return}if(c(this,Os)){const r=c(this,Os);x(this,Os,null),this._uiManager.enableWaiting(!0),x(this,Fs,this._uiManager.imageManager.getFromFile(r).then(s=>w(this,ke,hu).call(this,s)).finally(()=>w(this,ke,pu).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Tu.supportedTypesStr;const i=this._uiManager._signal;x(this,Fs,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),w(this,ke,hu).call(this,s)}r()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:i})}).finally(()=>w(this,ke,pu).call(this))),t.click()},xv=function(){const{div:t}=this;let{width:i,height:r}=c(this,Xe);const[s,a]=this.pageDimensions,o=.75;if(this.width)i=this.width*s,r=this.height*a;else if(i>o*s||r>o*a){const h=Math.min(o*s/i,o*a/r);i*=h,r*=h}const[l,u]=this.parentDimensions;this.setDims(i*l/s,r*u/a),this._uiManager.enableWaiting(!1);const d=x(this,nr,document.createElement("canvas"));d.setAttribute("role","img"),this.addContainer(d),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),w(this,ke,wv).call(this,i,r),w(this,ke,WE).call(this),c(this,pc)||(this.parent.addUndoableEditor(this),x(this,pc,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,hc)&&d.setAttribute("aria-label",c(this,hc))},VE=function(t,i){var o;const[r,s]=this.parentDimensions;this.width=t/r,this.height=i/s,(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,ir)!==null&&clearTimeout(c(this,ir)),x(this,ir,setTimeout(()=>{x(this,ir,null),w(this,ke,wv).call(this,t,i)},200))},Op=function(t,i){const{width:r,height:s}=c(this,Xe);let a=r,o=s,l=c(this,Xe);for(;a>2*t||o>2*i;){const u=a,d=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,u,d,0,0,a,o),l=h.transferToImageBitmap()}return l},wv=function(t,i){const r=new my,s=Math.ceil(t*r.sx),a=Math.ceil(i*r.sy),o=c(this,nr);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=c(this,Nn)?c(this,Xe):w(this,ke,Op).call(this,s,a),u=o.getContext("2d");u.filter=this._uiManager.hcmFilter,u.drawImage(l,0,0,l.width,l.height,0,0,s,a)},jp=function(t){if(t){if(c(this,Nn)){const s=this._uiManager.imageManager.getSvgUrl(c(this,Mt));if(s)return s}const i=document.createElement("canvas");return{width:i.width,height:i.height}=c(this,Xe),i.getContext("2d").drawImage(c(this,Xe),0,0),i.toDataURL()}if(c(this,Nn)){const[i,r]=this.pageDimensions,s=Math.round(this.width*i*Js.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Js.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(c(this,Xe),0,0,c(this,Xe).width,c(this,Xe).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(c(this,Xe))},WE=function(){this._uiManager._signal&&(x(this,Br,new ResizeObserver(t=>{const i=t[0].contentRect;i.width&&i.height&&w(this,ke,VE).call(this,i.width,i.height)})),c(this,Br).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var t;(t=c(this,Br))==null||t.disconnect(),x(this,Br,null)},{once:!0}))},qE=function(t){var u;const{rect:i,pageIndex:r,accessibilityData:{altText:s}}=this._initialData,a=t.rect.every((d,h)=>Math.abs(d-i[h])<1),o=t.pageIndex===r,l=(((u=t.accessibilityData)==null?void 0:u.alt)||"")===s;return{isSame:a&&o&&l,isSameAltText:l}},ue(Tu,"_type","stamp"),ue(Tu,"_editorType",ye.STAMP);let vv=Tu;var wo,fc,rr,js,Hr,Dn,zs,mc,gc,Wt,$r,se,Bs,Ft,GE,kv,Av,Sv,zp;const hi=class hi{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:d}){A(this,Ft);A(this,wo);A(this,fc,!1);A(this,rr,null);A(this,js,null);A(this,Hr,null);A(this,Dn,new Map);A(this,zs,!1);A(this,mc,!1);A(this,gc,!1);A(this,Wt,null);A(this,$r,null);A(this,se);const h=[...c(hi,Bs).values()];if(!hi._initialized){hi._initialized=!0;for(const p of h)p.initialize(d,e)}e.registerEditorTypes(h),x(this,se,e),this.pageIndex=t,this.div=i,x(this,wo,s),x(this,rr,a),this.viewport=u,x(this,Wt,l),this.drawLayer=o,this._structTree=r,c(this,se).addLayer(this)}get isEmpty(){return c(this,Dn).size===0}get isInvisible(){return this.isEmpty&&c(this,se).getMode()===ye.NONE}updateToolbar(e){c(this,se).updateToolbar(e)}updateMode(e=c(this,se).getMode()){switch(w(this,Ft,zp).call(this),e){case ye.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ye.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case ye.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of c(hi,Bs).values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=c(this,Wt))==null?void 0:t.div)}addInkEditorIfNeeded(e){if(c(this,se).getMode()!==ye.INK)return;if(!e){for(const i of c(this,Dn).values())if(i.isEmpty()){i.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(e){c(this,se).setEditingState(e)}addCommands(e){c(this,se).addCommands(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=c(this,rr))==null||t.div.classList.toggle("disabled",!e)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of c(this,Dn).values())i.enableEditing(),i.show(!0),i.annotationElementId&&(c(this,se).removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!c(this,rr))return;const t=c(this,rr).getEditableAnnotations();for(const i of t){if(i.hide(),c(this,se).isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}}disable(){var r;x(this,gc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of c(this,Dn).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(c(this,rr)){const s=c(this,rr).getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(c(this,se).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(c(this,se).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}w(this,Ft,zp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of c(hi,Bs).values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),x(this,gc,!1)}getEditableAnnotation(e){var t;return((t=c(this,rr))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){c(this,se).getActive()!==e&&c(this,se).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=c(this,Wt))!=null&&e.div&&!c(this,$r)){x(this,$r,new AbortController);const t=c(this,se).combinedSignal(c(this,$r));c(this,Wt).div.addEventListener("pointerdown",w(this,Ft,GE).bind(this),{signal:t}),c(this,Wt).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=c(this,Wt))!=null&&e.div&&c(this,$r)&&(c(this,$r).abort(),x(this,$r,null),c(this,Wt).div.classList.remove("highlighting"))}enableClick(){if(c(this,js))return;x(this,js,new AbortController);const e=c(this,se).combinedSignal(c(this,js));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:e})}disableClick(){var e;(e=c(this,js))==null||e.abort(),x(this,js,null)}attach(e){c(this,Dn).set(e.id,e);const{annotationElementId:t}=e;t&&c(this,se).isDeletedAnnotationElement(t)&&c(this,se).removeDeletedAnnotationElement(e)}detach(e){var t;c(this,Dn).delete(e.id),(t=c(this,wo))==null||t.removePointerInTextLayer(e.contentDiv),!c(this,gc)&&e.annotationElementId&&c(this,se).addDeletedAnnotationElement(e)}remove(e){this.detach(e),c(this,se).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1,c(this,mc)||this.addInkEditorIfNeeded(!1)}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(c(this,se).addDeletedAnnotationElement(e.annotationElementId),Ie.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),c(this,se).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),c(this,se).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!c(this,Hr)&&(e._focusEventsAllowed=!1,x(this,Hr,setTimeout(()=>{x(this,Hr,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:c(this,se)._signal}),t.focus())},0))),e._structTreeParentId=(i=c(this,wo))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return c(this,se).getId()}combinedSignal(e){return c(this,se).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=c(this,Ft,kv))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){c(this,se).updateToolbar(e),c(this,se).updateMode(e);const{offsetX:i,offsetY:r}=w(this,Ft,Sv).call(this),s=this.getNextId(),a=w(this,Ft,Av).call(this,{parent:this,id:s,x:i,y:r,uiManager:c(this,se),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=c(hi,Bs).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,c(this,se)))||null}createAndAddNewEditor(e,t,i={}){const r=this.getNextId(),s=w(this,Ft,Av).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:c(this,se),isCentered:t,...i});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(w(this,Ft,Sv).call(this),!0)}setSelected(e){c(this,se).setSelected(e)}toggleSelected(e){c(this,se).toggleSelected(e)}unselect(e){c(this,se).unselect(e)}pointerup(e){const{isMac:t}=rn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&c(this,zs)){if(x(this,zs,!1),!c(this,fc)){x(this,fc,!0);return}if(c(this,se).getMode()===ye.STAMP){c(this,se).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(c(this,se).getMode()===ye.HIGHLIGHT&&this.enableTextSelection(),c(this,zs)){x(this,zs,!1);return}const{isMac:t}=rn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;x(this,zs,!0);const i=c(this,se).getActive();x(this,fc,!i||i.isEmpty())}findNewParent(e,t,i){const r=c(this,se).findParent(t,i);return r===null||r===this?!1:(r.changeParent(e),!0)}destroy(){var e,t;((e=c(this,se).getActive())==null?void 0:e.parent)===this&&(c(this,se).commitOrRemove(),c(this,se).setActiveEditor(null)),c(this,Hr)&&(clearTimeout(c(this,Hr)),x(this,Hr,null));for(const i of c(this,Dn).values())(t=c(this,wo))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,c(this,Dn).clear(),c(this,se).removeLayer(this)}render({viewport:e}){this.viewport=e,To(this.div,e);for(const t of c(this,se).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){c(this,se).commitOrRemove(),w(this,Ft,zp).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,To(this.div,{rotation:i}),t!==i)for(const r of c(this,Dn).values())r.rotate(i);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return c(this,se).viewParameters.realScale}};wo=new WeakMap,fc=new WeakMap,rr=new WeakMap,js=new WeakMap,Hr=new WeakMap,Dn=new WeakMap,zs=new WeakMap,mc=new WeakMap,gc=new WeakMap,Wt=new WeakMap,$r=new WeakMap,se=new WeakMap,Bs=new WeakMap,Ft=new WeakSet,GE=function(e){c(this,se).unselectAll();const{target:t}=e;if(t===c(this,Wt).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&c(this,Wt).div.contains(t)){const{isMac:i}=rn.platform;if(e.button!==0||e.ctrlKey&&i)return;c(this,se).showAllEditors("highlight",!0,!0),c(this,Wt).div.classList.add("free"),this.toggleDrawing(),bf.startHighlighting(this,c(this,se).direction==="ltr",{target:c(this,Wt).div,x:e.x,y:e.y}),c(this,Wt).div.addEventListener("pointerup",()=>{c(this,Wt).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,se)._signal}),e.preventDefault()}},kv=function(){return c(hi,Bs).get(c(this,se).getMode())},Av=function(e){const t=c(this,Ft,kv);return t?new t.prototype.constructor(e):null},Sv=function(){const{x:e,y:t,width:i,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+r),u=(s+o)/2-e,d=(a+l)/2-t,[h,p]=this.viewport.rotation%180===0?[u,d]:[d,u];return{offsetX:h,offsetY:p}},zp=function(){x(this,mc,!0);for(const e of c(this,Dn).values())e.isEmpty()&&e.remove();x(this,mc,!1)},ue(hi,"_initialized",!1),A(hi,Bs,new Map([ev,cv,vv,bf].map(e=>[e._editorType,e])));let bv=hi;var sr,ch,ot,Ur,uh,_v,Ro,Cv,XE;const Lt=class Lt{constructor({pageIndex:e}){A(this,Ro);A(this,sr,null);A(this,ch,0);A(this,ot,new Map);A(this,Ur,new Map);this.pageIndex=e}setParent(e){if(!c(this,sr)){x(this,sr,e);return}if(c(this,sr)!==e){if(c(this,ot).size>0)for(const t of c(this,ot).values())t.remove(),e.append(t);x(this,sr,e)}}static get _svgFactory(){return Ae(this,"_svgFactory",new X0)}draw(e,t,i,r=!1){const s=Qt(this,ch)._++,a=w(this,Ro,Cv).call(this,e.box);a.classList.add(...e.classNamesForDrawing);const o=Lt._svgFactory.createElement("defs");a.append(o);const l=Lt._svgFactory.createElement("path");o.append(l);const u=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",u),l.setAttribute("d",e.toSVGPath()),r&&c(this,Ur).set(s,l);const d=w(this,Ro,XE).call(this,o,u),h=Lt._svgFactory.createElement("use");return a.append(h),a.setAttribute("fill",t),a.setAttribute("fill-opacity",i),h.setAttribute("href",`#${u}`),c(this,ot).set(s,a),{id:s,clipPathId:`url(#${d})`}}drawOutline(e){const t=Qt(this,ch)._++,i=w(this,Ro,Cv).call(this,e.box);i.classList.add(...e.classNamesForOutlining);const r=Lt._svgFactory.createElement("defs");i.append(r);const s=Lt._svgFactory.createElement("path");r.append(s);const a=`path_p${this.pageIndex}_${t}`;s.setAttribute("id",a),s.setAttribute("d",e.toSVGPath()),s.setAttribute("vector-effect","non-scaling-stroke");let o;if(e.mustRemoveSelfIntersections){const d=Lt._svgFactory.createElement("mask");r.append(d),o=`mask_p${this.pageIndex}_${t}`,d.setAttribute("id",o),d.setAttribute("maskUnits","objectBoundingBox");const h=Lt._svgFactory.createElement("rect");d.append(h),h.setAttribute("width","1"),h.setAttribute("height","1"),h.setAttribute("fill","white");const p=Lt._svgFactory.createElement("use");d.append(p),p.setAttribute("href",`#${a}`),p.setAttribute("stroke","none"),p.setAttribute("fill","black"),p.setAttribute("fill-rule","nonzero"),p.classList.add("mask")}const l=Lt._svgFactory.createElement("use");i.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const u=l.cloneNode();return i.append(u),l.classList.add("mainOutline"),u.classList.add("secondaryOutline"),c(this,ot).set(t,i),t}finalizeLine(e,t){const i=c(this,Ur).get(e);c(this,Ur).delete(e),this.updateBox(e,t.box),i.setAttribute("d",t.toSVGPath())}updateLine(e,t){c(this,ot).get(e).firstChild.firstChild.setAttribute("d",t.toSVGPath())}updatePath(e,t){c(this,Ur).get(e).setAttribute("d",t.toSVGPath())}updateBox(e,t){var i;w(i=Lt,uh,_v).call(i,c(this,ot).get(e),t)}show(e,t){c(this,ot).get(e).classList.toggle("hidden",!t)}rotate(e,t){c(this,ot).get(e).setAttribute("data-main-rotation",t)}changeColor(e,t){c(this,ot).get(e).setAttribute("fill",t)}changeOpacity(e,t){c(this,ot).get(e).setAttribute("fill-opacity",t)}addClass(e,t){c(this,ot).get(e).classList.add(t)}removeClass(e,t){c(this,ot).get(e).classList.remove(t)}getSVGRoot(e){return c(this,ot).get(e)}remove(e){c(this,Ur).delete(e),c(this,sr)!==null&&(c(this,ot).get(e).remove(),c(this,ot).delete(e))}destroy(){x(this,sr,null);for(const e of c(this,ot).values())e.remove();c(this,ot).clear(),c(this,Ur).clear()}};sr=new WeakMap,ch=new WeakMap,ot=new WeakMap,Ur=new WeakMap,uh=new WeakSet,_v=function(e,{x:t=0,y:i=0,width:r=1,height:s=1}={}){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*s}%`},Ro=new WeakSet,Cv=function(e){var i;const t=Lt._svgFactory.create(1,1,!0);return c(this,sr).append(t),t.setAttribute("aria-hidden",!0),w(i=Lt,uh,_v).call(i,t,e),t},XE=function(e,t){const i=Lt._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${t}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Lt._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},A(Lt,uh);let Ev=Lt;he.AbortException;he.AnnotationEditorLayer;he.AnnotationEditorParamsType;he.AnnotationEditorType;he.AnnotationEditorUIManager;he.AnnotationLayer;he.AnnotationMode;he.ColorPicker;he.DOMSVGFactory;he.DrawLayer;he.FeatureTest;var uM=he.GlobalWorkerOptions;he.ImageKind;he.InvalidPDFException;he.MissingPDFException;he.OPS;he.OutputScale;he.PDFDataRangeTransport;he.PDFDateString;he.PDFWorker;he.PasswordResponses;he.PermissionFlag;he.PixelsPerInch;he.RenderingCancelledException;he.TextLayer;he.UnexpectedResponseException;he.Util;he.VerbosityLevel;he.XfaLayer;he.build;he.createValidAbsoluteUrl;he.fetchData;var dM=he.getDocument;he.getFilenameFromUrl;he.getPdfFilenameFromUrl;he.getXfaPageViewport;he.isDataScheme;he.isPdfFile;he.noContextMenu;he.normalizeUnicode;he.setLayerDimensions;he.shadow;var hM=he.version;uM.workerSrc=`https://cdnjs.cloudflare.com/ajax/libs/pdf.js/${hM}/pdf.worker.min.js`;function pM({onFileProcessed:n}){const{setIsProcessing:e}=Mi(),[t,i]=re.useState(0),r=p=>p.replace(/[\x00-\x1F\x7F-\x9F]/g,"").replace(/%[0-9A-F]{2}/g," ").replace(/\s+/g," ").replace(/[\r\n]+/g,`
`).replace(/[^\x20-\x7E\n]/g,"").trim(),s=async p=>{const f=await p.arrayBuffer(),m=await dM({data:f}).promise;let y="";for(let E=1;E<=m.numPages;E++){const b=(await(await m.getPage(E)).getTextContent()).items.map(C=>C.str).join(" ");y+=b+`
`,i(E/m.numPages*100)}return r(y)},a=async p=>{e(!0),i(0);let f="";try{if(p.type.startsWith("image/")){const y=await oI.createWorker();await y.loadLanguage("eng"),await y.initialize("eng");const E=setInterval(()=>{i(v=>Math.min(v+10,90))},500),{data:{text:g}}=await y.recognize(p);clearInterval(E),i(100),await y.terminate(),f=g}else if(p.type==="application/pdf")f=await s(p);else{const y=new FileReader;await new Promise(E=>{y.onprogress=g=>{g.lengthComputable&&i(g.loaded/g.total*100)},y.onload=g=>{var v;f=(v=g.target)==null?void 0:v.result,E()},y.readAsText(p)})}const m=r(f);m.trim()&&(n==null||n(m))}catch(m){console.error("Error processing file:",m)}finally{e(!1),setTimeout(()=>i(0),1e3)}},o=re.useCallback(p=>{p.forEach(a)},[]),{getRootProps:l,getInputProps:u,isDragActive:d}=CA({onDrop:o,accept:{"text/plain":[".txt"],"application/pdf":[".pdf"],"image/*":[".png",".jpg",".jpeg"]},multiple:!1}),h=p=>p.startsWith("image/")?uP:p==="application/pdf"?N0:cP;return P.jsx("div",{className:"h-full",children:P.jsxs("div",{...l(),className:`
          h-full dropzone-animation relative p-8 border-3 border-dashed rounded-xl cursor-pointer
          transition-all duration-300 ease-in-out
          ${d?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50/50"}
        `,children:[P.jsx("input",{...u()}),P.jsxs("div",{className:"flex flex-col items-center gap-4 text-gray-600 h-full justify-center",children:[P.jsx("div",{className:`
            w-16 h-16 rounded-full flex items-center justify-center
            ${d?"bg-blue-100":"bg-gray-100"}
            transition-colors duration-300
          `,children:P.jsx(mP,{className:`
              w-8 h-8
              ${d?"text-blue-600":"text-gray-600"}
              transition-colors duration-300
            `})}),P.jsxs("div",{className:"text-center",children:[P.jsx("p",{className:"text-lg font-medium mb-2",children:d?"Drop your file here":"Drag & drop your study material"}),P.jsx("p",{className:"text-sm text-gray-500",children:"or click to browse your files"})]}),P.jsx("div",{className:"flex gap-6 mt-4",children:["image/*","application/pdf","text/plain"].map(p=>{const f=h(p);return P.jsxs("div",{className:"flex flex-col items-center gap-2",children:[P.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center",children:P.jsx(f,{className:"w-5 h-5 text-gray-600"})}),P.jsx("span",{className:"text-xs text-gray-500",children:p==="image/*"?"Images":p.split("/")[1].toUpperCase()})]},p)})})]}),t>0&&P.jsx("div",{className:"absolute inset-0 bg-white/90 flex items-center justify-center rounded-xl",children:P.jsxs("div",{className:"text-center",children:[P.jsx(MA,{className:"w-8 h-8 text-blue-600 animate-spin mb-4"}),P.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["Processing file... ",Math.round(t),"%"]})]})})]})})}const fM=[{id:"summarize",name:"Summarize",icon:TA,description:"Generate a concise summary",color:"from-blue-500 to-blue-600"},{id:"flashcards",name:"Flashcards",icon:LA,description:"Create study flashcards",color:"from-purple-500 to-purple-600"},{id:"quiz",name:"Quiz",icon:RA,description:"Generate practice questions",color:"from-green-500 to-green-600"}],mM=["short","medium","long"],gM=["multiple-choice","true-false","fill-in-blanks"],yM=["easy","medium","hard"];function vM(){const{selectedTool:n,setSelectedTool:e,toolSettings:t,updateToolSettings:i,inputText:r}=Mi(),s=async()=>{const u=r.split(/[.!?]+/).map(h=>h.trim()).filter(h=>h.length>10&&/[a-zA-Z]/.test(h));let d="";switch(n){case"summarize":{const h={short:Math.min(3,u.length),medium:Math.min(5,u.length),long:Math.min(7,u.length)}[t.summaryLength];d=`# Summary

## Key Points

${u.slice(0,h).map(f=>f.trim()+".").map(f=>` ${f}`).join(`

`)}`;break}case"flashcards":{d=`# Study Flashcards

${u.slice(0,t.numFlashcards).map((p,f)=>{const m=p.split(" ").filter(E=>E.length>3),y=m[Math.floor(Math.random()*m.length)];return`### Flashcard ${f+1}

**Question:** ${p.replace(y,"_____")}.

**Answer:** ${y}`}).join(`

`)}`;break}case"quiz":{const h=u.slice(0,t.numQuestions).map((p,f)=>{const m=p.split(" ").filter(E=>E.length>3),y=m[Math.floor(Math.random()*m.length)];if(t.quizType==="multiple-choice"){const E=m.filter(v=>v!==y&&v.length>3),g=[y,...E.sort(()=>Math.random()-.5).slice(0,3)].sort(()=>Math.random()-.5);return`### Question ${f+1}

${p.replace(y,"_____")}.

${g.map((v,b)=>`${String.fromCharCode(97+b)}) ${v}`).join(`
`)}

**Correct Answer:** ${y}`}return`### Question ${f+1}

${p.replace(y,"_____")}.

**Answer:** ${y}`});d=`# ${t.difficulty.charAt(0).toUpperCase()+t.difficulty.slice(1)} ${t.quizType.split("-").map(p=>p.charAt(0).toUpperCase()+p.slice(1)).join(" ")} Quiz

${h.join(`

`)}`}}return d},a=u=>{e(u)},o=async()=>{Mi.getState().messages=[];const u=await s();Mi.getState().messages=[{role:"assistant",content:u,type:"text",id:crypto.randomUUID()}]},l=async()=>{const u=await s(),d=`${n}-${new Date().toISOString().split("T")[0]}.md`,h=new Blob([u],{type:"text/markdown"}),p=URL.createObjectURL(h),f=document.createElement("a");f.href=p,f.download=d,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(p)};return P.jsxs("div",{className:"p-4 space-y-6",children:[P.jsxs("div",{className:"flex justify-between items-center mb-6",children:[P.jsx("h2",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:"Learning Tools"}),n&&P.jsxs("button",{onClick:l,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors duration-300 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-300",children:[P.jsx(M0,{className:"w-4 h-4"}),P.jsx("span",{children:"Download"})]})]}),fM.map(u=>P.jsxs("div",{className:"space-y-4",children:[P.jsxs("button",{onClick:()=>a(u.id),className:`
              w-full flex items-center gap-4 p-4 rounded-xl transition-all duration-300
              transform hover:scale-102
              ${n===u.id?`bg-gradient-to-br ${u.color} text-white shadow-lg`:"bg-white hover:bg-gray-50 text-gray-700 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-gray-200"}
            `,children:[P.jsx("div",{className:`
              w-10 h-10 rounded-lg flex items-center justify-center
              ${n===u.id?"bg-white/20":`bg-gradient-to-br ${u.color} bg-opacity-10`}
            `,children:P.jsx(u.icon,{className:`w-5 h-5 ${n===u.id?"text-white":`bg-gradient-to-br ${u.color} bg-clip-text text-transparent`}`})}),P.jsxs("div",{className:"flex-1 text-left",children:[P.jsx("div",{className:"font-medium",children:u.name}),P.jsx("p",{className:`text-sm ${n===u.id?"text-white/80":"text-gray-500 dark:text-gray-400"}`,children:u.description})]})]}),n===u.id&&P.jsxs("div",{className:"pl-4 border-l-2 border-gray-200 dark:border-gray-700 space-y-6",children:[u.id==="summarize"&&P.jsxs("div",{className:"space-y-2",children:[P.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Summary Length"}),P.jsx("div",{className:"grid grid-cols-3 gap-2",children:mM.map(d=>P.jsx("button",{onClick:()=>i({summaryLength:d}),className:`
                          px-3 py-2 rounded-lg text-sm font-medium
                          transition-all duration-300
                          ${t.summaryLength===d?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"}
                        `,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]}),u.id==="flashcards"&&P.jsxs("div",{className:"space-y-2",children:[P.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Number of Flashcards: ",t.numFlashcards]}),P.jsx("input",{type:"range",min:"1",max:"50",value:t.numFlashcards,onChange:d=>i({numFlashcards:parseInt(d.target.value)}),className:"w-full h-2 bg-purple-200 rounded-lg appearance-none cursor-pointer dark:bg-purple-900"})]}),u.id==="quiz"&&P.jsxs("div",{className:"space-y-4",children:[P.jsxs("div",{className:"space-y-2",children:[P.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Question Type"}),P.jsx("div",{className:"flex flex-col gap-2",children:gM.map(d=>P.jsx("button",{onClick:()=>i({quizType:d}),className:`
                            px-3 py-2 rounded-lg text-sm font-medium text-left
                            transition-all duration-300
                            ${t.quizType===d?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"}
                          `,children:d.split("-").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ")},d))})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Difficulty"}),P.jsx("div",{className:"grid grid-cols-3 gap-2",children:yM.map(d=>P.jsx("button",{onClick:()=>i({difficulty:d}),className:`
                            px-3 py-2 rounded-lg text-sm font-medium
                            transition-all duration-300
                            ${t.difficulty===d?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700"}
                          `,children:d.charAt(0).toUpperCase()+d.slice(1)},d))})]}),P.jsxs("div",{className:"space-y-2",children:[P.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Number of Questions: ",t.numQuestions]}),P.jsx("input",{type:"range",min:"1",max:"20",value:t.numQuestions,onChange:d=>i({numQuestions:parseInt(d.target.value)}),className:"w-full h-2 bg-green-200 rounded-lg appearance-none cursor-pointer dark:bg-green-900"})]})]}),P.jsxs("button",{onClick:o,className:`
                  w-full px-4 py-3 rounded-xl text-white font-medium
                  transition-all duration-300 transform hover:scale-105
                  flex items-center justify-center gap-2
                  ${n==="summarize"?"bg-gradient-to-r from-blue-500 to-blue-600 hover:shadow-blue-200 dark:hover:shadow-blue-900":n==="flashcards"?"bg-gradient-to-r from-purple-500 to-purple-600 hover:shadow-purple-200 dark:hover:shadow-purple-900":"bg-gradient-to-r from-green-500 to-green-600 hover:shadow-green-200 dark:hover:shadow-green-900"}
                  shadow-lg hover:shadow-xl
                `,children:[P.jsx(DA,{className:"w-5 h-5"}),P.jsxs("span",{children:["Generate ",n==="summarize"?"Summary":n==="flashcards"?"Flashcards":"Quiz"]})]})]})]},u.id))]})}function xM(n,e){const t={};return(n[n.length-1]===""?[...n,""]:n).join((t.padRight?" ":"")+","+(t.padLeft===!1?"":" ")).trim()}const wM=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,bM=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,kM={};function cb(n,e){return(kM.jsx?bM:wM).test(n)}const AM=/[ \t\n\f\r]/g;function SM(n){return typeof n=="object"?n.type==="text"?ub(n.value):!1:ub(n)}function ub(n){return n.replace(AM,"")===""}class wh{constructor(e,t,i){this.normal=t,this.property=e,i&&(this.space=i)}}wh.prototype.normal={};wh.prototype.property={};wh.prototype.space=void 0;function YE(n,e){const t={},i={};for(const r of n)Object.assign(t,r.property),Object.assign(i,r.normal);return new wh(t,i,e)}function Tv(n){return n.toLowerCase()}class An{constructor(e,t){this.attribute=t,this.property=e}}An.prototype.attribute="";An.prototype.booleanish=!1;An.prototype.boolean=!1;An.prototype.commaOrSpaceSeparated=!1;An.prototype.commaSeparated=!1;An.prototype.defined=!1;An.prototype.mustUseProperty=!1;An.prototype.number=!1;An.prototype.overloadedBoolean=!1;An.prototype.property="";An.prototype.spaceSeparated=!1;An.prototype.space=void 0;let EM=0;const fe=zo(),lt=zo(),KE=zo(),V=zo(),Oe=zo(),yl=zo(),Cn=zo();function zo(){return 2**++EM}const Pv=Object.freeze(Object.defineProperty({__proto__:null,boolean:fe,booleanish:lt,commaOrSpaceSeparated:Cn,commaSeparated:yl,number:V,overloadedBoolean:KE,spaceSeparated:Oe},Symbol.toStringTag,{value:"Module"})),ng=Object.keys(Pv);class K0 extends An{constructor(e,t,i,r){let s=-1;if(super(e,t),db(this,"space",r),typeof i=="number")for(;++s<ng.length;){const a=ng[s];db(this,ng[s],(i&Pv[a])===Pv[a])}}}K0.prototype.defined=!0;function db(n,e,t){t&&(n[e]=t)}function Lc(n){const e={},t={};for(const[i,r]of Object.entries(n.properties)){const s=new K0(i,n.transform(n.attributes||{},i),r,n.space);n.mustUseProperty&&n.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,t[Tv(i)]=i,t[Tv(s.attribute)]=i}return new wh(e,t,n.space)}const QE=Lc({properties:{ariaActiveDescendant:null,ariaAtomic:lt,ariaAutoComplete:null,ariaBusy:lt,ariaChecked:lt,ariaColCount:V,ariaColIndex:V,ariaColSpan:V,ariaControls:Oe,ariaCurrent:null,ariaDescribedBy:Oe,ariaDetails:null,ariaDisabled:lt,ariaDropEffect:Oe,ariaErrorMessage:null,ariaExpanded:lt,ariaFlowTo:Oe,ariaGrabbed:lt,ariaHasPopup:null,ariaHidden:lt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Oe,ariaLevel:V,ariaLive:null,ariaModal:lt,ariaMultiLine:lt,ariaMultiSelectable:lt,ariaOrientation:null,ariaOwns:Oe,ariaPlaceholder:null,ariaPosInSet:V,ariaPressed:lt,ariaReadOnly:lt,ariaRelevant:null,ariaRequired:lt,ariaRoleDescription:Oe,ariaRowCount:V,ariaRowIndex:V,ariaRowSpan:V,ariaSelected:lt,ariaSetSize:V,ariaSort:null,ariaValueMax:V,ariaValueMin:V,ariaValueNow:V,ariaValueText:null,role:null},transform(n,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function ZE(n,e){return e in n?n[e]:e}function JE(n,e){return ZE(n,e.toLowerCase())}const _M=Lc({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:yl,acceptCharset:Oe,accessKey:Oe,action:null,allow:null,allowFullScreen:fe,allowPaymentRequest:fe,allowUserMedia:fe,alt:null,as:null,async:fe,autoCapitalize:null,autoComplete:Oe,autoFocus:fe,autoPlay:fe,blocking:Oe,capture:null,charSet:null,checked:fe,cite:null,className:Oe,cols:V,colSpan:null,content:null,contentEditable:lt,controls:fe,controlsList:Oe,coords:V|yl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:fe,defer:fe,dir:null,dirName:null,disabled:fe,download:KE,draggable:lt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:fe,formTarget:null,headers:Oe,height:V,hidden:fe,high:V,href:null,hrefLang:null,htmlFor:Oe,httpEquiv:Oe,id:null,imageSizes:null,imageSrcSet:null,inert:fe,inputMode:null,integrity:null,is:null,isMap:fe,itemId:null,itemProp:Oe,itemRef:Oe,itemScope:fe,itemType:Oe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:fe,low:V,manifest:null,max:null,maxLength:V,media:null,method:null,min:null,minLength:V,multiple:fe,muted:fe,name:null,nonce:null,noModule:fe,noValidate:fe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:fe,optimum:V,pattern:null,ping:Oe,placeholder:null,playsInline:fe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:fe,referrerPolicy:null,rel:Oe,required:fe,reversed:fe,rows:V,rowSpan:V,sandbox:Oe,scope:null,scoped:fe,seamless:fe,selected:fe,shadowRootClonable:fe,shadowRootDelegatesFocus:fe,shadowRootMode:null,shape:null,size:V,sizes:null,slot:null,span:V,spellCheck:lt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:V,step:null,style:null,tabIndex:V,target:null,title:null,translate:null,type:null,typeMustMatch:fe,useMap:null,value:lt,width:V,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Oe,axis:null,background:null,bgColor:null,border:V,borderColor:null,bottomMargin:V,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:fe,declare:fe,event:null,face:null,frame:null,frameBorder:null,hSpace:V,leftMargin:V,link:null,longDesc:null,lowSrc:null,marginHeight:V,marginWidth:V,noResize:fe,noHref:fe,noShade:fe,noWrap:fe,object:null,profile:null,prompt:null,rev:null,rightMargin:V,rules:null,scheme:null,scrolling:lt,standby:null,summary:null,text:null,topMargin:V,valueType:null,version:null,vAlign:null,vLink:null,vSpace:V,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:fe,disableRemotePlayback:fe,prefix:null,property:null,results:V,security:null,unselectable:null},space:"html",transform:JE}),CM=Lc({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Cn,accentHeight:V,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:V,amplitude:V,arabicForm:null,ascent:V,attributeName:null,attributeType:null,azimuth:V,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:V,by:null,calcMode:null,capHeight:V,className:Oe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:V,diffuseConstant:V,direction:null,display:null,dur:null,divisor:V,dominantBaseline:null,download:fe,dx:null,dy:null,edgeMode:null,editable:null,elevation:V,enableBackground:null,end:null,event:null,exponent:V,externalResourcesRequired:null,fill:null,fillOpacity:V,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:yl,g2:yl,glyphName:yl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:V,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:V,horizOriginX:V,horizOriginY:V,id:null,ideographic:V,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:V,k:V,k1:V,k2:V,k3:V,k4:V,kernelMatrix:Cn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:V,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:V,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:V,overlineThickness:V,paintOrder:null,panose1:null,path:null,pathLength:V,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Oe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:V,pointsAtY:V,pointsAtZ:V,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Cn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Cn,rev:Cn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Cn,requiredFeatures:Cn,requiredFonts:Cn,requiredFormats:Cn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:V,specularExponent:V,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:V,strikethroughThickness:V,string:null,stroke:null,strokeDashArray:Cn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:V,strokeOpacity:V,strokeWidth:null,style:null,surfaceScale:V,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Cn,tabIndex:V,tableValues:null,target:null,targetX:V,targetY:V,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Cn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:V,underlineThickness:V,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:V,values:null,vAlphabetic:V,vMathematical:V,vectorEffect:null,vHanging:V,vIdeographic:V,version:null,vertAdvY:V,vertOriginX:V,vertOriginY:V,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:V,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:ZE}),e_=Lc({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,e){return"xlink:"+e.slice(5).toLowerCase()}}),t_=Lc({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:JE}),n_=Lc({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,e){return"xml:"+e.slice(3).toLowerCase()}}),TM={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},PM=/[A-Z]/g,hb=/-[a-z]/g,LM=/^data[-\w.:]+$/i;function IM(n,e){const t=Tv(e);let i=e,r=An;if(t in n.normal)return n.property[n.normal[t]];if(t.length>4&&t.slice(0,4)==="data"&&LM.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(hb,MM);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!hb.test(s)){let a=s.replace(PM,RM);a.charAt(0)!=="-"&&(a="-"+a),e="data"+a}}r=K0}return new r(i,e)}function RM(n){return"-"+n.toLowerCase()}function MM(n){return n.charAt(1).toUpperCase()}const NM=YE([QE,_M,e_,t_,n_],"html"),Q0=YE([QE,CM,e_,t_,n_],"svg");function DM(n){return n.join(" ").trim()}var Z0={},pb=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,FM=/\n/g,OM=/^\s*/,jM=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,zM=/^:\s*/,BM=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,HM=/^[;\s]*/,$M=/^\s+|\s+$/g,UM=`
`,fb="/",mb="*",va="",VM="comment",WM="declaration",qM=function(n,e){if(typeof n!="string")throw new TypeError("First argument must be a string");if(!n)return[];e=e||{};var t=1,i=1;function r(m){var y=m.match(FM);y&&(t+=y.length);var E=m.lastIndexOf(UM);i=~E?m.length-E:i+m.length}function s(){var m={line:t,column:i};return function(y){return y.position=new a(m),u(),y}}function a(m){this.start=m,this.end={line:t,column:i},this.source=e.source}a.prototype.content=n;function o(m){var y=new Error(e.source+":"+t+":"+i+": "+m);if(y.reason=m,y.filename=e.source,y.line=t,y.column=i,y.source=n,!e.silent)throw y}function l(m){var y=m.exec(n);if(y){var E=y[0];return r(E),n=n.slice(E.length),y}}function u(){l(OM)}function d(m){var y;for(m=m||[];y=h();)y!==!1&&m.push(y);return m}function h(){var m=s();if(!(fb!=n.charAt(0)||mb!=n.charAt(1))){for(var y=2;va!=n.charAt(y)&&(mb!=n.charAt(y)||fb!=n.charAt(y+1));)++y;if(y+=2,va===n.charAt(y-1))return o("End of comment missing");var E=n.slice(2,y-2);return i+=2,r(E),n=n.slice(y),i+=2,m({type:VM,comment:E})}}function p(){var m=s(),y=l(jM);if(y){if(h(),!l(zM))return o("property missing ':'");var E=l(BM),g=m({type:WM,property:gb(y[0].replace(pb,va)),value:E?gb(E[0].replace(pb,va)):va});return l(HM),g}}function f(){var m=[];d(m);for(var y;y=p();)y!==!1&&(m.push(y),d(m));return m}return u(),f()};function gb(n){return n?n.replace($M,va):va}var GM=$p&&$p.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Z0,"__esModule",{value:!0});Z0.default=YM;var XM=GM(qM);function YM(n,e){var t=null;if(!n||typeof n!="string")return t;var i=(0,XM.default)(n),r=typeof e=="function";return i.forEach(function(s){if(s.type==="declaration"){var a=s.property,o=s.value;r?e(a,o,s):o&&(t=t||{},t[a]=o)}}),t}var hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.camelCase=void 0;var KM=/^--[a-zA-Z0-9_-]+$/,QM=/-([a-z])/g,ZM=/^[^-]+$/,JM=/^-(webkit|moz|ms|o|khtml)-/,eN=/^-(ms)-/,tN=function(n){return!n||ZM.test(n)||KM.test(n)},nN=function(n,e){return e.toUpperCase()},yb=function(n,e){return"".concat(e,"-")},iN=function(n,e){return e===void 0&&(e={}),tN(n)?n:(n=n.toLowerCase(),e.reactCompat?n=n.replace(eN,yb):n=n.replace(JM,yb),n.replace(QM,nN))};hm.camelCase=iN;var rN=$p&&$p.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},sN=rN(Z0),aN=hm;function Lv(n,e){var t={};return!n||typeof n!="string"||(0,sN.default)(n,function(i,r){i&&r&&(t[(0,aN.camelCase)(i,e)]=r)}),t}Lv.default=Lv;var oN=Lv;const lN=dh(oN),i_=r_("end"),J0=r_("start");function r_(n){return e;function e(t){const i=t&&t.position&&t.position[n]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function cN(n){const e=J0(n),t=i_(n);if(e&&t)return{start:e,end:t}}function Eu(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?vb(n.position):"start"in n||"end"in n?vb(n):"line"in n||"column"in n?Iv(n):""}function Iv(n){return xb(n&&n.line)+":"+xb(n&&n.column)}function vb(n){return Iv(n&&n.start)+"-"+Iv(n&&n.end)}function xb(n){return n&&typeof n=="number"?n:1}class Yt extends Error{constructor(e,t,i){super(),typeof t=="string"&&(i=t,t=void 0);let r="",s={},a=!1;if(t&&("line"in t&&"column"in t?s={place:t}:"start"in t&&"end"in t?s={place:t}:"type"in t?s={ancestors:[t],place:t.position}:s={...t}),typeof e=="string"?r=e:!s.cause&&e&&(a=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const l=i.indexOf(":");l===-1?s.ruleId=i:(s.source=i.slice(0,l),s.ruleId=i.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const o=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=o?o.line:void 0,this.name=Eu(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=a&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Yt.prototype.file="";Yt.prototype.name="";Yt.prototype.reason="";Yt.prototype.message="";Yt.prototype.stack="";Yt.prototype.column=void 0;Yt.prototype.line=void 0;Yt.prototype.ancestors=void 0;Yt.prototype.cause=void 0;Yt.prototype.fatal=void 0;Yt.prototype.place=void 0;Yt.prototype.ruleId=void 0;Yt.prototype.source=void 0;const ex={}.hasOwnProperty,uN=new Map,dN=/[A-Z]/g,hN=new Set(["table","tbody","thead","tfoot","tr"]),pN=new Set(["td","th"]),s_="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function fN(n,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const t=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=kN(t,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=bN(t,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:t,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Q0:NM,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=a_(r,n,void 0);return s&&typeof s!="string"?s:r.create(n,r.Fragment,{children:s||void 0},void 0)}function a_(n,e,t){if(e.type==="element")return mN(n,e,t);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return gN(n,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return vN(n,e,t);if(e.type==="mdxjsEsm")return yN(n,e);if(e.type==="root")return xN(n,e,t);if(e.type==="text")return wN(n,e)}function mN(n,e,t){const i=n.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Q0,n.schema=r),n.ancestors.push(e);const s=l_(n,e.tagName,!1),a=AN(n,e);let o=nx(n,e);return hN.has(e.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!SM(l):!0})),o_(n,a,s,e),tx(a,o),n.ancestors.pop(),n.schema=i,n.create(e,s,a,t)}function gN(n,e){if(e.data&&e.data.estree&&n.evaluater){const i=e.data.estree.body[0];return i.type,n.evaluater.evaluateExpression(i.expression)}Yu(n,e.position)}function yN(n,e){if(e.data&&e.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(e.data.estree);Yu(n,e.position)}function vN(n,e,t){const i=n.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=Q0,n.schema=r),n.ancestors.push(e);const s=e.name===null?n.Fragment:l_(n,e.name,!0),a=SN(n,e),o=nx(n,e);return o_(n,a,s,e),tx(a,o),n.ancestors.pop(),n.schema=i,n.create(e,s,a,t)}function xN(n,e,t){const i={};return tx(i,nx(n,e)),n.create(e,n.Fragment,i,t)}function wN(n,e){return e.value}function o_(n,e,t,i){typeof t!="string"&&t!==n.Fragment&&n.passNode&&(e.node=i)}function tx(n,e){if(e.length>0){const t=e.length>1?e:e[0];t&&(n.children=t)}}function bN(n,e,t){return i;function i(r,s,a,o){const u=Array.isArray(a.children)?t:e;return o?u(s,a,o):u(s,a)}}function kN(n,e){return t;function t(i,r,s,a){const o=Array.isArray(s.children),l=J0(i);return e(r,s,a,o,{columnNumber:l?l.column-1:void 0,fileName:n,lineNumber:l?l.line:void 0},void 0)}}function AN(n,e){const t={};let i,r;for(r in e.properties)if(r!=="children"&&ex.call(e.properties,r)){const s=EN(n,r,e.properties[r]);if(s){const[a,o]=s;n.tableCellAlignToStyle&&a==="align"&&typeof o=="string"&&pN.has(e.tagName)?i=o:t[a]=o}}if(i){const s=t.style||(t.style={});s[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return t}function SN(n,e){const t={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&n.evaluater){const s=i.data.estree.body[0];s.type;const a=s.expression;a.type;const o=a.properties[0];o.type,Object.assign(t,n.evaluater.evaluateExpression(o.argument))}else Yu(n,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&n.evaluater){const o=i.value.data.estree.body[0];o.type,s=n.evaluater.evaluateExpression(o.expression)}else Yu(n,e.position);else s=i.value===null?!0:i.value;t[r]=s}return t}function nx(n,e){const t=[];let i=-1;const r=n.passKeys?new Map:uN;for(;++i<e.children.length;){const s=e.children[i];let a;if(n.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=r.get(l)||0;a=l+"-"+u,r.set(l,u+1)}}const o=a_(n,s,a);o!==void 0&&t.push(o)}return t}function EN(n,e,t){const i=IM(n.schema,e);if(!(t==null||typeof t=="number"&&Number.isNaN(t))){if(Array.isArray(t)&&(t=i.commaSeparated?xM(t):DM(t)),i.property==="style"){let r=typeof t=="object"?t:_N(n,String(t));return n.stylePropertyNameCase==="css"&&(r=CN(r)),["style",r]}return[n.elementAttributeNameCase==="react"&&i.space?TM[i.property]||i.property:i.attribute,t]}}function _N(n,e){try{return lN(e,{reactCompat:!0})}catch(t){if(n.ignoreInvalidStyle)return{};const i=t,r=new Yt("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=n.filePath||void 0,r.url=s_+"#cannot-parse-style-attribute",r}}function l_(n,e,t){let i;if(!t)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,a;for(;++s<r.length;){const o=cb(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};a=a?{type:"MemberExpression",object:a,property:o,computed:!!(s&&o.type==="Literal"),optional:!1}:o}i=a}else i=cb(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return ex.call(n.components,r)?n.components[r]:r}if(n.evaluater)return n.evaluater.evaluateExpression(i);Yu(n)}function Yu(n,e){const t=new Yt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw t.file=n.filePath||void 0,t.url=s_+"#cannot-handle-mdx-estrees-without-createevaluater",t}function CN(n){const e={};let t;for(t in n)ex.call(n,t)&&(e[TN(t)]=n[t]);return e}function TN(n){let e=n.replace(dN,PN);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function PN(n){return"-"+n.toLowerCase()}const ig={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},LN={};function IN(n,e){const t=LN,i=typeof t.includeImageAlt=="boolean"?t.includeImageAlt:!0,r=typeof t.includeHtml=="boolean"?t.includeHtml:!0;return c_(n,i,r)}function c_(n,e,t){if(RN(n)){if("value"in n)return n.type==="html"&&!t?"":n.value;if(e&&"alt"in n&&n.alt)return n.alt;if("children"in n)return wb(n.children,e,t)}return Array.isArray(n)?wb(n,e,t):""}function wb(n,e,t){const i=[];let r=-1;for(;++r<n.length;)i[r]=c_(n[r],e,t);return i.join("")}function RN(n){return!!(n&&typeof n=="object")}const bb=document.createElement("i");function ix(n){const e="&"+n+";";bb.innerHTML=e;const t=bb.textContent;return t.charCodeAt(t.length-1)===59&&n!=="semi"||t===e?!1:t}function ur(n,e,t,i){const r=n.length;let s=0,a;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,t=t>0?t:0,i.length<1e4)a=Array.from(i),a.unshift(e,t),n.splice(...a);else for(t&&n.splice(e,t);s<i.length;)a=i.slice(s,s+1e4),a.unshift(e,0),n.splice(...a),s+=1e4,e+=1e4}function ei(n,e){return n.length>0?(ur(n,n.length,0,e),n):e}const kb={}.hasOwnProperty;function MN(n){const e={};let t=-1;for(;++t<n.length;)NN(e,n[t]);return e}function NN(n,e){let t;for(t in e){const r=(kb.call(n,t)?n[t]:void 0)||(n[t]={}),s=e[t];let a;if(s)for(a in s){kb.call(r,a)||(r[a]=[]);const o=s[a];DN(r[a],Array.isArray(o)?o:o?[o]:[])}}}function DN(n,e){let t=-1;const i=[];for(;++t<e.length;)(e[t].add==="after"?n:i).push(e[t]);ur(n,0,0,i)}function u_(n,e){const t=Number.parseInt(n,e);return t<9||t===11||t>13&&t<32||t>126&&t<160||t>55295&&t<57344||t>64975&&t<65008||(t&65535)===65535||(t&65535)===65534||t>1114111?"":String.fromCodePoint(t)}function vl(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const or=oa(/[A-Za-z]/),Bn=oa(/[\dA-Za-z]/),FN=oa(/[#-'*+\--9=?A-Z^-~]/);function Rv(n){return n!==null&&(n<32||n===127)}const Mv=oa(/\d/),ON=oa(/[\dA-Fa-f]/),jN=oa(/[!-/:-@[-`{-~]/);function ce(n){return n!==null&&n<-2}function kn(n){return n!==null&&(n<0||n===32)}function Ce(n){return n===-2||n===-1||n===32}const zN=oa(new RegExp("\\p{P}|\\p{S}","u")),BN=oa(/\s/);function oa(n){return e;function e(t){return t!==null&&t>-1&&n.test(String.fromCharCode(t))}}function Ic(n){const e=[];let t=-1,i=0,r=0;for(;++t<n.length;){const s=n.charCodeAt(t);let a="";if(s===37&&Bn(n.charCodeAt(t+1))&&Bn(n.charCodeAt(t+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(a=String.fromCharCode(s));else if(s>55295&&s<57344){const o=n.charCodeAt(t+1);s<56320&&o>56319&&o<57344?(a=String.fromCharCode(s,o),r=1):a=""}else a=String.fromCharCode(s);a&&(e.push(n.slice(i,t),encodeURIComponent(a)),i=t+r+1,a=""),r&&(t+=r,r=0)}return e.join("")+n.slice(i)}function ze(n,e,t,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return a;function a(l){return Ce(l)?(n.enter(t),o(l)):e(l)}function o(l){return Ce(l)&&s++<r?(n.consume(l),o):(n.exit(t),e(l))}}const HN={tokenize:$N};function $N(n){const e=n.attempt(this.parser.constructs.contentInitial,i,r);let t;return e;function i(o){if(o===null){n.consume(o);return}return n.enter("lineEnding"),n.consume(o),n.exit("lineEnding"),ze(n,e,"linePrefix")}function r(o){return n.enter("paragraph"),s(o)}function s(o){const l=n.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=l),t=l,a(o)}function a(o){if(o===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(o);return}return ce(o)?(n.consume(o),n.exit("chunkText"),s):(n.consume(o),a)}}const UN={tokenize:VN},Ab={tokenize:WN};function VN(n){const e=this,t=[];let i=0,r,s,a;return o;function o(b){if(i<t.length){const C=t[i];return e.containerState=C[1],n.attempt(C[0].continuation,l,u)(b)}return u(b)}function l(b){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&v();const C=e.events.length;let T=C,_;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){_=e.events[T][1].end;break}g(i);let L=C;for(;L<e.events.length;)e.events[L][1].end={..._},L++;return ur(e.events,T+1,0,e.events.slice(C)),e.events.length=L,u(b)}return o(b)}function u(b){if(i===t.length){if(!r)return p(b);if(r.currentConstruct&&r.currentConstruct.concrete)return m(b);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},n.check(Ab,d,h)(b)}function d(b){return r&&v(),g(i),p(b)}function h(b){return e.parser.lazy[e.now().line]=i!==t.length,a=e.now().offset,m(b)}function p(b){return e.containerState={},n.attempt(Ab,f,m)(b)}function f(b){return i++,t.push([e.currentConstruct,e.containerState]),p(b)}function m(b){if(b===null){r&&v(),g(0),n.consume(b);return}return r=r||e.parser.flow(e.now()),n.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),y(b)}function y(b){if(b===null){E(n.exit("chunkFlow"),!0),g(0),n.consume(b);return}return ce(b)?(n.consume(b),E(n.exit("chunkFlow")),i=0,e.interrupt=void 0,o):(n.consume(b),y)}function E(b,C){const T=e.sliceStream(b);if(C&&T.push(null),b.previous=s,s&&(s.next=b),s=b,r.defineSkip(b.start),r.write(T),e.parser.lazy[b.start.line]){let _=r.events.length;for(;_--;)if(r.events[_][1].start.offset<a&&(!r.events[_][1].end||r.events[_][1].end.offset>a))return;const L=e.events.length;let R=L,O,j;for(;R--;)if(e.events[R][0]==="exit"&&e.events[R][1].type==="chunkFlow"){if(O){j=e.events[R][1].end;break}O=!0}for(g(i),_=L;_<e.events.length;)e.events[_][1].end={...j},_++;ur(e.events,R+1,0,e.events.slice(L)),e.events.length=_}}function g(b){let C=t.length;for(;C-- >b;){const T=t[C];e.containerState=T[1],T[0].exit.call(e,n)}t.length=b}function v(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function WN(n,e,t){return ze(n,n.attempt(this.parser.constructs.document,e,t),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Sb(n){if(n===null||kn(n)||BN(n))return 1;if(zN(n))return 2}function rx(n,e,t){const i=[];let r=-1;for(;++r<n.length;){const s=n[r].resolveAll;s&&!i.includes(s)&&(e=s(e,t),i.push(s))}return e}const Nv={name:"attention",resolveAll:qN,tokenize:GN};function qN(n,e){let t=-1,i,r,s,a,o,l,u,d;for(;++t<n.length;)if(n[t][0]==="enter"&&n[t][1].type==="attentionSequence"&&n[t][1]._close){for(i=t;i--;)if(n[i][0]==="exit"&&n[i][1].type==="attentionSequence"&&n[i][1]._open&&e.sliceSerialize(n[i][1]).charCodeAt(0)===e.sliceSerialize(n[t][1]).charCodeAt(0)){if((n[i][1]._close||n[t][1]._open)&&(n[t][1].end.offset-n[t][1].start.offset)%3&&!((n[i][1].end.offset-n[i][1].start.offset+n[t][1].end.offset-n[t][1].start.offset)%3))continue;l=n[i][1].end.offset-n[i][1].start.offset>1&&n[t][1].end.offset-n[t][1].start.offset>1?2:1;const h={...n[i][1].end},p={...n[t][1].start};Eb(h,-l),Eb(p,l),a={type:l>1?"strongSequence":"emphasisSequence",start:h,end:{...n[i][1].end}},o={type:l>1?"strongSequence":"emphasisSequence",start:{...n[t][1].start},end:p},s={type:l>1?"strongText":"emphasisText",start:{...n[i][1].end},end:{...n[t][1].start}},r={type:l>1?"strong":"emphasis",start:{...a.start},end:{...o.end}},n[i][1].end={...a.start},n[t][1].start={...o.end},u=[],n[i][1].end.offset-n[i][1].start.offset&&(u=ei(u,[["enter",n[i][1],e],["exit",n[i][1],e]])),u=ei(u,[["enter",r,e],["enter",a,e],["exit",a,e],["enter",s,e]]),u=ei(u,rx(e.parser.constructs.insideSpan.null,n.slice(i+1,t),e)),u=ei(u,[["exit",s,e],["enter",o,e],["exit",o,e],["exit",r,e]]),n[t][1].end.offset-n[t][1].start.offset?(d=2,u=ei(u,[["enter",n[t][1],e],["exit",n[t][1],e]])):d=0,ur(n,i-1,t-i+3,u),t=i+u.length-d-2;break}}for(t=-1;++t<n.length;)n[t][1].type==="attentionSequence"&&(n[t][1].type="data");return n}function GN(n,e){const t=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Sb(i);let s;return a;function a(l){return s=l,n.enter("attentionSequence"),o(l)}function o(l){if(l===s)return n.consume(l),o;const u=n.exit("attentionSequence"),d=Sb(l),h=!d||d===2&&r||t.includes(l),p=!r||r===2&&d||t.includes(i);return u._open=!!(s===42?h:h&&(r||!p)),u._close=!!(s===42?p:p&&(d||!h)),e(l)}}function Eb(n,e){n.column+=e,n.offset+=e,n._bufferIndex+=e}const XN={name:"autolink",tokenize:YN};function YN(n,e,t){let i=0;return r;function r(f){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),s}function s(f){return or(f)?(n.consume(f),a):f===64?t(f):u(f)}function a(f){return f===43||f===45||f===46||Bn(f)?(i=1,o(f)):u(f)}function o(f){return f===58?(n.consume(f),i=0,l):(f===43||f===45||f===46||Bn(f))&&i++<32?(n.consume(f),o):(i=0,u(f))}function l(f){return f===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):f===null||f===32||f===60||Rv(f)?t(f):(n.consume(f),l)}function u(f){return f===64?(n.consume(f),d):FN(f)?(n.consume(f),u):t(f)}function d(f){return Bn(f)?h(f):t(f)}function h(f){return f===46?(n.consume(f),i=0,d):f===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(f),n.exit("autolinkMarker"),n.exit("autolink"),e):p(f)}function p(f){if((f===45||Bn(f))&&i++<63){const m=f===45?p:h;return n.consume(f),m}return t(f)}}const pm={partial:!0,tokenize:KN};function KN(n,e,t){return i;function i(s){return Ce(s)?ze(n,r,"linePrefix")(s):r(s)}function r(s){return s===null||ce(s)?e(s):t(s)}}const d_={continuation:{tokenize:ZN},exit:JN,name:"blockQuote",tokenize:QN};function QN(n,e,t){const i=this;return r;function r(a){if(a===62){const o=i.containerState;return o.open||(n.enter("blockQuote",{_container:!0}),o.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(a),n.exit("blockQuoteMarker"),s}return t(a)}function s(a){return Ce(a)?(n.enter("blockQuotePrefixWhitespace"),n.consume(a),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),e):(n.exit("blockQuotePrefix"),e(a))}}function ZN(n,e,t){const i=this;return r;function r(a){return Ce(a)?ze(n,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a):s(a)}function s(a){return n.attempt(d_,e,t)(a)}}function JN(n){n.exit("blockQuote")}const h_={name:"characterEscape",tokenize:eD};function eD(n,e,t){return i;function i(s){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(s),n.exit("escapeMarker"),r}function r(s){return jN(s)?(n.enter("characterEscapeValue"),n.consume(s),n.exit("characterEscapeValue"),n.exit("characterEscape"),e):t(s)}}const p_={name:"characterReference",tokenize:tD};function tD(n,e,t){const i=this;let r=0,s,a;return o;function o(h){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),l}function l(h){return h===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(h),n.exit("characterReferenceMarkerNumeric"),u):(n.enter("characterReferenceValue"),s=31,a=Bn,d(h))}function u(h){return h===88||h===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(h),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),s=6,a=ON,d):(n.enter("characterReferenceValue"),s=7,a=Mv,d(h))}function d(h){if(h===59&&r){const p=n.exit("characterReferenceValue");return a===Bn&&!ix(i.sliceSerialize(p))?t(h):(n.enter("characterReferenceMarker"),n.consume(h),n.exit("characterReferenceMarker"),n.exit("characterReference"),e)}return a(h)&&r++<s?(n.consume(h),d):t(h)}}const _b={partial:!0,tokenize:iD},Cb={concrete:!0,name:"codeFenced",tokenize:nD};function nD(n,e,t){const i=this,r={partial:!0,tokenize:T};let s=0,a=0,o;return l;function l(_){return u(_)}function u(_){const L=i.events[i.events.length-1];return s=L&&L[1].type==="linePrefix"?L[2].sliceSerialize(L[1],!0).length:0,o=_,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),d(_)}function d(_){return _===o?(a++,n.consume(_),d):a<3?t(_):(n.exit("codeFencedFenceSequence"),Ce(_)?ze(n,h,"whitespace")(_):h(_))}function h(_){return _===null||ce(_)?(n.exit("codeFencedFence"),i.interrupt?e(_):n.check(_b,y,C)(_)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),p(_))}function p(_){return _===null||ce(_)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),h(_)):Ce(_)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),ze(n,f,"whitespace")(_)):_===96&&_===o?t(_):(n.consume(_),p)}function f(_){return _===null||ce(_)?h(_):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),m(_))}function m(_){return _===null||ce(_)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),h(_)):_===96&&_===o?t(_):(n.consume(_),m)}function y(_){return n.attempt(r,C,E)(_)}function E(_){return n.enter("lineEnding"),n.consume(_),n.exit("lineEnding"),g}function g(_){return s>0&&Ce(_)?ze(n,v,"linePrefix",s+1)(_):v(_)}function v(_){return _===null||ce(_)?n.check(_b,y,C)(_):(n.enter("codeFlowValue"),b(_))}function b(_){return _===null||ce(_)?(n.exit("codeFlowValue"),v(_)):(n.consume(_),b)}function C(_){return n.exit("codeFenced"),e(_)}function T(_,L,R){let O=0;return j;function j(W){return _.enter("lineEnding"),_.consume(W),_.exit("lineEnding"),F}function F(W){return _.enter("codeFencedFence"),Ce(W)?ze(_,H,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(W):H(W)}function H(W){return W===o?(_.enter("codeFencedFenceSequence"),K(W)):R(W)}function K(W){return W===o?(O++,_.consume(W),K):O>=a?(_.exit("codeFencedFenceSequence"),Ce(W)?ze(_,Q,"whitespace")(W):Q(W)):R(W)}function Q(W){return W===null||ce(W)?(_.exit("codeFencedFence"),L(W)):R(W)}}}function iD(n,e,t){const i=this;return r;function r(a){return a===null?t(a):(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s)}function s(a){return i.parser.lazy[i.now().line]?t(a):e(a)}}const rg={name:"codeIndented",tokenize:sD},rD={partial:!0,tokenize:aD};function sD(n,e,t){const i=this;return r;function r(u){return n.enter("codeIndented"),ze(n,s,"linePrefix",5)(u)}function s(u){const d=i.events[i.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?a(u):t(u)}function a(u){return u===null?l(u):ce(u)?n.attempt(rD,a,l)(u):(n.enter("codeFlowValue"),o(u))}function o(u){return u===null||ce(u)?(n.exit("codeFlowValue"),a(u)):(n.consume(u),o)}function l(u){return n.exit("codeIndented"),e(u)}}function aD(n,e,t){const i=this;return r;function r(a){return i.parser.lazy[i.now().line]?t(a):ce(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),r):ze(n,s,"linePrefix",5)(a)}function s(a){const o=i.events[i.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):ce(a)?r(a):t(a)}}const oD={name:"codeText",previous:cD,resolve:lD,tokenize:uD};function lD(n){let e=n.length-4,t=3,i,r;if((n[t][1].type==="lineEnding"||n[t][1].type==="space")&&(n[e][1].type==="lineEnding"||n[e][1].type==="space")){for(i=t;++i<e;)if(n[i][1].type==="codeTextData"){n[t][1].type="codeTextPadding",n[e][1].type="codeTextPadding",t+=2,e-=2;break}}for(i=t-1,e++;++i<=e;)r===void 0?i!==e&&n[i][1].type!=="lineEnding"&&(r=i):(i===e||n[i][1].type==="lineEnding")&&(n[r][1].type="codeTextData",i!==r+2&&(n[r][1].end=n[i-1][1].end,n.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return n}function cD(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function uD(n,e,t){let i=0,r,s;return a;function a(h){return n.enter("codeText"),n.enter("codeTextSequence"),o(h)}function o(h){return h===96?(n.consume(h),i++,o):(n.exit("codeTextSequence"),l(h))}function l(h){return h===null?t(h):h===32?(n.enter("space"),n.consume(h),n.exit("space"),l):h===96?(s=n.enter("codeTextSequence"),r=0,d(h)):ce(h)?(n.enter("lineEnding"),n.consume(h),n.exit("lineEnding"),l):(n.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||ce(h)?(n.exit("codeTextData"),l(h)):(n.consume(h),u)}function d(h){return h===96?(n.consume(h),r++,d):r===i?(n.exit("codeTextSequence"),n.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class dD{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const i=t??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,t,i){const r=t||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&qc(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),qc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),qc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);qc(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);qc(this.left,t.reverse())}}}function qc(n,e){let t=0;if(e.length<1e4)n.push(...e);else for(;t<e.length;)n.push(...e.slice(t,t+1e4)),t+=1e4}function f_(n){const e={};let t=-1,i,r,s,a,o,l,u;const d=new dD(n);for(;++t<d.length;){for(;t in e;)t=e[t];if(i=d.get(t),t&&i[1].type==="chunkFlow"&&d.get(t-1)[1].type==="listItemPrefix"&&(l=i[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,hD(d,t)),t=e[t],u=!0);else if(i[1]._container){for(s=t,r=void 0;s--;)if(a=d.get(s),a[1].type==="lineEnding"||a[1].type==="lineEndingBlank")a[0]==="enter"&&(r&&(d.get(r)[1].type="lineEndingBlank"),a[1].type="lineEnding",r=s);else if(!(a[1].type==="linePrefix"||a[1].type==="listItemIndent"))break;r&&(i[1].end={...d.get(r)[1].start},o=d.slice(r,t),o.unshift(i),d.splice(r,t-r+1,o))}}return ur(n,0,Number.POSITIVE_INFINITY,d.slice(0)),!u}function hD(n,e){const t=n.get(e)[1],i=n.get(e)[2];let r=e-1;const s=[];let a=t._tokenizer;a||(a=i.parser[t.contentType](t.start),t._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],u={};let d,h,p=-1,f=t,m=0,y=0;const E=[y];for(;f;){for(;n.get(++r)[1]!==f;);s.push(r),f._tokenizer||(d=i.sliceStream(f),f.next||d.push(null),h&&a.defineSkip(f.start),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(d),f._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=f,f=f.next}for(f=t;++p<o.length;)o[p][0]==="exit"&&o[p-1][0]==="enter"&&o[p][1].type===o[p-1][1].type&&o[p][1].start.line!==o[p][1].end.line&&(y=p+1,E.push(y),f._tokenizer=void 0,f.previous=void 0,f=f.next);for(a.events=[],f?(f._tokenizer=void 0,f.previous=void 0):E.pop(),p=E.length;p--;){const g=o.slice(E[p],E[p+1]),v=s.pop();l.push([v,v+g.length-1]),n.splice(v,2,g)}for(l.reverse(),p=-1;++p<l.length;)u[m+l[p][0]]=m+l[p][1],m+=l[p][1]-l[p][0]-1;return u}const pD={resolve:mD,tokenize:gD},fD={partial:!0,tokenize:yD};function mD(n){return f_(n),n}function gD(n,e){let t;return i;function i(o){return n.enter("content"),t=n.enter("chunkContent",{contentType:"content"}),r(o)}function r(o){return o===null?s(o):ce(o)?n.check(fD,a,s)(o):(n.consume(o),r)}function s(o){return n.exit("chunkContent"),n.exit("content"),e(o)}function a(o){return n.consume(o),n.exit("chunkContent"),t.next=n.enter("chunkContent",{contentType:"content",previous:t}),t=t.next,r}}function yD(n,e,t){const i=this;return r;function r(a){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),ze(n,s,"linePrefix")}function s(a){if(a===null||ce(a))return t(a);const o=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?e(a):n.interrupt(i.parser.constructs.flow,t,e)(a)}}function m_(n,e,t,i,r,s,a,o,l){const u=l||Number.POSITIVE_INFINITY;let d=0;return h;function h(g){return g===60?(n.enter(i),n.enter(r),n.enter(s),n.consume(g),n.exit(s),p):g===null||g===32||g===41||Rv(g)?t(g):(n.enter(i),n.enter(a),n.enter(o),n.enter("chunkString",{contentType:"string"}),y(g))}function p(g){return g===62?(n.enter(s),n.consume(g),n.exit(s),n.exit(r),n.exit(i),e):(n.enter(o),n.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===62?(n.exit("chunkString"),n.exit(o),p(g)):g===null||g===60||ce(g)?t(g):(n.consume(g),g===92?m:f)}function m(g){return g===60||g===62||g===92?(n.consume(g),f):f(g)}function y(g){return!d&&(g===null||g===41||kn(g))?(n.exit("chunkString"),n.exit(o),n.exit(a),n.exit(i),e(g)):d<u&&g===40?(n.consume(g),d++,y):g===41?(n.consume(g),d--,y):g===null||g===32||g===40||Rv(g)?t(g):(n.consume(g),g===92?E:y)}function E(g){return g===40||g===41||g===92?(n.consume(g),y):y(g)}}function g_(n,e,t,i,r,s){const a=this;let o=0,l;return u;function u(f){return n.enter(i),n.enter(r),n.consume(f),n.exit(r),n.enter(s),d}function d(f){return o>999||f===null||f===91||f===93&&!l||f===94&&!o&&"_hiddenFootnoteSupport"in a.parser.constructs?t(f):f===93?(n.exit(s),n.enter(r),n.consume(f),n.exit(r),n.exit(i),e):ce(f)?(n.enter("lineEnding"),n.consume(f),n.exit("lineEnding"),d):(n.enter("chunkString",{contentType:"string"}),h(f))}function h(f){return f===null||f===91||f===93||ce(f)||o++>999?(n.exit("chunkString"),d(f)):(n.consume(f),l||(l=!Ce(f)),f===92?p:h)}function p(f){return f===91||f===92||f===93?(n.consume(f),o++,h):h(f)}}function y_(n,e,t,i,r,s){let a;return o;function o(p){return p===34||p===39||p===40?(n.enter(i),n.enter(r),n.consume(p),n.exit(r),a=p===40?41:p,l):t(p)}function l(p){return p===a?(n.enter(r),n.consume(p),n.exit(r),n.exit(i),e):(n.enter(s),u(p))}function u(p){return p===a?(n.exit(s),l(a)):p===null?t(p):ce(p)?(n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),ze(n,u,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),d(p))}function d(p){return p===a||p===null||ce(p)?(n.exit("chunkString"),u(p)):(n.consume(p),p===92?h:d)}function h(p){return p===a||p===92?(n.consume(p),d):d(p)}}function _u(n,e){let t;return i;function i(r){return ce(r)?(n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),t=!0,i):Ce(r)?ze(n,i,t?"linePrefix":"lineSuffix")(r):e(r)}}const vD={name:"definition",tokenize:wD},xD={partial:!0,tokenize:bD};function wD(n,e,t){const i=this;let r;return s;function s(f){return n.enter("definition"),a(f)}function a(f){return g_.call(i,n,o,t,"definitionLabel","definitionLabelMarker","definitionLabelString")(f)}function o(f){return r=vl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),f===58?(n.enter("definitionMarker"),n.consume(f),n.exit("definitionMarker"),l):t(f)}function l(f){return kn(f)?_u(n,u)(f):u(f)}function u(f){return m_(n,d,t,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(f)}function d(f){return n.attempt(xD,h,h)(f)}function h(f){return Ce(f)?ze(n,p,"whitespace")(f):p(f)}function p(f){return f===null||ce(f)?(n.exit("definition"),i.parser.defined.push(r),e(f)):t(f)}}function bD(n,e,t){return i;function i(o){return kn(o)?_u(n,r)(o):t(o)}function r(o){return y_(n,s,t,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function s(o){return Ce(o)?ze(n,a,"whitespace")(o):a(o)}function a(o){return o===null||ce(o)?e(o):t(o)}}const kD={name:"hardBreakEscape",tokenize:AD};function AD(n,e,t){return i;function i(s){return n.enter("hardBreakEscape"),n.consume(s),r}function r(s){return ce(s)?(n.exit("hardBreakEscape"),e(s)):t(s)}}const SD={name:"headingAtx",resolve:ED,tokenize:_D};function ED(n,e){let t=n.length-2,i=3,r,s;return n[i][1].type==="whitespace"&&(i+=2),t-2>i&&n[t][1].type==="whitespace"&&(t-=2),n[t][1].type==="atxHeadingSequence"&&(i===t-1||t-4>i&&n[t-2][1].type==="whitespace")&&(t-=i+1===t?2:4),t>i&&(r={type:"atxHeadingText",start:n[i][1].start,end:n[t][1].end},s={type:"chunkText",start:n[i][1].start,end:n[t][1].end,contentType:"text"},ur(n,i,t-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),n}function _D(n,e,t){let i=0;return r;function r(d){return n.enter("atxHeading"),s(d)}function s(d){return n.enter("atxHeadingSequence"),a(d)}function a(d){return d===35&&i++<6?(n.consume(d),a):d===null||kn(d)?(n.exit("atxHeadingSequence"),o(d)):t(d)}function o(d){return d===35?(n.enter("atxHeadingSequence"),l(d)):d===null||ce(d)?(n.exit("atxHeading"),e(d)):Ce(d)?ze(n,o,"whitespace")(d):(n.enter("atxHeadingText"),u(d))}function l(d){return d===35?(n.consume(d),l):(n.exit("atxHeadingSequence"),o(d))}function u(d){return d===null||d===35||kn(d)?(n.exit("atxHeadingText"),o(d)):(n.consume(d),u)}}const CD=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Tb=["pre","script","style","textarea"],TD={concrete:!0,name:"htmlFlow",resolveTo:ID,tokenize:RD},PD={partial:!0,tokenize:ND},LD={partial:!0,tokenize:MD};function ID(n){let e=n.length;for(;e--&&!(n[e][0]==="enter"&&n[e][1].type==="htmlFlow"););return e>1&&n[e-2][1].type==="linePrefix"&&(n[e][1].start=n[e-2][1].start,n[e+1][1].start=n[e-2][1].start,n.splice(e-2,2)),n}function RD(n,e,t){const i=this;let r,s,a,o,l;return u;function u(S){return d(S)}function d(S){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(S),h}function h(S){return S===33?(n.consume(S),p):S===47?(n.consume(S),s=!0,y):S===63?(n.consume(S),r=3,i.interrupt?e:k):or(S)?(n.consume(S),a=String.fromCharCode(S),E):t(S)}function p(S){return S===45?(n.consume(S),r=2,f):S===91?(n.consume(S),r=5,o=0,m):or(S)?(n.consume(S),r=4,i.interrupt?e:k):t(S)}function f(S){return S===45?(n.consume(S),i.interrupt?e:k):t(S)}function m(S){const z="CDATA[";return S===z.charCodeAt(o++)?(n.consume(S),o===z.length?i.interrupt?e:H:m):t(S)}function y(S){return or(S)?(n.consume(S),a=String.fromCharCode(S),E):t(S)}function E(S){if(S===null||S===47||S===62||kn(S)){const z=S===47,oe=a.toLowerCase();return!z&&!s&&Tb.includes(oe)?(r=1,i.interrupt?e(S):H(S)):CD.includes(a.toLowerCase())?(r=6,z?(n.consume(S),g):i.interrupt?e(S):H(S)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?t(S):s?v(S):b(S))}return S===45||Bn(S)?(n.consume(S),a+=String.fromCharCode(S),E):t(S)}function g(S){return S===62?(n.consume(S),i.interrupt?e:H):t(S)}function v(S){return Ce(S)?(n.consume(S),v):j(S)}function b(S){return S===47?(n.consume(S),j):S===58||S===95||or(S)?(n.consume(S),C):Ce(S)?(n.consume(S),b):j(S)}function C(S){return S===45||S===46||S===58||S===95||Bn(S)?(n.consume(S),C):T(S)}function T(S){return S===61?(n.consume(S),_):Ce(S)?(n.consume(S),T):b(S)}function _(S){return S===null||S===60||S===61||S===62||S===96?t(S):S===34||S===39?(n.consume(S),l=S,L):Ce(S)?(n.consume(S),_):R(S)}function L(S){return S===l?(n.consume(S),l=null,O):S===null||ce(S)?t(S):(n.consume(S),L)}function R(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||kn(S)?T(S):(n.consume(S),R)}function O(S){return S===47||S===62||Ce(S)?b(S):t(S)}function j(S){return S===62?(n.consume(S),F):t(S)}function F(S){return S===null||ce(S)?H(S):Ce(S)?(n.consume(S),F):t(S)}function H(S){return S===45&&r===2?(n.consume(S),ae):S===60&&r===1?(n.consume(S),X):S===62&&r===4?(n.consume(S),D):S===63&&r===3?(n.consume(S),k):S===93&&r===5?(n.consume(S),I):ce(S)&&(r===6||r===7)?(n.exit("htmlFlowData"),n.check(PD,U,K)(S)):S===null||ce(S)?(n.exit("htmlFlowData"),K(S)):(n.consume(S),H)}function K(S){return n.check(LD,Q,U)(S)}function Q(S){return n.enter("lineEnding"),n.consume(S),n.exit("lineEnding"),W}function W(S){return S===null||ce(S)?K(S):(n.enter("htmlFlowData"),H(S))}function ae(S){return S===45?(n.consume(S),k):H(S)}function X(S){return S===47?(n.consume(S),a="",N):H(S)}function N(S){if(S===62){const z=a.toLowerCase();return Tb.includes(z)?(n.consume(S),D):H(S)}return or(S)&&a.length<8?(n.consume(S),a+=String.fromCharCode(S),N):H(S)}function I(S){return S===93?(n.consume(S),k):H(S)}function k(S){return S===62?(n.consume(S),D):S===45&&r===2?(n.consume(S),k):H(S)}function D(S){return S===null||ce(S)?(n.exit("htmlFlowData"),U(S)):(n.consume(S),D)}function U(S){return n.exit("htmlFlow"),e(S)}}function MD(n,e,t){const i=this;return r;function r(a){return ce(a)?(n.enter("lineEnding"),n.consume(a),n.exit("lineEnding"),s):t(a)}function s(a){return i.parser.lazy[i.now().line]?t(a):e(a)}}function ND(n,e,t){return i;function i(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),n.attempt(pm,e,t)}}const DD={name:"htmlText",tokenize:FD};function FD(n,e,t){const i=this;let r,s,a;return o;function o(k){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(k),l}function l(k){return k===33?(n.consume(k),u):k===47?(n.consume(k),T):k===63?(n.consume(k),b):or(k)?(n.consume(k),R):t(k)}function u(k){return k===45?(n.consume(k),d):k===91?(n.consume(k),s=0,m):or(k)?(n.consume(k),v):t(k)}function d(k){return k===45?(n.consume(k),f):t(k)}function h(k){return k===null?t(k):k===45?(n.consume(k),p):ce(k)?(a=h,X(k)):(n.consume(k),h)}function p(k){return k===45?(n.consume(k),f):h(k)}function f(k){return k===62?ae(k):k===45?p(k):h(k)}function m(k){const D="CDATA[";return k===D.charCodeAt(s++)?(n.consume(k),s===D.length?y:m):t(k)}function y(k){return k===null?t(k):k===93?(n.consume(k),E):ce(k)?(a=y,X(k)):(n.consume(k),y)}function E(k){return k===93?(n.consume(k),g):y(k)}function g(k){return k===62?ae(k):k===93?(n.consume(k),g):y(k)}function v(k){return k===null||k===62?ae(k):ce(k)?(a=v,X(k)):(n.consume(k),v)}function b(k){return k===null?t(k):k===63?(n.consume(k),C):ce(k)?(a=b,X(k)):(n.consume(k),b)}function C(k){return k===62?ae(k):b(k)}function T(k){return or(k)?(n.consume(k),_):t(k)}function _(k){return k===45||Bn(k)?(n.consume(k),_):L(k)}function L(k){return ce(k)?(a=L,X(k)):Ce(k)?(n.consume(k),L):ae(k)}function R(k){return k===45||Bn(k)?(n.consume(k),R):k===47||k===62||kn(k)?O(k):t(k)}function O(k){return k===47?(n.consume(k),ae):k===58||k===95||or(k)?(n.consume(k),j):ce(k)?(a=O,X(k)):Ce(k)?(n.consume(k),O):ae(k)}function j(k){return k===45||k===46||k===58||k===95||Bn(k)?(n.consume(k),j):F(k)}function F(k){return k===61?(n.consume(k),H):ce(k)?(a=F,X(k)):Ce(k)?(n.consume(k),F):O(k)}function H(k){return k===null||k===60||k===61||k===62||k===96?t(k):k===34||k===39?(n.consume(k),r=k,K):ce(k)?(a=H,X(k)):Ce(k)?(n.consume(k),H):(n.consume(k),Q)}function K(k){return k===r?(n.consume(k),r=void 0,W):k===null?t(k):ce(k)?(a=K,X(k)):(n.consume(k),K)}function Q(k){return k===null||k===34||k===39||k===60||k===61||k===96?t(k):k===47||k===62||kn(k)?O(k):(n.consume(k),Q)}function W(k){return k===47||k===62||kn(k)?O(k):t(k)}function ae(k){return k===62?(n.consume(k),n.exit("htmlTextData"),n.exit("htmlText"),e):t(k)}function X(k){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(k),n.exit("lineEnding"),N}function N(k){return Ce(k)?ze(n,I,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(k):I(k)}function I(k){return n.enter("htmlTextData"),a(k)}}const sx={name:"labelEnd",resolveAll:BD,resolveTo:HD,tokenize:$D},OD={tokenize:UD},jD={tokenize:VD},zD={tokenize:WD};function BD(n){let e=-1;const t=[];for(;++e<n.length;){const i=n[e][1];if(t.push(n[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return n.length!==t.length&&ur(n,0,n.length,t),n}function HD(n,e){let t=n.length,i=0,r,s,a,o;for(;t--;)if(r=n[t][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;n[t][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(a){if(n[t][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=t,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(a=t);const l={type:n[s][1].type==="labelLink"?"link":"image",start:{...n[s][1].start},end:{...n[n.length-1][1].end}},u={type:"label",start:{...n[s][1].start},end:{...n[a][1].end}},d={type:"labelText",start:{...n[s+i+2][1].end},end:{...n[a-2][1].start}};return o=[["enter",l,e],["enter",u,e]],o=ei(o,n.slice(s+1,s+i+3)),o=ei(o,[["enter",d,e]]),o=ei(o,rx(e.parser.constructs.insideSpan.null,n.slice(s+i+4,a-3),e)),o=ei(o,[["exit",d,e],n[a-2],n[a-1],["exit",u,e]]),o=ei(o,n.slice(a+1)),o=ei(o,[["exit",l,e]]),ur(n,s,n.length,o),n}function $D(n,e,t){const i=this;let r=i.events.length,s,a;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return o;function o(p){return s?s._inactive?h(p):(a=i.parser.defined.includes(vl(i.sliceSerialize({start:s.end,end:i.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(p),n.exit("labelMarker"),n.exit("labelEnd"),l):t(p)}function l(p){return p===40?n.attempt(OD,d,a?d:h)(p):p===91?n.attempt(jD,d,a?u:h)(p):a?d(p):h(p)}function u(p){return n.attempt(zD,d,h)(p)}function d(p){return e(p)}function h(p){return s._balanced=!0,t(p)}}function UD(n,e,t){return i;function i(h){return n.enter("resource"),n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),r}function r(h){return kn(h)?_u(n,s)(h):s(h)}function s(h){return h===41?d(h):m_(n,a,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function a(h){return kn(h)?_u(n,l)(h):d(h)}function o(h){return t(h)}function l(h){return h===34||h===39||h===40?y_(n,u,t,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):d(h)}function u(h){return kn(h)?_u(n,d)(h):d(h)}function d(h){return h===41?(n.enter("resourceMarker"),n.consume(h),n.exit("resourceMarker"),n.exit("resource"),e):t(h)}}function VD(n,e,t){const i=this;return r;function r(o){return g_.call(i,n,s,a,"reference","referenceMarker","referenceString")(o)}function s(o){return i.parser.defined.includes(vl(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(o):t(o)}function a(o){return t(o)}}function WD(n,e,t){return i;function i(s){return n.enter("reference"),n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),r}function r(s){return s===93?(n.enter("referenceMarker"),n.consume(s),n.exit("referenceMarker"),n.exit("reference"),e):t(s)}}const qD={name:"labelStartImage",resolveAll:sx.resolveAll,tokenize:GD};function GD(n,e,t){const i=this;return r;function r(o){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(o),n.exit("labelImageMarker"),s}function s(o){return o===91?(n.enter("labelMarker"),n.consume(o),n.exit("labelMarker"),n.exit("labelImage"),a):t(o)}function a(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(o):e(o)}}const XD={name:"labelStartLink",resolveAll:sx.resolveAll,tokenize:YD};function YD(n,e,t){const i=this;return r;function r(a){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(a),n.exit("labelMarker"),n.exit("labelLink"),s}function s(a){return a===94&&"_hiddenFootnoteSupport"in i.parser.constructs?t(a):e(a)}}const sg={name:"lineEnding",tokenize:KD};function KD(n,e){return t;function t(i){return n.enter("lineEnding"),n.consume(i),n.exit("lineEnding"),ze(n,e,"linePrefix")}}const Bp={name:"thematicBreak",tokenize:QD};function QD(n,e,t){let i=0,r;return s;function s(u){return n.enter("thematicBreak"),a(u)}function a(u){return r=u,o(u)}function o(u){return u===r?(n.enter("thematicBreakSequence"),l(u)):i>=3&&(u===null||ce(u))?(n.exit("thematicBreak"),e(u)):t(u)}function l(u){return u===r?(n.consume(u),i++,l):(n.exit("thematicBreakSequence"),Ce(u)?ze(n,o,"whitespace")(u):o(u))}}const un={continuation:{tokenize:tF},exit:iF,name:"list",tokenize:eF},ZD={partial:!0,tokenize:rF},JD={partial:!0,tokenize:nF};function eF(n,e,t){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,a=0;return o;function o(f){const m=i.containerState.type||(f===42||f===43||f===45?"listUnordered":"listOrdered");if(m==="listUnordered"?!i.containerState.marker||f===i.containerState.marker:Mv(f)){if(i.containerState.type||(i.containerState.type=m,n.enter(m,{_container:!0})),m==="listUnordered")return n.enter("listItemPrefix"),f===42||f===45?n.check(Bp,t,u)(f):u(f);if(!i.interrupt||f===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),l(f)}return t(f)}function l(f){return Mv(f)&&++a<10?(n.consume(f),l):(!i.interrupt||a<2)&&(i.containerState.marker?f===i.containerState.marker:f===41||f===46)?(n.exit("listItemValue"),u(f)):t(f)}function u(f){return n.enter("listItemMarker"),n.consume(f),n.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||f,n.check(pm,i.interrupt?t:d,n.attempt(ZD,p,h))}function d(f){return i.containerState.initialBlankLine=!0,s++,p(f)}function h(f){return Ce(f)?(n.enter("listItemPrefixWhitespace"),n.consume(f),n.exit("listItemPrefixWhitespace"),p):t(f)}function p(f){return i.containerState.size=s+i.sliceSerialize(n.exit("listItemPrefix"),!0).length,e(f)}}function tF(n,e,t){const i=this;return i.containerState._closeFlow=void 0,n.check(pm,r,s);function r(o){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,ze(n,e,"listItemIndent",i.containerState.size+1)(o)}function s(o){return i.containerState.furtherBlankLines||!Ce(o)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,a(o)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,n.attempt(JD,e,a)(o))}function a(o){return i.containerState._closeFlow=!0,i.interrupt=void 0,ze(n,n.attempt(un,e,t),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function nF(n,e,t){const i=this;return ze(n,r,"listItemIndent",i.containerState.size+1);function r(s){const a=i.events[i.events.length-1];return a&&a[1].type==="listItemIndent"&&a[2].sliceSerialize(a[1],!0).length===i.containerState.size?e(s):t(s)}}function iF(n){n.exit(this.containerState.type)}function rF(n,e,t){const i=this;return ze(n,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const a=i.events[i.events.length-1];return!Ce(s)&&a&&a[1].type==="listItemPrefixWhitespace"?e(s):t(s)}}const Pb={name:"setextUnderline",resolveTo:sF,tokenize:aF};function sF(n,e){let t=n.length,i,r,s;for(;t--;)if(n[t][0]==="enter"){if(n[t][1].type==="content"){i=t;break}n[t][1].type==="paragraph"&&(r=t)}else n[t][1].type==="content"&&n.splice(t,1),!s&&n[t][1].type==="definition"&&(s=t);const a={type:"setextHeading",start:{...n[i][1].start},end:{...n[n.length-1][1].end}};return n[r][1].type="setextHeadingText",s?(n.splice(r,0,["enter",a,e]),n.splice(s+1,0,["exit",n[i][1],e]),n[i][1].end={...n[s][1].end}):n[i][1]=a,n.push(["exit",a,e]),n}function aF(n,e,t){const i=this;let r;return s;function s(u){let d=i.events.length,h;for(;d--;)if(i.events[d][1].type!=="lineEnding"&&i.events[d][1].type!=="linePrefix"&&i.events[d][1].type!=="content"){h=i.events[d][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||h)?(n.enter("setextHeadingLine"),r=u,a(u)):t(u)}function a(u){return n.enter("setextHeadingLineSequence"),o(u)}function o(u){return u===r?(n.consume(u),o):(n.exit("setextHeadingLineSequence"),Ce(u)?ze(n,l,"lineSuffix")(u):l(u))}function l(u){return u===null||ce(u)?(n.exit("setextHeadingLine"),e(u)):t(u)}}const oF={tokenize:lF};function lF(n){const e=this,t=n.attempt(pm,i,n.attempt(this.parser.constructs.flowInitial,r,ze(n,n.attempt(this.parser.constructs.flow,r,n.attempt(pD,r)),"linePrefix")));return t;function i(s){if(s===null){n.consume(s);return}return n.enter("lineEndingBlank"),n.consume(s),n.exit("lineEndingBlank"),e.currentConstruct=void 0,t}function r(s){if(s===null){n.consume(s);return}return n.enter("lineEnding"),n.consume(s),n.exit("lineEnding"),e.currentConstruct=void 0,t}}const cF={resolveAll:x_()},uF=v_("string"),dF=v_("text");function v_(n){return{resolveAll:x_(n==="text"?hF:void 0),tokenize:e};function e(t){const i=this,r=this.parser.constructs[n],s=t.attempt(r,a,o);return a;function a(d){return u(d)?s(d):o(d)}function o(d){if(d===null){t.consume(d);return}return t.enter("data"),t.consume(d),l}function l(d){return u(d)?(t.exit("data"),s(d)):(t.consume(d),l)}function u(d){if(d===null)return!0;const h=r[d];let p=-1;if(h)for(;++p<h.length;){const f=h[p];if(!f.previous||f.previous.call(i,i.previous))return!0}return!1}}}function x_(n){return e;function e(t,i){let r=-1,s;for(;++r<=t.length;)s===void 0?t[r]&&t[r][1].type==="data"&&(s=r,r++):(!t[r]||t[r][1].type!=="data")&&(r!==s+2&&(t[s][1].end=t[r-1][1].end,t.splice(s+2,r-s-2),r=s+2),s=void 0);return n?n(t,i):t}}function hF(n,e){let t=0;for(;++t<=n.length;)if((t===n.length||n[t][1].type==="lineEnding")&&n[t-1][1].type==="data"){const i=n[t-1][1],r=e.sliceStream(i);let s=r.length,a=-1,o=0,l;for(;s--;){const u=r[s];if(typeof u=="string"){for(a=u.length;u.charCodeAt(a-1)===32;)o++,a--;if(a)break;a=-1}else if(u===-2)l=!0,o++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&t===n.length&&(o=0),o){const u={type:t===n.length||l||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?a:i.start._bufferIndex+a,_index:i.start._index+s,line:i.end.line,column:i.end.column-o,offset:i.end.offset-o},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(n.splice(t,0,["enter",u,e],["exit",u,e]),t+=2)}t++}return n}const pF={42:un,43:un,45:un,48:un,49:un,50:un,51:un,52:un,53:un,54:un,55:un,56:un,57:un,62:d_},fF={91:vD},mF={[-2]:rg,[-1]:rg,32:rg},gF={35:SD,42:Bp,45:[Pb,Bp],60:TD,61:Pb,95:Bp,96:Cb,126:Cb},yF={38:p_,92:h_},vF={[-5]:sg,[-4]:sg,[-3]:sg,33:qD,38:p_,42:Nv,60:[XN,DD],91:XD,92:[kD,h_],93:sx,95:Nv,96:oD},xF={null:[Nv,cF]},wF={null:[42,95]},bF={null:[]},kF=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:wF,contentInitial:fF,disable:bF,document:pF,flow:gF,flowInitial:mF,insideSpan:xF,string:yF,text:vF},Symbol.toStringTag,{value:"Module"}));function AF(n,e,t){let i={_bufferIndex:-1,_index:0,line:t&&t.line||1,column:t&&t.column||1,offset:t&&t.offset||0};const r={},s=[];let a=[],o=[];const l={attempt:L(T),check:L(_),consume:v,enter:b,exit:C,interrupt:L(_,{interrupt:!0})},u={code:null,containerState:{},defineSkip:y,events:[],now:m,parser:n,previous:null,sliceSerialize:p,sliceStream:f,write:h};let d=e.tokenize.call(u,l);return e.resolveAll&&s.push(e),u;function h(F){return a=ei(a,F),E(),a[a.length-1]!==null?[]:(R(e,0),u.events=rx(s,u.events,u),u.events)}function p(F,H){return EF(f(F),H)}function f(F){return SF(a,F)}function m(){const{_bufferIndex:F,_index:H,line:K,column:Q,offset:W}=i;return{_bufferIndex:F,_index:H,line:K,column:Q,offset:W}}function y(F){r[F.line]=F.column,j()}function E(){let F;for(;i._index<a.length;){const H=a[i._index];if(typeof H=="string")for(F=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===F&&i._bufferIndex<H.length;)g(H.charCodeAt(i._bufferIndex));else g(H)}}function g(F){d=d(F)}function v(F){ce(F)?(i.line++,i.column=1,i.offset+=F===-3?2:1,j()):F!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===a[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=F}function b(F,H){const K=H||{};return K.type=F,K.start=m(),u.events.push(["enter",K,u]),o.push(K),K}function C(F){const H=o.pop();return H.end=m(),u.events.push(["exit",H,u]),H}function T(F,H){R(F,H.from)}function _(F,H){H.restore()}function L(F,H){return K;function K(Q,W,ae){let X,N,I,k;return Array.isArray(Q)?U(Q):"tokenize"in Q?U([Q]):D(Q);function D(G){return ee;function ee(pe){const et=pe!==null&&G[pe],We=pe!==null&&G.null,ht=[...Array.isArray(et)?et:et?[et]:[],...Array.isArray(We)?We:We?[We]:[]];return U(ht)(pe)}}function U(G){return X=G,N=0,G.length===0?ae:S(G[N])}function S(G){return ee;function ee(pe){return k=O(),I=G,G.partial||(u.currentConstruct=G),G.name&&u.parser.constructs.disable.null.includes(G.name)?oe():G.tokenize.call(H?Object.assign(Object.create(u),H):u,l,z,oe)(pe)}}function z(G){return F(I,k),W}function oe(G){return k.restore(),++N<X.length?S(X[N]):ae}}}function R(F,H){F.resolveAll&&!s.includes(F)&&s.push(F),F.resolve&&ur(u.events,H,u.events.length-H,F.resolve(u.events.slice(H),u)),F.resolveTo&&(u.events=F.resolveTo(u.events,u))}function O(){const F=m(),H=u.previous,K=u.currentConstruct,Q=u.events.length,W=Array.from(o);return{from:Q,restore:ae};function ae(){i=F,u.previous=H,u.currentConstruct=K,u.events.length=Q,o=W,j()}}function j(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function SF(n,e){const t=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let a;if(t===r)a=[n[t].slice(i,s)];else{if(a=n.slice(t,r),i>-1){const o=a[0];typeof o=="string"?a[0]=o.slice(i):a.shift()}s>0&&a.push(n[r].slice(0,s))}return a}function EF(n,e){let t=-1;const i=[];let r;for(;++t<n.length;){const s=n[t];let a;if(typeof s=="string")a=s;else switch(s){case-5:{a="\r";break}case-4:{a=`
`;break}case-3:{a=`\r
`;break}case-2:{a=e?" ":"	";break}case-1:{if(!e&&r)continue;a=" ";break}default:a=String.fromCharCode(s)}r=s===-2,i.push(a)}return i.join("")}function _F(n){const i={constructs:MN([kF,...(n||{}).extensions||[]]),content:r(HN),defined:[],document:r(UN),flow:r(oF),lazy:{},string:r(uF),text:r(dF)};return i;function r(s){return a;function a(o){return AF(i,s,o)}}}function CF(n){for(;!f_(n););return n}const Lb=/[\0\t\n\r]/g;function TF(){let n=1,e="",t=!0,i;return r;function r(s,a,o){const l=[];let u,d,h,p,f;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(a||void 0).decode(s)),h=0,e="",t&&(s.charCodeAt(0)===65279&&h++,t=void 0);h<s.length;){if(Lb.lastIndex=h,u=Lb.exec(s),p=u&&u.index!==void 0?u.index:s.length,f=s.charCodeAt(p),!u){e=s.slice(h);break}if(f===10&&h===p&&i)l.push(-3),i=void 0;else switch(i&&(l.push(-5),i=void 0),h<p&&(l.push(s.slice(h,p)),n+=p-h),f){case 0:{l.push(65533),n++;break}case 9:{for(d=Math.ceil(n/4)*4,l.push(-2);n++<d;)l.push(-1);break}case 10:{l.push(-4),n=1;break}default:i=!0,n=1}h=p+1}return o&&(i&&l.push(-5),e&&l.push(e),l.push(null)),l}}const PF=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function LF(n){return n.replace(PF,IF)}function IF(n,e,t){if(e)return e;if(t.charCodeAt(0)===35){const r=t.charCodeAt(1),s=r===120||r===88;return u_(t.slice(s?2:1),s?16:10)}return ix(t)||n}const w_={}.hasOwnProperty;function RF(n,e,t){return typeof e!="string"&&(t=e,e=void 0),MF(t)(CF(_F(t).document().write(TF()(n,e,!0))))}function MF(n){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(la),autolinkProtocol:O,autolinkEmail:O,atxHeading:s(Rc),blockQuote:s(We),characterEscape:O,characterReference:O,codeFenced:s(ht),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:s(ht,a),codeText:s(rs,a),codeTextData:O,data:O,codeFlowValue:O,definition:s(kh),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:s(Ah),hardBreakEscape:s(Mc),hardBreakTrailing:s(Mc),htmlFlow:s(dr,a),htmlFlowData:O,htmlText:s(dr,a),htmlTextData:O,image:s(Nc),label:a,link:s(la),listItem:s(gm),listItemValue:p,listOrdered:s(ca,h),listUnordered:s(ca),paragraph:s(ym),reference:S,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:s(Rc),strong:s(vm),thematicBreak:s(le)},exit:{atxHeading:l(),atxHeadingSequence:T,autolink:l(),autolinkEmail:et,autolinkProtocol:pe,blockQuote:l(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:oe,characterReferenceMarkerNumeric:oe,characterReferenceValue:G,characterReference:ee,codeFenced:l(E),codeFencedFence:y,codeFencedFenceInfo:f,codeFencedFenceMeta:m,codeFlowValue:j,codeIndented:l(g),codeText:l(W),codeTextData:j,data:j,definition:l(),definitionDestinationString:C,definitionLabelString:v,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(H),hardBreakTrailing:l(H),htmlFlow:l(K),htmlFlowData:j,htmlText:l(Q),htmlTextData:j,image:l(X),label:I,labelText:N,lineEnding:F,link:l(ae),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:z,resourceDestinationString:k,resourceTitleString:D,resource:U,setextHeading:l(R),setextHeadingLineSequence:L,setextHeadingText:_,strong:l(),thematicBreak:l()}};b_(e,(n||{}).mdastExtensions||[]);const t={};return i;function i(M){let B={type:"root",children:[]};const ie={stack:[B],tokenStack:[],config:e,enter:o,exit:u,buffer:a,resume:d,data:t},ge=[];let Se=-1;for(;++Se<M.length;)if(M[Se][1].type==="listOrdered"||M[Se][1].type==="listUnordered")if(M[Se][0]==="enter")ge.push(Se);else{const Kt=ge.pop();Se=r(M,Kt,Se)}for(Se=-1;++Se<M.length;){const Kt=e[M[Se][0]];w_.call(Kt,M[Se][1].type)&&Kt[M[Se][1].type].call(Object.assign({sliceSerialize:M[Se][2].sliceSerialize},ie),M[Se][1])}if(ie.tokenStack.length>0){const Kt=ie.tokenStack[ie.tokenStack.length-1];(Kt[1]||Ib).call(ie,void 0,Kt[0])}for(B.position={start:as(M.length>0?M[0][1].start:{line:1,column:1,offset:0}),end:as(M.length>0?M[M.length-2][1].end:{line:1,column:1,offset:0})},Se=-1;++Se<e.transforms.length;)B=e.transforms[Se](B)||B;return B}function r(M,B,ie){let ge=B-1,Se=-1,Kt=!1,ci,Sn,Di,hr;for(;++ge<=ie;){const Pt=M[ge];switch(Pt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Pt[0]==="enter"?Se++:Se--,hr=void 0;break}case"lineEndingBlank":{Pt[0]==="enter"&&(ci&&!hr&&!Se&&!Di&&(Di=ge),hr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:hr=void 0}if(!Se&&Pt[0]==="enter"&&Pt[1].type==="listItemPrefix"||Se===-1&&Pt[0]==="exit"&&(Pt[1].type==="listUnordered"||Pt[1].type==="listOrdered")){if(ci){let Fi=ge;for(Sn=void 0;Fi--;){const En=M[Fi];if(En[1].type==="lineEnding"||En[1].type==="lineEndingBlank"){if(En[0]==="exit")continue;Sn&&(M[Sn][1].type="lineEndingBlank",Kt=!0),En[1].type="lineEnding",Sn=Fi}else if(!(En[1].type==="linePrefix"||En[1].type==="blockQuotePrefix"||En[1].type==="blockQuotePrefixWhitespace"||En[1].type==="blockQuoteMarker"||En[1].type==="listItemIndent"))break}Di&&(!Sn||Di<Sn)&&(ci._spread=!0),ci.end=Object.assign({},Sn?M[Sn][1].start:Pt[1].end),M.splice(Sn||ge,0,["exit",ci,Pt[2]]),ge++,ie++}if(Pt[1].type==="listItemPrefix"){const Fi={type:"listItem",_spread:!1,start:Object.assign({},Pt[1].start),end:void 0};ci=Fi,M.splice(ge,0,["enter",Fi,Pt[2]]),ge++,ie++,Di=void 0,hr=!0}}}return M[B][1]._spread=Kt,ie}function s(M,B){return ie;function ie(ge){o.call(this,M(ge),ge),B&&B.call(this,ge)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(M,B,ie){this.stack[this.stack.length-1].children.push(M),this.stack.push(M),this.tokenStack.push([B,ie||void 0]),M.position={start:as(B.start),end:void 0}}function l(M){return B;function B(ie){M&&M.call(this,ie),u.call(this,ie)}}function u(M,B){const ie=this.stack.pop(),ge=this.tokenStack.pop();if(ge)ge[0].type!==M.type&&(B?B.call(this,M,ge[0]):(ge[1]||Ib).call(this,M,ge[0]));else throw new Error("Cannot close `"+M.type+"` ("+Eu({start:M.start,end:M.end})+"): its not open");ie.position.end=as(M.end)}function d(){return IN(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function p(M){if(this.data.expectingFirstListItemValue){const B=this.stack[this.stack.length-2];B.start=Number.parseInt(this.sliceSerialize(M),10),this.data.expectingFirstListItemValue=void 0}}function f(){const M=this.resume(),B=this.stack[this.stack.length-1];B.lang=M}function m(){const M=this.resume(),B=this.stack[this.stack.length-1];B.meta=M}function y(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function E(){const M=this.resume(),B=this.stack[this.stack.length-1];B.value=M.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function g(){const M=this.resume(),B=this.stack[this.stack.length-1];B.value=M.replace(/(\r?\n|\r)$/g,"")}function v(M){const B=this.resume(),ie=this.stack[this.stack.length-1];ie.label=B,ie.identifier=vl(this.sliceSerialize(M)).toLowerCase()}function b(){const M=this.resume(),B=this.stack[this.stack.length-1];B.title=M}function C(){const M=this.resume(),B=this.stack[this.stack.length-1];B.url=M}function T(M){const B=this.stack[this.stack.length-1];if(!B.depth){const ie=this.sliceSerialize(M).length;B.depth=ie}}function _(){this.data.setextHeadingSlurpLineEnding=!0}function L(M){const B=this.stack[this.stack.length-1];B.depth=this.sliceSerialize(M).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function O(M){const ie=this.stack[this.stack.length-1].children;let ge=ie[ie.length-1];(!ge||ge.type!=="text")&&(ge=Z(),ge.position={start:as(M.start),end:void 0},ie.push(ge)),this.stack.push(ge)}function j(M){const B=this.stack.pop();B.value+=this.sliceSerialize(M),B.position.end=as(M.end)}function F(M){const B=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ie=B.children[B.children.length-1];ie.position.end=as(M.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(B.type)&&(O.call(this,M),j.call(this,M))}function H(){this.data.atHardBreak=!0}function K(){const M=this.resume(),B=this.stack[this.stack.length-1];B.value=M}function Q(){const M=this.resume(),B=this.stack[this.stack.length-1];B.value=M}function W(){const M=this.resume(),B=this.stack[this.stack.length-1];B.value=M}function ae(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const B=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=B,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function X(){const M=this.stack[this.stack.length-1];if(this.data.inReference){const B=this.data.referenceType||"shortcut";M.type+="Reference",M.referenceType=B,delete M.url,delete M.title}else delete M.identifier,delete M.label;this.data.referenceType=void 0}function N(M){const B=this.sliceSerialize(M),ie=this.stack[this.stack.length-2];ie.label=LF(B),ie.identifier=vl(B).toLowerCase()}function I(){const M=this.stack[this.stack.length-1],B=this.resume(),ie=this.stack[this.stack.length-1];if(this.data.inReference=!0,ie.type==="link"){const ge=M.children;ie.children=ge}else ie.alt=B}function k(){const M=this.resume(),B=this.stack[this.stack.length-1];B.url=M}function D(){const M=this.resume(),B=this.stack[this.stack.length-1];B.title=M}function U(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function z(M){const B=this.resume(),ie=this.stack[this.stack.length-1];ie.label=B,ie.identifier=vl(this.sliceSerialize(M)).toLowerCase(),this.data.referenceType="full"}function oe(M){this.data.characterReferenceType=M.type}function G(M){const B=this.sliceSerialize(M),ie=this.data.characterReferenceType;let ge;ie?(ge=u_(B,ie==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ge=ix(B);const Se=this.stack[this.stack.length-1];Se.value+=ge}function ee(M){const B=this.stack.pop();B.position.end=as(M.end)}function pe(M){j.call(this,M);const B=this.stack[this.stack.length-1];B.url=this.sliceSerialize(M)}function et(M){j.call(this,M);const B=this.stack[this.stack.length-1];B.url="mailto:"+this.sliceSerialize(M)}function We(){return{type:"blockquote",children:[]}}function ht(){return{type:"code",lang:null,meta:null,value:""}}function rs(){return{type:"inlineCode",value:""}}function kh(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ah(){return{type:"emphasis",children:[]}}function Rc(){return{type:"heading",depth:0,children:[]}}function Mc(){return{type:"break"}}function dr(){return{type:"html",value:""}}function Nc(){return{type:"image",title:null,url:"",alt:null}}function la(){return{type:"link",title:null,url:"",children:[]}}function ca(M){return{type:"list",ordered:M.type==="listOrdered",start:null,spread:M._spread,children:[]}}function gm(M){return{type:"listItem",spread:M._spread,checked:null,children:[]}}function ym(){return{type:"paragraph",children:[]}}function vm(){return{type:"strong",children:[]}}function Z(){return{type:"text",value:""}}function le(){return{type:"thematicBreak"}}}function as(n){return{line:n.line,column:n.column,offset:n.offset}}function b_(n,e){let t=-1;for(;++t<e.length;){const i=e[t];Array.isArray(i)?b_(n,i):NF(n,i)}}function NF(n,e){let t;for(t in e)if(w_.call(e,t))switch(t){case"canContainEols":{const i=e[t];i&&n[t].push(...i);break}case"transforms":{const i=e[t];i&&n[t].push(...i);break}case"enter":case"exit":{const i=e[t];i&&Object.assign(n[t],i);break}}}function Ib(n,e){throw n?new Error("Cannot close `"+n.type+"` ("+Eu({start:n.start,end:n.end})+"): a different token (`"+e.type+"`, "+Eu({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Eu({start:e.start,end:e.end})+") is still open")}function DF(n){const e=this;e.parser=t;function t(i){return RF(i,{...e.data("settings"),...n,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function FF(n,e){const t={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(e),!0)};return n.patch(e,t),n.applyData(e,t)}function OF(n,e){const t={type:"element",tagName:"br",properties:{},children:[]};return n.patch(e,t),[n.applyData(e,t),{type:"text",value:`
`}]}function jF(n,e){const t=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:t}]};return e.meta&&(r.data={meta:e.meta}),n.patch(e,r),r=n.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},n.patch(e,r),r}function zF(n,e){const t={type:"element",tagName:"del",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function BF(n,e){const t={type:"element",tagName:"em",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function HF(n,e){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Ic(i.toLowerCase()),s=n.footnoteOrder.indexOf(i);let a,o=n.footnoteCounts.get(i);o===void 0?(o=0,n.footnoteOrder.push(i),a=n.footnoteOrder.length):a=s+1,o+=1,n.footnoteCounts.set(i,o);const l={type:"element",tagName:"a",properties:{href:"#"+t+"fn-"+r,id:t+"fnref-"+r+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};n.patch(e,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return n.patch(e,u),n.applyData(e,u)}function $F(n,e){const t={type:"element",tagName:"h"+e.depth,properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function UF(n,e){if(n.options.allowDangerousHtml){const t={type:"raw",value:e.value};return n.patch(e,t),n.applyData(e,t)}}function k_(n,e){const t=e.referenceType;let i="]";if(t==="collapsed"?i+="[]":t==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=n.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const a=r[r.length-1];return a&&a.type==="text"?a.value+=i:r.push({type:"text",value:i}),r}function VF(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return k_(n,e);const r={src:Ic(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return n.patch(e,s),n.applyData(e,s)}function WF(n,e){const t={src:Ic(e.url)};e.alt!==null&&e.alt!==void 0&&(t.alt=e.alt),e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"img",properties:t,children:[]};return n.patch(e,i),n.applyData(e,i)}function qF(n,e){const t={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};n.patch(e,t);const i={type:"element",tagName:"code",properties:{},children:[t]};return n.patch(e,i),n.applyData(e,i)}function GF(n,e){const t=String(e.identifier).toUpperCase(),i=n.definitionById.get(t);if(!i)return k_(n,e);const r={href:Ic(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:n.all(e)};return n.patch(e,s),n.applyData(e,s)}function XF(n,e){const t={href:Ic(e.url)};e.title!==null&&e.title!==void 0&&(t.title=e.title);const i={type:"element",tagName:"a",properties:t,children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function YF(n,e,t){const i=n.all(e),r=t?KF(t):A_(e),s={},a=[];if(typeof e.checked=="boolean"){const d=i[0];let h;d&&d.type==="element"&&d.tagName==="p"?h=d:(h={type:"element",tagName:"p",properties:{},children:[]},i.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let o=-1;for(;++o<i.length;){const d=i[o];(r||o!==0||d.type!=="element"||d.tagName!=="p")&&a.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!r?a.push(...d.children):a.push(d)}const l=i[i.length-1];l&&(r||l.type!=="element"||l.tagName!=="p")&&a.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:a};return n.patch(e,u),n.applyData(e,u)}function KF(n){let e=!1;if(n.type==="list"){e=n.spread||!1;const t=n.children;let i=-1;for(;!e&&++i<t.length;)e=A_(t[i])}return e}function A_(n){const e=n.spread;return e??n.children.length>1}function QF(n,e){const t={},i=n.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(t.start=e.start);++r<i.length;){const a=i[r];if(a.type==="element"&&a.tagName==="li"&&a.properties&&Array.isArray(a.properties.className)&&a.properties.className.includes("task-list-item")){t.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:t,children:n.wrap(i,!0)};return n.patch(e,s),n.applyData(e,s)}function ZF(n,e){const t={type:"element",tagName:"p",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function JF(n,e){const t={type:"root",children:n.wrap(n.all(e))};return n.patch(e,t),n.applyData(e,t)}function eO(n,e){const t={type:"element",tagName:"strong",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}function tO(n,e){const t=n.all(e),i=t.shift(),r=[];if(i){const a={type:"element",tagName:"thead",properties:{},children:n.wrap([i],!0)};n.patch(e.children[0],a),r.push(a)}if(t.length>0){const a={type:"element",tagName:"tbody",properties:{},children:n.wrap(t,!0)},o=J0(e.children[1]),l=i_(e.children[e.children.length-1]);o&&l&&(a.position={start:o,end:l}),r.push(a)}const s={type:"element",tagName:"table",properties:{},children:n.wrap(r,!0)};return n.patch(e,s),n.applyData(e,s)}function nO(n,e,t){const i=t?t.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",a=t&&t.type==="table"?t.align:void 0,o=a?a.length:e.children.length;let l=-1;const u=[];for(;++l<o;){const h=e.children[l],p={},f=a?a[l]:void 0;f&&(p.align=f);let m={type:"element",tagName:s,properties:p,children:[]};h&&(m.children=n.all(h),n.patch(h,m),m=n.applyData(h,m)),u.push(m)}const d={type:"element",tagName:"tr",properties:{},children:n.wrap(u,!0)};return n.patch(e,d),n.applyData(e,d)}function iO(n,e){const t={type:"element",tagName:"td",properties:{},children:n.all(e)};return n.patch(e,t),n.applyData(e,t)}const Rb=9,Mb=32;function rO(n){const e=String(n),t=/\r?\n|\r/g;let i=t.exec(e),r=0;const s=[];for(;i;)s.push(Nb(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=t.exec(e);return s.push(Nb(e.slice(r),r>0,!1)),s.join("")}function Nb(n,e,t){let i=0,r=n.length;if(e){let s=n.codePointAt(i);for(;s===Rb||s===Mb;)i++,s=n.codePointAt(i)}if(t){let s=n.codePointAt(r-1);for(;s===Rb||s===Mb;)r--,s=n.codePointAt(r-1)}return r>i?n.slice(i,r):""}function sO(n,e){const t={type:"text",value:rO(String(e.value))};return n.patch(e,t),n.applyData(e,t)}function aO(n,e){const t={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(e,t),n.applyData(e,t)}const oO={blockquote:FF,break:OF,code:jF,delete:zF,emphasis:BF,footnoteReference:HF,heading:$F,html:UF,imageReference:VF,image:WF,inlineCode:qF,linkReference:GF,link:XF,listItem:YF,list:QF,paragraph:ZF,root:JF,strong:eO,table:tO,tableCell:iO,tableRow:nO,text:sO,thematicBreak:aO,toml:Yh,yaml:Yh,definition:Yh,footnoteDefinition:Yh};function Yh(){}const S_=-1,fm=0,Cu=1,kf=2,ax=3,ox=4,lx=5,cx=6,E_=7,__=8,Db=typeof self=="object"?self:globalThis,lO=(n,e)=>{const t=(r,s)=>(n.set(s,r),r),i=r=>{if(n.has(r))return n.get(r);const[s,a]=e[r];switch(s){case fm:case S_:return t(a,r);case Cu:{const o=t([],r);for(const l of a)o.push(i(l));return o}case kf:{const o=t({},r);for(const[l,u]of a)o[i(l)]=i(u);return o}case ax:return t(new Date(a),r);case ox:{const{source:o,flags:l}=a;return t(new RegExp(o,l),r)}case lx:{const o=t(new Map,r);for(const[l,u]of a)o.set(i(l),i(u));return o}case cx:{const o=t(new Set,r);for(const l of a)o.add(i(l));return o}case E_:{const{name:o,message:l}=a;return t(new Db[o](l),r)}case __:return t(BigInt(a),r);case"BigInt":return t(Object(BigInt(a)),r);case"ArrayBuffer":return t(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:o}=new Uint8Array(a);return t(new DataView(o),a)}}return t(new Db[s](a),r)};return i},Fb=n=>lO(new Map,n)(0),Ho="",{toString:cO}={},{keys:uO}=Object,Gc=n=>{const e=typeof n;if(e!=="object"||!n)return[fm,e];const t=cO.call(n).slice(8,-1);switch(t){case"Array":return[Cu,Ho];case"Object":return[kf,Ho];case"Date":return[ax,Ho];case"RegExp":return[ox,Ho];case"Map":return[lx,Ho];case"Set":return[cx,Ho];case"DataView":return[Cu,t]}return t.includes("Array")?[Cu,t]:t.includes("Error")?[E_,t]:[kf,t]},Kh=([n,e])=>n===fm&&(e==="function"||e==="symbol"),dO=(n,e,t,i)=>{const r=(a,o)=>{const l=i.push(a)-1;return t.set(o,l),l},s=a=>{if(t.has(a))return t.get(a);let[o,l]=Gc(a);switch(o){case fm:{let d=a;switch(l){case"bigint":o=__,d=a.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return r([S_],a)}return r([o,d],a)}case Cu:{if(l){let p=a;return l==="DataView"?p=new Uint8Array(a.buffer):l==="ArrayBuffer"&&(p=new Uint8Array(a)),r([l,[...p]],a)}const d=[],h=r([o,d],a);for(const p of a)d.push(s(p));return h}case kf:{if(l)switch(l){case"BigInt":return r([l,a.toString()],a);case"Boolean":case"Number":case"String":return r([l,a.valueOf()],a)}if(e&&"toJSON"in a)return s(a.toJSON());const d=[],h=r([o,d],a);for(const p of uO(a))(n||!Kh(Gc(a[p])))&&d.push([s(p),s(a[p])]);return h}case ax:return r([o,a.toISOString()],a);case ox:{const{source:d,flags:h}=a;return r([o,{source:d,flags:h}],a)}case lx:{const d=[],h=r([o,d],a);for(const[p,f]of a)(n||!(Kh(Gc(p))||Kh(Gc(f))))&&d.push([s(p),s(f)]);return h}case cx:{const d=[],h=r([o,d],a);for(const p of a)(n||!Kh(Gc(p)))&&d.push(s(p));return h}}const{message:u}=a;return r([o,{name:l,message:u}],a)};return s},Ob=(n,{json:e,lossy:t}={})=>{const i=[];return dO(!(e||t),!!e,new Map,i)(n),i},Af=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?Fb(Ob(n,e)):structuredClone(n):(n,e)=>Fb(Ob(n,e));function hO(n,e){const t=[{type:"text",value:""}];return e>1&&t.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),t}function pO(n,e){return"Back to reference "+(n+1)+(e>1?"-"+e:"")}function fO(n){const e=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",t=n.options.footnoteBackContent||hO,i=n.options.footnoteBackLabel||pO,r=n.options.footnoteLabel||"Footnotes",s=n.options.footnoteLabelTagName||"h2",a=n.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<n.footnoteOrder.length;){const u=n.footnoteById.get(n.footnoteOrder[l]);if(!u)continue;const d=n.all(u),h=String(u.identifier).toUpperCase(),p=Ic(h.toLowerCase());let f=0;const m=[],y=n.footnoteCounts.get(h);for(;y!==void 0&&++f<=y;){m.length>0&&m.push({type:"text",value:" "});let v=typeof t=="string"?t:t(l,f);typeof v=="string"&&(v={type:"text",value:v}),m.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+p+(f>1?"-"+f:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(l,f),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const E=d[d.length-1];if(E&&E.type==="element"&&E.tagName==="p"){const v=E.children[E.children.length-1];v&&v.type==="text"?v.value+=" ":E.children.push({type:"text",value:" "}),E.children.push(...m)}else d.push(...m);const g={type:"element",tagName:"li",properties:{id:e+"fn-"+p},children:n.wrap(d,!0)};n.patch(u,g),o.push(g)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Af(a),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(o,!0)},{type:"text",value:`
`}]}}const C_=function(n){if(n==null)return vO;if(typeof n=="function")return mm(n);if(typeof n=="object")return Array.isArray(n)?mO(n):gO(n);if(typeof n=="string")return yO(n);throw new Error("Expected function, string, or object as test")};function mO(n){const e=[];let t=-1;for(;++t<n.length;)e[t]=C_(n[t]);return mm(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function gO(n){const e=n;return mm(t);function t(i){const r=i;let s;for(s in n)if(r[s]!==e[s])return!1;return!0}}function yO(n){return mm(e);function e(t){return t&&t.type===n}}function mm(n){return e;function e(t,i,r){return!!(xO(t)&&n.call(this,t,typeof i=="number"?i:void 0,r||void 0))}}function vO(){return!0}function xO(n){return n!==null&&typeof n=="object"&&"type"in n}const T_=[],wO=!0,jb=!1,bO="skip";function kO(n,e,t,i){let r;typeof e=="function"&&typeof t!="function"?(i=t,t=e):r=e;const s=C_(r),a=i?-1:1;o(n,void 0,[])();function o(l,u,d){const h=l&&typeof l=="object"?l:{};if(typeof h.type=="string"){const f=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(l.type+(f?"<"+f+">":""))+")"})}return p;function p(){let f=T_,m,y,E;if((!e||s(l,u,d[d.length-1]||void 0))&&(f=AO(t(l,d)),f[0]===jb))return f;if("children"in l&&l.children){const g=l;if(g.children&&f[0]!==bO)for(y=(i?g.children.length:-1)+a,E=d.concat(g);y>-1&&y<g.children.length;){const v=g.children[y];if(m=o(v,y,E)(),m[0]===jb)return m;y=typeof m[1]=="number"?m[1]:y+a}}return f}}}function AO(n){return Array.isArray(n)?n:typeof n=="number"?[wO,n]:n==null?T_:[n]}function P_(n,e,t,i){let r,s,a;typeof e=="function"&&typeof t!="function"?(s=void 0,a=e,r=t):(s=e,a=t,r=i),kO(n,s,o,r);function o(l,u){const d=u[u.length-1],h=d?d.children.indexOf(l):void 0;return a(l,h,d)}}const Dv={}.hasOwnProperty,SO={};function EO(n,e){const t=e||SO,i=new Map,r=new Map,s=new Map,a={...oO,...t.handlers},o={all:u,applyData:CO,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:a,one:l,options:t,patch:_O,wrap:PO};return P_(n,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const h=d.type==="definition"?i:r,p=String(d.identifier).toUpperCase();h.has(p)||h.set(p,d)}}),o;function l(d,h){const p=d.type,f=o.handlers[p];if(Dv.call(o.handlers,p)&&f)return f(o,d,h);if(o.options.passThrough&&o.options.passThrough.includes(p)){if("children"in d){const{children:y,...E}=d,g=Af(E);return g.children=o.all(d),g}return Af(d)}return(o.options.unknownHandler||TO)(o,d,h)}function u(d){const h=[];if("children"in d){const p=d.children;let f=-1;for(;++f<p.length;){const m=o.one(p[f],d);if(m){if(f&&p[f-1].type==="break"&&(!Array.isArray(m)&&m.type==="text"&&(m.value=zb(m.value)),!Array.isArray(m)&&m.type==="element")){const y=m.children[0];y&&y.type==="text"&&(y.value=zb(y.value))}Array.isArray(m)?h.push(...m):h.push(m)}}}return h}}function _O(n,e){n.position&&(e.position=cN(n))}function CO(n,e){let t=e;if(n&&n.data){const i=n.data.hName,r=n.data.hChildren,s=n.data.hProperties;if(typeof i=="string")if(t.type==="element")t.tagName=i;else{const a="children"in t?t.children:[t];t={type:"element",tagName:i,properties:{},children:a}}t.type==="element"&&s&&Object.assign(t.properties,Af(s)),"children"in t&&t.children&&r!==null&&r!==void 0&&(t.children=r)}return t}function TO(n,e){const t=e.data||{},i="value"in e&&!(Dv.call(t,"hProperties")||Dv.call(t,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:n.all(e)};return n.patch(e,i),n.applyData(e,i)}function PO(n,e){const t=[];let i=-1;for(e&&t.push({type:"text",value:`
`});++i<n.length;)i&&t.push({type:"text",value:`
`}),t.push(n[i]);return e&&n.length>0&&t.push({type:"text",value:`
`}),t}function zb(n){let e=0,t=n.charCodeAt(e);for(;t===9||t===32;)e++,t=n.charCodeAt(e);return n.slice(e)}function Bb(n,e){const t=EO(n,e),i=t.one(n,void 0),r=fO(t),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function LO(n,e){return n&&"run"in n?async function(t,i){const r=Bb(t,{file:i,...e});await n.run(r,i)}:function(t,i){return Bb(t,{file:i,...n||e})}}function Hb(n){if(n)throw n}var Hp=Object.prototype.hasOwnProperty,L_=Object.prototype.toString,$b=Object.defineProperty,Ub=Object.getOwnPropertyDescriptor,Vb=function(e){return typeof Array.isArray=="function"?Array.isArray(e):L_.call(e)==="[object Array]"},Wb=function(e){if(!e||L_.call(e)!=="[object Object]")return!1;var t=Hp.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&Hp.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;var r;for(r in e);return typeof r>"u"||Hp.call(e,r)},qb=function(e,t){$b&&t.name==="__proto__"?$b(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},Gb=function(e,t){if(t==="__proto__")if(Hp.call(e,t)){if(Ub)return Ub(e,t).value}else return;return e[t]},IO=function n(){var e,t,i,r,s,a,o=arguments[0],l=1,u=arguments.length,d=!1;for(typeof o=="boolean"&&(d=o,o=arguments[1]||{},l=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});l<u;++l)if(e=arguments[l],e!=null)for(t in e)i=Gb(o,t),r=Gb(e,t),o!==r&&(d&&r&&(Wb(r)||(s=Vb(r)))?(s?(s=!1,a=i&&Vb(i)?i:[]):a=i&&Wb(i)?i:{},qb(o,{name:t,newValue:n(d,a,r)})):typeof r<"u"&&qb(o,{name:t,newValue:r}));return o};const ag=dh(IO);function Fv(n){if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function RO(){const n=[],e={run:t,use:i};return e;function t(...r){let s=-1;const a=r.pop();if(typeof a!="function")throw new TypeError("Expected function as last argument, not "+a);o(null,...r);function o(l,...u){const d=n[++s];let h=-1;if(l){a(l);return}for(;++h<r.length;)(u[h]===null||u[h]===void 0)&&(u[h]=r[h]);r=u,d?MO(d,o)(...u):a(null,...u)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return n.push(r),e}}function MO(n,e){let t;return i;function i(...a){const o=n.length>a.length;let l;o&&a.push(r);try{l=n.apply(this,a)}catch(u){const d=u;if(o&&t)throw d;return r(d)}o||(l&&l.then&&typeof l.then=="function"?l.then(s,r):l instanceof Error?r(l):s(l))}function r(a,...o){t||(t=!0,e(a,...o))}function s(a){r(null,a)}}const Hi={basename:NO,dirname:DO,extname:FO,join:OO,sep:"/"};function NO(n,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');bh(n);let t=0,i=-1,r=n.length,s;if(e===void 0||e.length===0||e.length>n.length){for(;r--;)if(n.codePointAt(r)===47){if(s){t=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":n.slice(t,i)}if(e===n)return"";let a=-1,o=e.length-1;for(;r--;)if(n.codePointAt(r)===47){if(s){t=r+1;break}}else a<0&&(s=!0,a=r+1),o>-1&&(n.codePointAt(r)===e.codePointAt(o--)?o<0&&(i=r):(o=-1,i=a));return t===i?i=a:i<0&&(i=n.length),n.slice(t,i)}function DO(n){if(bh(n),n.length===0)return".";let e=-1,t=n.length,i;for(;--t;)if(n.codePointAt(t)===47){if(i){e=t;break}}else i||(i=!0);return e<0?n.codePointAt(0)===47?"/":".":e===1&&n.codePointAt(0)===47?"//":n.slice(0,e)}function FO(n){bh(n);let e=n.length,t=-1,i=0,r=-1,s=0,a;for(;e--;){const o=n.codePointAt(e);if(o===47){if(a){i=e+1;break}continue}t<0&&(a=!0,t=e+1),o===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||t<0||s===0||s===1&&r===t-1&&r===i+1?"":n.slice(r,t)}function OO(...n){let e=-1,t;for(;++e<n.length;)bh(n[e]),n[e]&&(t=t===void 0?n[e]:t+"/"+n[e]);return t===void 0?".":jO(t)}function jO(n){bh(n);const e=n.codePointAt(0)===47;let t=zO(n,!e);return t.length===0&&!e&&(t="."),t.length>0&&n.codePointAt(n.length-1)===47&&(t+="/"),e?"/"+t:t}function zO(n,e){let t="",i=0,r=-1,s=0,a=-1,o,l;for(;++a<=n.length;){if(a<n.length)o=n.codePointAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(t.length<2||i!==2||t.codePointAt(t.length-1)!==46||t.codePointAt(t.length-2)!==46){if(t.length>2){if(l=t.lastIndexOf("/"),l!==t.length-1){l<0?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),r=a,s=0;continue}}else if(t.length>0){t="",i=0,r=a,s=0;continue}}e&&(t=t.length>0?t+"/..":"..",i=2)}else t.length>0?t+="/"+n.slice(r+1,a):t=n.slice(r+1,a),i=a-r-1;r=a,s=0}else o===46&&s>-1?s++:s=-1}return t}function bh(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const BO={cwd:HO};function HO(){return"/"}function Ov(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function $O(n){if(typeof n=="string")n=new URL(n);else if(!Ov(n)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(n.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return UO(n)}function UO(n){if(n.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=n.pathname;let t=-1;for(;++t<e.length;)if(e.codePointAt(t)===37&&e.codePointAt(t+1)===50){const i=e.codePointAt(t+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const og=["history","path","basename","stem","extname","dirname"];class I_{constructor(e){let t;e?Ov(e)?t={path:e}:typeof e=="string"||VO(e)?t={value:e}:t=e:t={},this.cwd="cwd"in t?"":BO.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<og.length;){const s=og[i];s in t&&t[s]!==void 0&&t[s]!==null&&(this[s]=s==="history"?[...t[s]]:t[s])}let r;for(r in t)og.includes(r)||(this[r]=t[r])}get basename(){return typeof this.path=="string"?Hi.basename(this.path):void 0}set basename(e){cg(e,"basename"),lg(e,"basename"),this.path=Hi.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Hi.dirname(this.path):void 0}set dirname(e){Xb(this.basename,"dirname"),this.path=Hi.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Hi.extname(this.path):void 0}set extname(e){if(lg(e,"extname"),Xb(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Hi.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Ov(e)&&(e=$O(e)),cg(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Hi.basename(this.path,this.extname):void 0}set stem(e){cg(e,"stem"),lg(e,"stem"),this.path=Hi.join(this.dirname||"",e+(this.extname||""))}fail(e,t,i){const r=this.message(e,t,i);throw r.fatal=!0,r}info(e,t,i){const r=this.message(e,t,i);return r.fatal=void 0,r}message(e,t,i){const r=new Yt(e,t,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function lg(n,e){if(n&&n.includes(Hi.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Hi.sep+"`")}function cg(n,e){if(!n)throw new Error("`"+e+"` cannot be empty")}function Xb(n,e){if(!n)throw new Error("Setting `"+e+"` requires `path` to be set too")}function VO(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const WO=function(n){const i=this.constructor.prototype,r=i[n],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},qO={}.hasOwnProperty;class ux extends WO{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=RO()}copy(){const e=new ux;let t=-1;for(;++t<this.attachers.length;){const i=this.attachers[t];e.use(...i)}return e.data(ag(!0,{},this.namespace)),e}data(e,t){return typeof e=="string"?arguments.length===2?(hg("data",this.frozen),this.namespace[e]=t,this):qO.call(this.namespace,e)&&this.namespace[e]||void 0:e?(hg("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=t.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Qh(e),i=this.parser||this.Parser;return ug("parse",i),i(String(t),t)}process(e,t){const i=this;return this.freeze(),ug("process",this.parser||this.Parser),dg("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(s,a){const o=Qh(e),l=i.parse(o);i.run(l,o,function(d,h,p){if(d||!h||!p)return u(d);const f=h,m=i.stringify(f,p);YO(m)?p.value=m:p.result=m,u(d,p)});function u(d,h){d||!h?a(d):s?s(h):t(void 0,h)}}}processSync(e){let t=!1,i;return this.freeze(),ug("processSync",this.parser||this.Parser),dg("processSync",this.compiler||this.Compiler),this.process(e,r),Kb("processSync","process",t),i;function r(s,a){t=!0,Hb(s),i=a}}run(e,t,i){Yb(e),this.freeze();const r=this.transformers;return!i&&typeof t=="function"&&(i=t,t=void 0),i?s(void 0,i):new Promise(s);function s(a,o){const l=Qh(t);r.run(e,l,u);function u(d,h,p){const f=h||e;d?o(d):a?a(f):i(void 0,f,p)}}}runSync(e,t){let i=!1,r;return this.run(e,t,s),Kb("runSync","run",i),r;function s(a,o){Hb(a),r=o,i=!0}}stringify(e,t){this.freeze();const i=Qh(t),r=this.compiler||this.Compiler;return dg("stringify",r),Yb(e),r(e,i)}use(e,...t){const i=this.attachers,r=this.namespace;if(hg("use",this.frozen),e!=null)if(typeof e=="function")l(e,t);else if(typeof e=="object")Array.isArray(e)?o(e):a(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[d,...h]=u;l(d,h)}else a(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function a(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(u.plugins),u.settings&&(r.settings=ag(!0,r.settings,u.settings))}function o(u){let d=-1;if(u!=null)if(Array.isArray(u))for(;++d<u.length;){const h=u[d];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,d){let h=-1,p=-1;for(;++h<i.length;)if(i[h][0]===u){p=h;break}if(p===-1)i.push([u,...d]);else if(d.length>0){let[f,...m]=d;const y=i[p][1];Fv(y)&&Fv(f)&&(f=ag(!0,y,f)),i[p]=[u,f,...m]}}}}const GO=new ux().freeze();function ug(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function dg(n,e){if(typeof e!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function hg(n,e){if(e)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Yb(n){if(!Fv(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function Kb(n,e,t){if(!t)throw new Error("`"+n+"` finished async. Use `"+e+"` instead")}function Qh(n){return XO(n)?n:new I_(n)}function XO(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function YO(n){return typeof n=="string"||KO(n)}function KO(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const QO="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Qb=[],Zb={allowDangerousHtml:!0},ZO=/^(https?|ircs?|mailto|xmpp)$/i,JO=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ej(n){const e=tj(n),t=nj(n);return ij(e.runSync(e.parse(t),t),n)}function tj(n){const e=n.rehypePlugins||Qb,t=n.remarkPlugins||Qb,i=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...Zb}:Zb;return GO().use(DF).use(t).use(LO,i).use(e)}function nj(n){const e=n.children||"",t=new I_;return typeof e=="string"&&(t.value=e),t}function ij(n,e){const t=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,a=e.skipHtml,o=e.unwrapDisallowed,l=e.urlTransform||rj;for(const d of JO)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+QO+d.id,void 0);return e.className&&(n={type:"element",tagName:"div",properties:{className:e.className},children:n.type==="root"?n.children:[n]}),P_(n,u),fN(n,{Fragment:P.Fragment,components:r,ignoreInvalidStyle:!0,jsx:P.jsx,jsxs:P.jsxs,passKeys:!0,passNode:!0});function u(d,h,p){if(d.type==="raw"&&p&&typeof h=="number")return a?p.children.splice(h,1):p.children[h]={type:"text",value:d.value},h;if(d.type==="element"){let f;for(f in ig)if(Object.hasOwn(ig,f)&&Object.hasOwn(d.properties,f)){const m=d.properties[f],y=ig[f];(y===null||y.includes(d.tagName))&&(d.properties[f]=l(String(m||""),f,d))}}if(d.type==="element"){let f=t?!t.includes(d.tagName):s?s.includes(d.tagName):!1;if(!f&&i&&typeof h=="number"&&(f=!i(d,h,p)),f&&p&&typeof h=="number")return o&&d.children?p.children.splice(h,1,...d.children):p.children.splice(h,1),h}}}function rj(n){const e=n.indexOf(":"),t=n.indexOf("?"),i=n.indexOf("#"),r=n.indexOf("/");return e===-1||r!==-1&&e>r||t!==-1&&e>t||i!==-1&&e>i||ZO.test(n.slice(0,e))?n:""}function sj({message:n}){const[e,t]=re.useState(!0),[i,r]=re.useState(!1),s=n.role==="assistant",a=n.type==="file",o=Mi(p=>p.removeMessage),l=Mi(p=>p.selectedTool),u=async()=>{await navigator.clipboard.writeText(n.content),r(!0),setTimeout(()=>r(!1),2e3)},d=()=>{switch(l){case"summarize":return"from-blue-50/50 to-blue-100/50 dark:from-blue-950/30 dark:to-blue-900/30";case"flashcards":return"from-purple-50/50 to-purple-100/50 dark:from-purple-950/30 dark:to-purple-900/30";case"quiz":return"from-green-50/50 to-green-100/50 dark:from-green-950/30 dark:to-green-900/30";default:return"from-gray-50/50 to-gray-100/50 dark:from-gray-950/30 dark:to-gray-900/30"}},h=()=>{switch(l){case"summarize":return"text-blue-600 dark:text-blue-400";case"flashcards":return"text-purple-600 dark:text-purple-400";case"quiz":return"text-green-600 dark:text-green-400";default:return"text-gray-600 dark:text-gray-400"}};return P.jsxs("div",{className:`
      message-animation relative group
      ${s?`bg-gradient-to-r ${d()}`:"bg-white/50 dark:bg-gray-800/50"}
      hover:shadow-lg transition-all duration-300 ease-in-out
      border-b border-gray-100 dark:border-gray-800
    `,children:[P.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[s&&P.jsxs("button",{onClick:u,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 tooltip-container",children:[P.jsx(lP,{className:`w-4 h-4 ${i?"text-green-500":"text-gray-500 dark:text-gray-400"}`}),P.jsx("span",{className:"tooltip",children:i?"Copied!":"Copy content"})]}),P.jsx("button",{onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 tooltip-container",children:e?P.jsxs(P.Fragment,{children:[P.jsx(oP,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),P.jsx("span",{className:"tooltip",children:"Collapse"})]}):P.jsxs(P.Fragment,{children:[P.jsx(IA,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"}),P.jsx("span",{className:"tooltip",children:"Expand"})]})}),P.jsxs("button",{onClick:()=>o(n.id),className:"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 tooltip-container",children:[P.jsx(fP,{className:"w-4 h-4 text-red-500"}),P.jsx("span",{className:"tooltip",children:"Delete message"})]})]}),P.jsxs("div",{className:"flex gap-4 p-6",children:[P.jsx("div",{className:`
          w-10 h-10 rounded-xl flex items-center justify-center shrink-0
          ${s?`bg-gradient-to-br ${l==="summarize"?"from-blue-500 to-blue-600":l==="flashcards"?"from-purple-500 to-purple-600":"from-green-500 to-green-600"} text-white`:"bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 text-gray-600 dark:text-gray-300"}
          transform transition-transform duration-300 group-hover:scale-110
        `,children:s?P.jsx(PA,{className:"w-6 h-6"}):P.jsx(gP,{className:"w-6 h-6"})}),P.jsxs("div",{className:"flex-1 space-y-2 pr-20",children:[a&&P.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 mb-3 bg-white/50 dark:bg-gray-800/50 px-4 py-2 rounded-lg inline-block",children:[P.jsx(N0,{className:"w-4 h-4"}),P.jsx("span",{className:"font-medium",children:n.fileName})]}),P.jsx("div",{className:`prose prose-blue dark:prose-invert max-w-none transition-all duration-300 ${e?"opacity-100":"opacity-50 max-h-20 overflow-hidden"}`,children:P.jsx(ej,{components:{h1:({children:p})=>P.jsx("h1",{className:`text-2xl font-bold mb-4 pb-2 border-b ${l==="summarize"?"text-blue-800 border-blue-200 dark:text-blue-300 dark:border-blue-800":l==="flashcards"?"text-purple-800 border-purple-200 dark:text-purple-300 dark:border-purple-800":"text-green-800 border-green-200 dark:text-green-300 dark:border-green-800"}`,children:p}),h2:({children:p})=>P.jsx("h2",{className:"text-xl font-semibold text-gray-700 dark:text-gray-300 mb-3",children:p}),h3:({children:p})=>P.jsx("h3",{className:`text-lg font-medium mb-2 ${h()}`,children:p}),p:({children:p})=>P.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed mb-4",children:p}),ul:({children:p})=>P.jsx("ul",{className:"space-y-2 mb-4",children:p}),li:({children:p})=>P.jsxs("li",{className:"flex items-start gap-2",children:[P.jsx("span",{className:`w-2 h-2 rounded-full mt-2 ${l==="summarize"?"bg-blue-500 dark:bg-blue-400":l==="flashcards"?"bg-purple-500 dark:bg-purple-400":"bg-green-500 dark:bg-green-400"}`}),P.jsx("span",{className:"flex-1 text-gray-600 dark:text-gray-400",children:p})]}),hr:()=>P.jsx("hr",{className:`my-6 ${l==="summarize"?"border-blue-200 dark:border-blue-800":l==="flashcards"?"border-purple-200 dark:border-purple-800":"border-green-200 dark:border-green-800"}`}),strong:({children:p})=>P.jsx("strong",{className:h(),children:p})},children:n.content})})]})]})]})}function aj(){const n=Mi(t=>t.messages),e=re.useRef(null);return re.useEffect(()=>{var t;(t=e.current)==null||t.scrollIntoView({behavior:"smooth"})},[n]),n.length===0?P.jsx("div",{className:"flex-1 flex items-center justify-center p-8 text-gray-500",children:P.jsx("p",{children:"No messages yet. Start by entering some text or uploading a file!"})}):P.jsxs("div",{className:"flex-1 overflow-y-auto",children:[n.map(t=>P.jsx(sj,{message:t},t.id)),P.jsx("div",{ref:e})]})}function oj(){const[n,e]=re.useState(""),{addMessage:t,isProcessing:i,selectedTool:r,toolSettings:s,setIsProcessing:a}=Mi(),o=async d=>{let h="";const p=d.split(/[.!?]+\s+/).map(f=>f.trim()).filter(f=>f.length>0);switch(r){case"summarize":{const f={short:Math.min(3,p.length),medium:Math.min(5,p.length),long:Math.min(7,p.length)}[s.summaryLength];h=`# Summary

## Key Points

${p.slice(0,f).map(y=>` ${y}`).join(`

`)}`;break}case"flashcards":{h=`# Study Flashcards

${p.slice(0,s.numFlashcards).map((m,y)=>{const E=m.split(" ").filter(v=>v.length>3),g=E[Math.floor(Math.random()*E.length)];return`### Card ${y+1}

**Front:** ${m.replace(g,"_____")}

**Back:** ${g}`}).join(`

---

`)}`;break}case"quiz":{const f=p.slice(0,s.numQuestions).map((m,y)=>{const E=m.split(" ").filter(v=>v.length>3),g=E[Math.floor(Math.random()*E.length)];if(s.quizType==="multiple-choice"){const v=E.filter(C=>C!==g),b=[g,...v.sort(()=>Math.random()-.5).slice(0,3)].sort(()=>Math.random()-.5);return`### Question ${y+1}

${m.replace(g,"_____")}

${b.map((C,T)=>`${String.fromCharCode(97+T)}) ${C}`).join(`
`)}

**Correct Answer:** ${g}`}return`### Question ${y+1}

${m.replace(g,"_____")}

**Answer:** ${g}`});h=`# ${s.difficulty.charAt(0).toUpperCase()+s.difficulty.slice(1)} ${s.quizType.split("-").map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" ")} Quiz

${f.join(`

---

`)}`}}return h},l=async d=>{if(d.preventDefault(),!n.trim()||i)return;Mi.getState().messages=[],t({role:"user",content:n,type:"text"}),e(""),a(!0);try{const p=await o(n);t({role:"assistant",content:p,type:"text"})}catch(p){console.error("Error processing request:",p),t({role:"assistant",content:"Sorry, I encountered an error processing your request. Please try again.",type:"text"})}finally{a(!1)}},u=async()=>{if(n.trim())try{const d=await o(n),h=`${r}-${new Date().toISOString().split("T")[0]}.md`,p=new Blob([d],{type:"text/markdown"}),f=URL.createObjectURL(p),m=document.createElement("a");m.href=f,m.download=h,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(f)}catch(d){console.error("Error downloading content:",d)}};return P.jsx("div",{className:`border-t p-6 transition-colors duration-300 ${r==="summarize"?"bg-blue-50/80 dark:bg-blue-950/20":r==="flashcards"?"bg-purple-50/80 dark:bg-purple-950/20":"bg-green-50/80 dark:bg-green-950/20"}`,children:P.jsxs("form",{onSubmit:l,className:"relative",children:[P.jsx("textarea",{value:n,onChange:d=>e(d.target.value),placeholder:r==="summarize"?"Enter text to summarize...":r==="flashcards"?"Enter content for flashcards...":"Enter text for quiz generation...",className:`w-full px-6 py-4 rounded-xl border-2 focus:ring-2 transition-all duration-300 pr-32 min-h-[100px] resize-y
            dark:bg-gray-800 dark:text-white
            ${r==="summarize"?"border-blue-200 focus:border-blue-500 focus:ring-blue-200 dark:border-blue-800 dark:focus:border-blue-600":r==="flashcards"?"border-purple-200 focus:border-purple-500 focus:ring-purple-200 dark:border-purple-800 dark:focus:border-purple-600":"border-green-200 focus:border-green-500 focus:ring-green-200 dark:border-green-800 dark:focus:border-green-600"}`,disabled:i}),P.jsxs("div",{className:"absolute right-2 bottom-2 flex gap-2",children:[!i&&n.trim()&&P.jsxs(P.Fragment,{children:[P.jsx("button",{type:"button",onClick:u,className:`w-8 h-8 rounded-lg flex items-center justify-center transition-transform duration-300 hover:scale-110 ${r==="summarize"?"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400":r==="flashcards"?"bg-purple-100 text-purple-600 dark:bg-purple-900 dark:text-purple-400":"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400"}`,children:P.jsx(M0,{className:"w-4 h-4"})}),P.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${r==="summarize"?"bg-blue-100 dark:bg-blue-900":r==="flashcards"?"bg-purple-100 dark:bg-purple-900":"bg-green-100 dark:bg-green-900"}`,children:P.jsx(NA,{className:`w-4 h-4 ${r==="summarize"?"text-blue-600 dark:text-blue-400":r==="flashcards"?"text-purple-600 dark:text-purple-400":"text-green-600 dark:text-green-400"}`})})]}),P.jsx("button",{type:"submit",disabled:i||!n.trim(),className:`
              px-4 py-2 rounded-lg flex items-center gap-2
              transition-all duration-300 transform hover:scale-105
              ${i||!n.trim()?"bg-gray-100 text-gray-400 cursor-not-allowed dark:bg-gray-800 dark:text-gray-600":r==="summarize"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:shadow-lg dark:from-blue-600 dark:to-blue-700":r==="flashcards"?"bg-gradient-to-r from-purple-500 to-purple-600 text-white hover:shadow-lg dark:from-purple-600 dark:to-purple-700":"bg-gradient-to-r from-green-500 to-green-600 text-white hover:shadow-lg dark:from-green-600 dark:to-green-700"}
            `,children:i?P.jsx(MA,{className:"w-5 h-5 animate-spin"}):P.jsx(hP,{className:"w-5 h-5"})})]})]})})}const lj=({icon:n,title:e,description:t,gradient:i,index:r,theme:s})=>{const a=re.useRef(null);return re.useEffect(()=>{const o=new IntersectionObserver(([l])=>{l.isIntersecting&&(l.target.classList.add("animate-pop"),l.target.style.opacity="1")},{threshold:.5,rootMargin:"-50px"});return a.current&&o.observe(a.current),()=>o.disconnect()},[]),P.jsxs("div",{ref:a,className:"timeline-item my-16",children:[P.jsx("div",{className:`timeline-dot ${i}`}),P.jsxs("div",{className:`timeline-content ${s==="dark"?"bg-gray-800":"bg-white"}`,children:[P.jsx("div",{className:`w-12 h-12 mb-4 rounded-xl bg-gradient-to-br ${i} flex items-center justify-center`,children:P.jsx(n,{className:"w-6 h-6 text-white"})}),P.jsxs("h3",{className:`text-xl font-semibold mb-2 ${s==="dark"?"text-gray-200":"text-gray-800"}`,children:[r,". ",e]}),P.jsx("p",{className:s==="dark"?"text-gray-400":"text-gray-600",children:t})]})]})};function cj({theme:n}){const e=re.useRef(null);re.useEffect(()=>{const i=new IntersectionObserver(([r])=>{if(r.isIntersecting){const s=r.target.querySelector(".timeline-line");s&&s.classList.add("animate-draw-line")}},{threshold:.2});return e.current&&i.observe(e.current),()=>i.disconnect()},[]);const t=[{icon:N0,title:"Input Your Text",description:"Paste your study material or upload a PDF/image file",gradient:"from-blue-500 to-blue-600"},{icon:DA,title:"Choose a Tool",description:"Select from summarize, flashcards, or quiz options",gradient:"from-purple-500 to-purple-600"},{icon:M0,title:"Get Results",description:"Download or interact with your study materials",gradient:"from-green-500 to-green-600"}];return P.jsxs("div",{ref:e,className:"timeline-container py-16",children:[P.jsx("div",{className:"timeline-line"}),t.map((i,r)=>P.jsx(lj,{...i,index:r+1,theme:n},r))]})}function uj(){const[n,e]=re.useState(()=>localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"));return re.useEffect(()=>{localStorage.setItem("theme",n)},[n]),{theme:n,toggleTheme:()=>{e(i=>i==="light"?"dark":"light")}}}function dj(){const{theme:n,toggleTheme:e}=uj(),[t,i]=re.useState(!1),[r,s]=re.useState(!1),[a,o]=re.useState(!1),{setInputText:l,selectedTool:u,inputText:d}=Mi(),h=[{id:"summarize",name:"Summarize",icon:TA,description:"Generate concise summaries",gradient:"from-blue-500 to-blue-600"},{id:"flashcards",name:"Flashcards",icon:LA,description:"Create study flashcards",gradient:"from-purple-500 to-purple-600"},{id:"quiz",name:"Quiz",icon:RA,description:"Generate practice questions",gradient:"from-green-500 to-green-600"}],p=()=>{s(!1),i(!0)},f=y=>{l(y),s(!0)};re.useEffect(()=>{const y=()=>{const E=window.scrollY,g=window.innerHeight;document.documentElement.scrollHeight,E>g*.5&&o(!0)};return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const m=()=>{window.scrollTo({top:0,behavior:"smooth"})};return P.jsx("div",{className:`min-h-screen transition-colors duration-500 ${n==="dark"?"bg-gradient-to-br from-gray-900 to-gray-800 text-white":"bg-gradient-to-br from-blue-50 to-indigo-50 text-gray-900"}`,children:P.jsxs("div",{className:`max-w-6xl mx-auto backdrop-blur-sm min-h-screen shadow-2xl flex flex-col ${n==="dark"?"bg-gray-900/80":"bg-white/80"}`,children:[P.jsxs("header",{className:`flex flex-col items-center gap-4 p-6 border-b ${n==="dark"?"border-gray-700":"border-gray-200"}`,children:[P.jsxs("div",{className:"flex items-center justify-between w-full",children:[P.jsxs("button",{onClick:m,className:"flex items-center gap-3 transition-transform duration-300 hover:scale-105",children:[P.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-lg",children:P.jsx(PA,{className:"w-7 h-7 text-white"})}),P.jsxs("div",{className:"text-left",children:[P.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-500 to-indigo-600 bg-clip-text text-transparent",children:"Splan"}),P.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Study Smart"})]})]}),P.jsx("button",{onClick:e,className:`p-2 rounded-lg transition-colors duration-300 ${n==="dark"?"bg-gray-800 hover:bg-gray-700 text-yellow-500":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,children:n==="dark"?P.jsx(pP,{className:"w-5 h-5"}):P.jsx(dP,{className:"w-5 h-5"})})]}),P.jsxs("div",{className:"text-center mt-4",children:[P.jsxs("div",{className:"flex items-center justify-center gap-2",children:[P.jsx("h2",{className:"text-5xl font-bold bg-gradient-to-r from-blue-500 to-indigo-600 bg-clip-text text-transparent animate-float",children:"Your Learning Assistant"}),P.jsx(NA,{className:"w-6 h-6 text-yellow-400 animate-float"})]}),P.jsx("p",{className:`text-sm mt-1 ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:"Transform any text into interactive study materials"})]})]}),P.jsxs("main",{className:"flex-1 flex flex-col",children:[!r&&!t?P.jsxs("div",{className:"flex-1 grid md:grid-cols-2 gap-8 p-8 animate-fade-in",children:[P.jsxs("div",{className:"space-y-4",children:[P.jsx("h2",{className:`text-xl font-semibold ${n==="dark"?"text-gray-200":"text-gray-700"}`,children:"Enter Your Text"}),P.jsx("textarea",{className:`w-full h-64 p-4 rounded-xl border-2 transition-all duration-300 resize-none ${n==="dark"?"bg-gray-800 border-gray-700 text-gray-200 focus:border-blue-500":"bg-white border-gray-200 text-gray-800 focus:border-blue-500"}`,placeholder:"Paste your study material here...",onChange:y=>{const E=y.target.value.trim();E.length>0&&f(E)}})]}),P.jsxs("div",{className:"space-y-4",children:[P.jsx("h2",{className:`text-xl font-semibold ${n==="dark"?"text-gray-200":"text-gray-700"}`,children:"Upload PDF or Image"}),P.jsx("div",{className:"h-64",children:P.jsx(pM,{onFileProcessed:f})})]})]}):r?P.jsx("div",{className:"flex-1 flex items-center justify-center p-8 animate-fade-in",children:P.jsxs("div",{className:`max-w-2xl w-full p-6 rounded-xl shadow-lg ${n==="dark"?"bg-gray-800":"bg-white"}`,children:[P.jsx("h2",{className:`text-2xl font-bold mb-4 ${n==="dark"?"text-gray-200":"text-gray-800"}`,children:"Confirm Your Text"}),P.jsx("div",{className:`p-4 rounded-lg mb-6 max-h-60 overflow-y-auto ${n==="dark"?"bg-gray-700 text-gray-300":"bg-gray-50 text-gray-700"}`,children:d}),P.jsxs("div",{className:"flex justify-end gap-4",children:[P.jsx("button",{onClick:()=>s(!1),className:`px-4 py-2 rounded-lg transition-all duration-300 ${n==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:"Edit Text"}),P.jsx("button",{onClick:p,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Continue"})]})]})}):P.jsxs("div",{className:"flex-1 flex",children:[P.jsx("div",{className:`w-1/4 border-r overflow-y-auto transition-all duration-500 ${n==="dark"?"border-gray-700":"border-gray-200"} ${u?"translate-x-0 opacity-100":"-translate-x-full opacity-0"}`,children:P.jsx(vM,{})}),P.jsx("div",{className:"flex-1 flex flex-col",children:u?P.jsxs(P.Fragment,{children:[P.jsx("div",{className:"flex-1 overflow-y-auto",children:P.jsx(aj,{})}),P.jsx(oj,{})]}):P.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:P.jsxs("div",{className:"text-center space-y-8 animate-fade-in",children:[P.jsx("h2",{className:`text-2xl font-bold ${n==="dark"?"text-gray-200":"text-gray-800"}`,children:"Choose Your Learning Tool"}),P.jsx("div",{className:"grid grid-cols-3 gap-8 max-w-4xl",children:h.map(y=>P.jsxs("button",{onClick:()=>Mi.getState().setSelectedTool(y.id),className:`group p-6 rounded-xl transition-all duration-300 transform hover:scale-110 ${n==="dark"?"bg-gray-800":"bg-white"} shadow-lg hover:shadow-xl`,children:[P.jsx("div",{className:`w-16 h-16 mx-auto rounded-xl bg-gradient-to-br ${y.gradient} 
                              flex items-center justify-center mb-4 transition-transform duration-300 
                              group-hover:scale-110`,children:P.jsx(y.icon,{className:"w-8 h-8 text-white"})}),P.jsx("div",{className:`text-lg font-semibold mb-2 ${n==="dark"?"text-gray-200":"text-gray-800"}`,children:y.name}),P.jsx("p",{className:`text-sm ${n==="dark"?"text-gray-400":"text-gray-600"}`,children:y.description})]},y.id))})]})})})]}),P.jsx("div",{className:`transition-all duration-700 ease-in-out ${a?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:P.jsx("div",{className:`border-t ${n==="dark"?"border-gray-700":"border-gray-200"} p-12`,children:P.jsxs("div",{className:"max-w-4xl mx-auto",children:[P.jsx("h2",{className:`text-3xl font-bold mb-12 text-center ${n==="dark"?"text-gray-200":"text-gray-800"}`,children:"How to Use Splan"}),P.jsx(cj,{theme:n}),P.jsxs("button",{onClick:m,className:`mt-12 flex items-center gap-2 mx-auto px-6 py-3 rounded-xl 
                    transition-all duration-300 transform hover:scale-105 ${n==="dark"?"bg-gray-700 hover:bg-gray-600 text-gray-200":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,children:[P.jsx(IA,{className:"w-5 h-5"}),P.jsx("span",{children:"Back to Top"})]})]})})})]})]})})}pA(document.getElementById("root")).render(P.jsx(re.StrictMode,{children:P.jsx(dj,{})}));
